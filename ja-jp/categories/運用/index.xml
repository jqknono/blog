<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>運用 on jqknono Blogs</title><link>https://blog.jqknono.com/ja-jp/categories/%E9%81%8B%E7%94%A8/</link><description>Recent content in 運用 on jqknono Blogs</description><generator>Hugo -- gohugo.io</generator><language>ja-jp</language><lastBuildDate>Fri, 05 Dec 2025 11:51:04 +0800</lastBuildDate><atom:link href="https://blog.jqknono.com/ja-jp/categories/%E9%81%8B%E7%94%A8/index.xml" rel="self" type="application/rss+xml"/><item><title>抜くサーバーは大得</title><link>https://blog.jqknono.com/ja-jp/blog/2025/12/05/%E6%8A%9C%E3%81%8F%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%81%AF%E5%A4%A7%E5%BE%97/</link><pubDate>Fri, 05 Dec 2025 11:51:04 +0800</pubDate><guid>https://blog.jqknono.com/ja-jp/blog/2025/12/05/%E6%8A%9C%E3%81%8F%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%81%AF%E5%A4%A7%E5%BE%97/</guid><description>&lt;p&gt;長らく大得があるが、私はこれまで公開コミュニティで宣伝したことがない、それはアリババクラウドの&lt;strong&gt;抜くサーバー&lt;/strong&gt;が非常に得だということだ。&lt;/p&gt;
&lt;h2 id="長期大幅割引"&gt;長期大幅割引&lt;/h2&gt;
&lt;p&gt;タイトルバーに書かれた&lt;em&gt;最大90%節約&lt;/em&gt;という表示は誇張ではなく、人気構成のサーバーは通常20%の割引、つまり2割引で、やや需要の少ない構成は9%の割引まで可能で、1割以下になる。&lt;/p&gt;
&lt;p&gt;人気サーバーの一種は小規模入門サーバーで、2c2g、2c4gなどがあり、もう一種は&lt;em&gt;CPU/メモリ&lt;/em&gt;バランス型サーバーで、1:2(4c8g)、1:4(4c16g、8c32g)などがある。この種のサーバーは割引がやや少ない。&lt;/p&gt;
&lt;p&gt;需要の少ない構成は通常&lt;em&gt;CPU/メモリ&lt;/em&gt;アンバランス型サーバーで、1:8(8c64g)、1:1(8c8g)などがあり、この種のサーバーは最大の割引を受ける。&lt;/p&gt;
&lt;p&gt;今日の抜くサーバーを調べると、2c16gの方が2c8gより安い。なぜなら前者は9%、後者は14%の割引率で、逆転現象が起きているからだ。&lt;/p&gt;
&lt;p&gt;アリババクラウドの抜くサーバーの割引率は動的に更新され、そのアルゴリズムは不明だが、私の使用シナリオで85%のコスト削減は確実にある。&lt;/p&gt;
&lt;h2 id="抜くサーバーの使用前提"&gt;抜くサーバーの使用前提&lt;/h2&gt;
&lt;p&gt;抜くサーバーを使用する核心は&lt;strong&gt;CPU/メモリ&lt;/strong&gt;と長期ストレージを分離し、長期ストレージには分離可能なクラウドディスク、OSS、NAS、データベースを使用できる。&lt;/p&gt;
&lt;p&gt;クラウドディスクは地域に依存し、抜くサーバーの利用可能リソースも地域と強く関連しているため、クラウドディスクが最もIO性能の高い安定ストレージであるにもかかわらず、すべての地域で抜くサーバーが利用可能であるとは限らない。個人的にはこれを次点の選択肢とすることを推奨する。&lt;/p&gt;
&lt;p&gt;その他三つのストレージはネットワークに依存し、アリババクラウドのイントラネット通信は無料で、IOレイテンシは高い可能性があるが、IO速度は許容範囲で、主にランダム読み書きがクラウドディスクより遅い。&lt;/p&gt;
&lt;p&gt;OSSはアリババクラウドのオブジェクトストレージで、&lt;strong&gt;読み取り&lt;/strong&gt;中心のファイル保存に適し、ネットワーク共有に適する。&lt;/p&gt;
&lt;p&gt;NASはアリババクラウドのネットワークストレージで、各種ファイルの保存に適し、読み書きバランスが取れ、公共共有にはあまり適さない。&lt;/p&gt;
&lt;p&gt;データベースは構造化データの保存に適し、計算とメモリ使用量は前述三者より多く、コストも高くなる。データベース自体は長期ストレージであり、クラウドディスクのような形態の長期ストレージに依存し、etcd、redisなどメモリに依存するデータベースタイプもある。&lt;/p&gt;
&lt;h2 id="重要問題"&gt;重要問題&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;抜くサーバーは長期業務を担えるか？&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;答えは肯定的で、&lt;a href="https://nullprivate.com"&gt;寧屏広告除去&lt;/a&gt;は抜くサーバーを使用して長期業務を担っている。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;抜くサーバーはどのように回収されるか？&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;無保護期間または1時間保護期間の抜くインスタンスを作成可能で、保護期間を過ぎると市场价格が入札価格を上回るか資源の需給関係が変化した場合、抜くサーバーは自動的に解放され、データバックアップ作業を確実に行うこと。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;抜くサーバーには二種類の入札方法がある：&lt;/p&gt;
&lt;p&gt;一つは保護期間を購入し、&lt;strong&gt;X時間&lt;/strong&gt;の使用を約束し、その後市場状況に応じて解放する方法。解放には二種類の形式があり、一つはすべてのリソースを解放し、もう一つは計算リソースのみを解放し、クラウドディスク、IP、スナップショットを残す方法で、残されたリソースは引き続き課金される。運用は約束時間前に業務を新しいECSマシンに移行できる。&lt;/p&gt;
&lt;p&gt;二つ目は保護期間を使用せず、市場リアルタイム価格で入札する方法で、確保リソースが逼迫すると、市場価格で入札しても回収される。&lt;/p&gt;
&lt;p&gt;&lt;a href="https://nullprivate.com"&gt;寧屏広告除去&lt;/a&gt;はKubernetesクラスタに依拠し、二つ目の入札方法を使用している。二つ目の方法は一つ目と比べてさらに約15%のコストを節約できる。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;抜くサーバーの業務移行方法は？&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;核心は、アリババクラウドが抜くサーバーを解放すると決めた場合、&lt;strong&gt;5分前&lt;/strong&gt;に通知が行われる点にある。&lt;/p&gt;
&lt;p&gt;この5分以内に行うべきことは：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;システム通知を識別し、抜くサーバーが解放されようとしていることを認識する&lt;/li&gt;
&lt;li&gt;抜くサーバーの在庫を照会する&lt;/li&gt;
&lt;li&gt;新しい抜くサーバーを購入する&lt;/li&gt;
&lt;li&gt;サーバーを初期化し、業務に必要なコンポーネントをインストールする&lt;/li&gt;
&lt;li&gt;弾性パブリックIPを移行するか、DNS解決を移行する&lt;/li&gt;
&lt;li&gt;新しいサーバーをクラスタに参加させる&lt;/li&gt;
&lt;li&gt;業務を移行する&lt;/li&gt;
&lt;li&gt;古いサーバーをクラスタから除去する&lt;/li&gt;
&lt;li&gt;古いサーバーを解放する&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="有料コンサルティング"&gt;有料コンサルティング&lt;/h2&gt;
&lt;p&gt;本文の分析が示すように、抜くサーバーを使用することでサーバーコストの80%以上を節約できるが、&lt;strong&gt;計算&lt;/strong&gt;と&lt;strong&gt;ストレージ&lt;/strong&gt;の結合を分離する必要があり、相当の技術力が要求される。私は週末または深夜に有料コンサルティングサービス(1000円/時間)を提供でき、企業がこの目標を達成するのを支援できる。リモートデスクトップ環境の用意、コードベースアクセス権限、VS Code開発環境 + Claude Code(CodexまたはCursor)が必要で、私は業務コードアーキテクチャを迅速に分析し、分離方案を提示する。&lt;/p&gt;</description></item><item><title>アリババクラウドのESA_page機能はまだ使用しないことを推奨</title><link>https://blog.jqknono.com/ja-jp/blog/2025/12/03/%E3%82%A2%E3%83%AA%E3%83%90%E3%83%90%E3%82%AF%E3%83%A9%E3%82%A6%E3%83%89%E3%81%AEesa_page%E6%A9%9F%E8%83%BD%E3%81%AF%E3%81%BE%E3%81%A0%E4%BD%BF%E7%94%A8%E3%81%97%E3%81%AA%E3%81%84%E3%81%93%E3%81%A8%E3%82%92%E6%8E%A8%E5%A5%A8/</link><pubDate>Wed, 03 Dec 2025 19:16:52 +0800</pubDate><guid>https://blog.jqknono.com/ja-jp/blog/2025/12/03/%E3%82%A2%E3%83%AA%E3%83%90%E3%83%90%E3%82%AF%E3%83%A9%E3%82%A6%E3%83%89%E3%81%AEesa_page%E6%A9%9F%E8%83%BD%E3%81%AF%E3%81%BE%E3%81%A0%E4%BD%BF%E7%94%A8%E3%81%97%E3%81%AA%E3%81%84%E3%81%93%E3%81%A8%E3%82%92%E6%8E%A8%E5%A5%A8/</guid><description>&lt;p&gt;これは ESA Pages 機能の制限で、このリソース規模では小さなウェブサイトをホストするのに十分です。長期的に更新するウェブサイトをホストしたい場合、2000 個のファイルの制限は低すぎます。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;機能&lt;/th&gt;
&lt;th&gt;制限項目&lt;/th&gt;
&lt;th&gt;制限&lt;/th&gt;
&lt;th&gt;説明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;関数&lt;/td&gt;
&lt;td&gt;応答時間&lt;/td&gt;
&lt;td&gt;120 秒&lt;/td&gt;
&lt;td&gt;関数の単一実行の応答時間は 120 秒を超えてはなりません（I/O 待機も RT 時間に含まれます）。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;待機時間&lt;/td&gt;
&lt;td&gt;10 秒&lt;/td&gt;
&lt;td&gt;ゲートウェイが Functions を待機する時間で、Functions が 10 秒以内にデータを返さない場合、ゲートウェイは接続を積極的に切断し、クライアントに 504 ステータスコードを返します。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;コードパッケージサイズ&lt;/td&gt;
&lt;td&gt;4 MB&lt;/td&gt;
&lt;td&gt;各関数の JavaScript コードファイルの上限サイズ。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;サブリクエスト数&lt;/td&gt;
&lt;td&gt;4 個&lt;/td&gt;
&lt;td&gt;Functions の単一実行で許可される fetch リクエスト数。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;開発言語&lt;/td&gt;
&lt;td&gt;JavaScript（ES6 構文）&lt;/td&gt;
&lt;td&gt;現在 JS のみサポート。JavaScript プログラミングスキルが必要です。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Pages&lt;/td&gt;
&lt;td&gt;ファイル数&lt;/td&gt;
&lt;td&gt;2000 個&lt;/td&gt;
&lt;td&gt;各 Pages プロジェクトで最大 2000 個の静的ファイル（HTML、CSS、JS、画像など）をアップロード可能。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;単一ファイルサイズ&lt;/td&gt;
&lt;td&gt;25MB&lt;/td&gt;
&lt;td&gt;単一ファイル（動画、PDF、JS パッケージなど）の最大サイズは 25MB。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;パッケージサイズ&lt;/td&gt;
&lt;td&gt;1024MB&lt;/td&gt;
&lt;td&gt;プロジェクト全体のソースコード圧縮パッケージ（deploy package）の最大サイズは 1024MB。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="参考ドキュメント"&gt;参考ドキュメント&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.alibabacloud.com/help/zh/edge-security-acceleration/esa/user-guide/what-is-functions-and-pages/?spm=a2c63.p38356.help-menu-2673927.d_2_14_0.3fc311f30eRxno"&gt;アリババクラウドドキュメント: ESA_page 機能制限&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>アリババのESAとOSSの落とし穴</title><link>https://blog.jqknono.com/ja-jp/blog/2025/12/02/%E3%82%A2%E3%83%AA%E3%83%90%E3%83%90%E3%81%AEesa%E3%81%A8oss%E3%81%AE%E8%90%BD%E3%81%A8%E3%81%97%E7%A9%B4/</link><pubDate>Tue, 02 Dec 2025 18:10:45 +0800</pubDate><guid>https://blog.jqknono.com/ja-jp/blog/2025/12/02/%E3%82%A2%E3%83%AA%E3%83%90%E3%83%90%E3%81%AEesa%E3%81%A8oss%E3%81%AE%E8%90%BD%E3%81%A8%E3%81%97%E7%A9%B4/</guid><description>&lt;p&gt;初期のアリババ ESA は、ESA からプライベート OSS にアクセスするトラフィックが無料と言っていましたが、後で以下のように変更されました:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ソースステーションが阿里雲 OSS の場合、OSS 側はバックツースペースのアウトバウンドトラフィックに基づいて課金します。OSS が中国本土地域以外にあり、リクエストリソースを対応地域の ESA ノードに転送する場合に限り料金はかかりません。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;これまでの任意の ESA ノードからの OSS へのバックツースペースが無料だったものが、&lt;em&gt;対応地域の ESA ノードからの非大陸 OSS へのバックツースペースが無料&lt;/em&gt; に変更されました。つまり、OSS が韓国にある場合、ESA を有効化した後、韓国からのみホストサイトへのアクセスが無料で、韓国以外からのアクセスはキャッシュ期間内に OSS のバックツースペース流量費が1回課金されます。この費用は 2025.10 およびそれ以前は無料でしたが、2025.11 から課金開始です。&lt;/p&gt;
&lt;p&gt;私の小サイトは以前9ヶ月間料金なしで使っていましたが、10ヶ月目、つまり 2025.11 から、今月の CDN バックツースペースアウトバウンド流量 11G で 0.8 ドル課金されました。&lt;/p&gt;
&lt;p&gt;今後、アリババの製品を無料製品として推薦できませんし、アリババは通知なし、サイト内メッセージすらありません。これは商業化が粗雑で、ユーザーを尊重していないことを示しています。私が小規模 SaaS 製品を作ってもユーザーに対してこうはしません、だからクレジットカードを急いで紐付けようとするのです。&lt;/p&gt;
&lt;p&gt;アリババ ESA の最新料金詳細はこちら:
&lt;a href="https://www.alibabacloud.com/help/zh/edge-security-acceleration/esa/product-overview/basic-package-fee?spm=a2c63.p38356.help-menu-2673927.d_0_4_0.1f7e996f3LOyTd"&gt;https://www.alibabacloud.com/help/zh/edge-security-acceleration/esa/product-overview/basic-package-fee?spm=a2c63.p38356.help-menu-2673927.d_0_4_0.1f7e996f3LOyTd&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;古いドキュメントはもう見つかりません。以前9ヶ月間料金なしだったため、今の料金が明確で、ESA の料金ポリシーが変更されたと確信しています。&lt;/p&gt;</description></item></channel></rss>