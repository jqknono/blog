<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Wsl on Nono Blogs</title><link>https://blog.jqknono.com/tags/wsl/</link><description>Recent content in Wsl on Nono Blogs</description><generator>Hugo</generator><language>zh-cn</language><lastBuildDate>Wed, 25 Jun 2025 19:09:29 +0800</lastBuildDate><atom:link href="https://blog.jqknono.com/tags/wsl/index.xml" rel="self" type="application/rss+xml"/><item><title>WSL mirrored网络模式配置指南</title><link>https://blog.jqknono.com/blog/2025/06/25/wsl-mirrored%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%BC%8F%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97/</link><pubDate>Wed, 25 Jun 2025 19:09:29 +0800</pubDate><guid>https://blog.jqknono.com/blog/2025/06/25/wsl-mirrored%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%BC%8F%E9%85%8D%E7%BD%AE%E6%8C%87%E5%8D%97/</guid><description>&lt;h2 id="版本要求"&gt;版本要求&lt;/h2&gt;
&lt;p&gt;当前版本状态：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;最新稳定版：2.5.9（存在网络配置缺陷）&lt;/li&gt;
&lt;li&gt;推荐版本：2.6.0 预览版（支持完整mirrored模式）&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="模式对比分析"&gt;模式对比分析&lt;/h2&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;特性&lt;/th&gt;
 &lt;th&gt;bridge模式（已废弃）&lt;/th&gt;
 &lt;th&gt;mirrored模式（推荐）&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;协议栈架构&lt;/td&gt;
 &lt;td&gt;双协议栈&lt;/td&gt;
 &lt;td&gt;共享协议栈&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;IP地址分配&lt;/td&gt;
 &lt;td&gt;独立IP（Windows+WSL）&lt;/td&gt;
 &lt;td&gt;共享主机IP&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;端口资源&lt;/td&gt;
 &lt;td&gt;独立使用&lt;/td&gt;
 &lt;td&gt;共享端口（需避免冲突）&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;网络性能&lt;/td&gt;
 &lt;td&gt;相对较重&lt;/td&gt;
 &lt;td&gt;轻量高效&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;配置复杂度&lt;/td&gt;
 &lt;td&gt;简单&lt;/td&gt;
 &lt;td&gt;需深度配置防火墙策略&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="标准配置步骤"&gt;标准配置步骤&lt;/h2&gt;
&lt;h3 id="1-网络模式设置"&gt;1. 网络模式设置&lt;/h3&gt;
&lt;p&gt;通过 &lt;strong&gt;WSL Settings&lt;/strong&gt; 应用设置基础模式：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;打开设置应用&lt;/li&gt;
&lt;li&gt;选择&amp;quot;Network&amp;quot;选项卡&lt;/li&gt;
&lt;li&gt;设置网络模式为&amp;quot;Mirrored&amp;quot;&lt;/li&gt;
&lt;li&gt;应用配置并重启WSL&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src="https://img1.techfetch.dev/blog/202506261151336.png" alt=""&gt;&lt;/p&gt;
&lt;h3 id="2-防火墙策略配置"&gt;2. 防火墙策略配置&lt;/h3&gt;
&lt;p&gt;需通过PowerShell执行完整策略配置：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-powershell" data-lang="powershell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# 定义WSL虚拟机GUID&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nv"&gt;$wslGuid&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;{40E0AC32-46A5-438A-A0B2-2B479E8F2E90}&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# 配置防火墙策略（按顺序执行）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;Set-NetFirewallHyperVVMSetting&lt;/span&gt; &lt;span class="n"&gt;-Name&lt;/span&gt; &lt;span class="nv"&gt;$wslGuid&lt;/span&gt; &lt;span class="n"&gt;-Enabled&lt;/span&gt; &lt;span class="n"&gt;True&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;Set-NetFirewallHyperVVMSetting&lt;/span&gt; &lt;span class="n"&gt;-Name&lt;/span&gt; &lt;span class="nv"&gt;$wslGuid&lt;/span&gt; &lt;span class="n"&gt;-DefaultInboundAction&lt;/span&gt; &lt;span class="n"&gt;Allow&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;Set-NetFirewallHyperVVMSetting&lt;/span&gt; &lt;span class="n"&gt;-Name&lt;/span&gt; &lt;span class="nv"&gt;$wslGuid&lt;/span&gt; &lt;span class="n"&gt;-DefaultOutboundAction&lt;/span&gt; &lt;span class="n"&gt;Allow&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;Set-NetFirewallHyperVVMSetting&lt;/span&gt; &lt;span class="n"&gt;-Name&lt;/span&gt; &lt;span class="nv"&gt;$wslGuid&lt;/span&gt; &lt;span class="n"&gt;-LoopbackEnabled&lt;/span&gt; &lt;span class="n"&gt;True&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;Set-NetFirewallHyperVVMSetting&lt;/span&gt; &lt;span class="n"&gt;-Name&lt;/span&gt; &lt;span class="nv"&gt;$wslGuid&lt;/span&gt; &lt;span class="n"&gt;-AllowHostPolicyMerge&lt;/span&gt; &lt;span class="n"&gt;True&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# 验证配置结果&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;Get-NetFirewallHyperVVMSetting&lt;/span&gt; &lt;span class="n"&gt;-Name&lt;/span&gt; &lt;span class="nv"&gt;$wslGuid&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="3-端口映射验证"&gt;3. 端口映射验证&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-powershell" data-lang="powershell"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# 示例：检查80端口占用情况&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;Get-NetTCPConnection&lt;/span&gt; &lt;span class="n"&gt;-LocalPort&lt;/span&gt; &lt;span class="mf"&gt;80&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="常见问题处理"&gt;常见问题处理&lt;/h2&gt;
&lt;h3 id="问题1无法建立外部连接"&gt;问题1：无法建立外部连接&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;检查步骤：&lt;code&gt;Get-NetFirewallHyperVVMSetting&lt;/code&gt;输出中所有字段应为True/Allow&lt;/li&gt;
&lt;li&gt;解决方案：按顺序重新执行防火墙策略配置&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="问题2端口冲突"&gt;问题2：端口冲突&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;验证方法：&lt;code&gt;netstat -ano&lt;/code&gt;查看端口占用&lt;/li&gt;
&lt;li&gt;处理建议：优先释放Windows端占用端口，或修改WSL服务监听端口&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="验证方法"&gt;验证方法&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;启动WSL服务（如Nginx/Apache）&lt;/li&gt;
&lt;li&gt;从Windows主机访问&lt;code&gt;http://localhost:&amp;lt;port&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;从局域网设备访问&lt;code&gt;http://&amp;lt;host-ip&amp;gt;:&amp;lt;port&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="参考资料"&gt;参考资料&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href="https://learn.microsoft.com/en-us/windows/wsl/networking"&gt;WSL官方网络文档&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/microsoft/WSL/releases/tag/2.6.0"&gt;WSL 2.6.0发布说明&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;</description></item><item><title>Windows Subsystem Linux(WSL)</title><link>https://blog.jqknono.com/blog/programmer/environment/wsl/</link><pubDate>Wed, 25 Jun 2025 18:44:13 +0800</pubDate><guid>https://blog.jqknono.com/blog/programmer/environment/wsl/</guid><description>&lt;ul&gt;
&lt;li&gt;&lt;input disabled="" type="checkbox"&gt; _index&lt;/li&gt;
&lt;/ul&gt;</description></item></channel></rss>