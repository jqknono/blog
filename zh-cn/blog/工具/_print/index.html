<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=zh-cn class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=canonical type=text/html href=https://blog.jqknono.com/zh-cn/blog/%E5%B7%A5%E5%85%B7/><link rel=alternate type=application/rss+xml href=https://blog.jqknono.com/zh-cn/blog/%E5%B7%A5%E5%85%B7/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>工具 | Nono Blogs</title>
<meta name=description content="jqknono 的博客"><meta property="og:url" content="https://blog.jqknono.com/zh-cn/blog/%E5%B7%A5%E5%85%B7/"><meta property="og:site_name" content="Nono Blogs"><meta property="og:title" content="工具"><meta property="og:description" content="jqknono 的博客"><meta property="og:locale" content="zh_cn"><meta property="og:type" content="website"><meta itemprop=name content="工具"><meta itemprop=description content="jqknono 的博客"><meta itemprop=datePublished content="2024-06-28T16:11:32+08:00"><meta itemprop=dateModified content="2024-06-28T16:11:32+08:00"><meta itemprop=keywords content="工具"><meta name=twitter:card content="summary"><meta name=twitter:title content="工具"><meta name=twitter:description content="jqknono 的博客"><link rel=preload href=/scss/main.min.e81f31c607d4dfb1bbd1e5c00f8fadecb9daf0190b0b7b1b45cef33ea659d00d.css as=style integrity="sha256-6B8xxgfU37G70eXAD4+t7Lna8BkLC3sbRc7zPqZZ0A0=" crossorigin=anonymous><link href=/scss/main.min.e81f31c607d4dfb1bbd1e5c00f8fadecb9daf0190b0b7b1b45cef33ea659d00d.css rel=stylesheet integrity="sha256-6B8xxgfU37G70eXAD4+t7Lna8BkLC3sbRc7zPqZZ0A0=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-F3FFTG72NE"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-F3FFTG72NE")}</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9457787069079604" crossorigin=anonymous></script></head><body class="td-section td-blog"><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=/zh-cn/><span class="navbar-brand__logo navbar-logo"></span><span class=navbar-brand__name>Nono Blogs</span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav><li class=nav-item><a class="nav-link active" href=/zh-cn/blog/><i class='fas fa-cube'></i><span>Blog</span></a></li><li class=nav-item><a class=nav-link href=/zh-cn/docs/><i class='fas fa-book'></i><span>Docs</span></a></li><li class=nav-item><a class=nav-link href=https://www.adguardprivate.com target=_blank rel=noopener><i class="fa-solid fa-fire"></i><span>创建私有Adguard</span><sup><i class="ps-1 fa-solid fa-up-right-from-square fa-xs" aria-hidden=true></i></sup></a></li><li class="nav-item dropdown d-none d-lg-block"><div class=dropdown><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false>简体中文</a><ul class=dropdown-menu><li><a class=dropdown-item href=/>English</a></li></ul></div></li><li class="td-light-dark-menu nav-item dropdown"><svg class="d-none"><symbol id="check2" viewBox="0 0 16 16"><path d="M13.854 3.646a.5.5.0 010 .708l-7 7a.5.5.0 01-.708.0l-3.5-3.5a.5.5.0 11.708-.708L6.5 10.293l6.646-6.647a.5.5.0 01.708.0z"/></symbol><symbol id="circle-half" viewBox="0 0 16 16"><path d="M8 15A7 7 0 108 1v14zm0 1A8 8 0 118 0a8 8 0 010 16z"/></symbol><symbol id="moon-stars-fill" viewBox="0 0 16 16"><path d="M6 .278a.768.768.0 01.08.858 7.208 7.208.0 00-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527.0 1.04-.055 1.533-.16a.787.787.0 01.81.316.733.733.0 01-.031.893A8.349 8.349.0 018.344 16C3.734 16 0 12.286.0 7.71.0 4.266 2.114 1.312 5.124.06A.752.752.0 016 .278z"/><path d="M10.794 3.148a.217.217.0 01.412.0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217.0 010 .412l-1.162.387A1.734 1.734.0 0011.593 7.69l-.387 1.162a.217.217.0 01-.412.0l-.387-1.162A1.734 1.734.0 009.31 6.593l-1.162-.387a.217.217.0 010-.412l1.162-.387a1.734 1.734.0 001.097-1.097l.387-1.162zM13.863.099a.145.145.0 01.274.0l.258.774c.115.346.386.617.732.732l.774.258a.145.145.0 010 .274l-.774.258a1.156 1.156.0 00-.732.732l-.258.774a.145.145.0 01-.274.0l-.258-.774a1.156 1.156.0 00-.732-.732l-.774-.258a.145.145.0 010-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/></symbol><symbol id="sun-fill" viewBox="0 0 16 16"><path d="M8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0zm0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13zm8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5zM3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8zm10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0zm-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0zm9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707zM4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708z"/></symbol></svg>
<button class="btn btn-link nav-link dropdown-toggle d-flex align-items-center" id=bd-theme type=button aria-expanded=false data-bs-toggle=dropdown data-bs-display=static aria-label="Toggle theme (auto)"><svg class="bi my-1 theme-icon-active"><use href="#circle-half"/></svg></button><ul class="dropdown-menu dropdown-menu-end" aria-labelledby=bd-theme-text><li><button type=button class="dropdown-item d-flex align-items-center" data-bs-theme-value=light aria-pressed=false>
<svg class="bi me-2 opacity-50"><use href="#sun-fill"/></svg>
Light<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li><li><button type=button class="dropdown-item d-flex align-items-center" data-bs-theme-value=dark aria-pressed=false>
<svg class="bi me-2 opacity-50"><use href="#moon-stars-fill"/></svg>
Dark<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li><li><button type=button class="dropdown-item d-flex align-items-center active" data-bs-theme-value=auto aria-pressed=true>
<svg class="bi me-2 opacity-50"><use href="#circle-half"/></svg>
Auto<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li></ul></li></ul></div><div class="d-none d-lg-block"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder=搜索此站点… aria-label=搜索此站点… autocomplete=off data-offline-search-index-json-src=/offline-search-index.57516a2d4308220d4c0373d4019daf35.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"></div><main class="col-12 col-md-9 col-xl-8 ps-md-5 pe-md-4" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>这是本章节的多页可打印视图。
<a href=# onclick="return print(),!1">点击此处打印</a>.</p><p><a href=/zh-cn/blog/%E5%B7%A5%E5%85%B7/>返回页面常规视图</a>.</p></div><h1 class=title>工具</h1><ul><li><a href=#pg-2e54fb71f532889705c52acefa245522>思维工具</a></li><li><a href=#pg-021b9ccb18d4df1fb5092e6ce9640245>工具</a></li><ul><li><a href=#pg-34cdc41200593c5e6ec8a41ba15e3aca>为AdguardHome增加分流能力</a></li><li><a href=#pg-2d36edd863c2df755150ddff829749c4>广告拦截新选择--AdGuardPrivate</a></li><li><a href=#pg-83c4508add9e3653a26646e35b2055cc>使用 curl 获取 DNS 结果</a></li><li><a href=#pg-c27ed1175fd0e280e8afc349255f94ba>如何使用必应国际版</a></li></ul><li><a href=#pg-4cd6a10e21675523168830d47f64e54b>微信读书体验分享</a></li><ul><li><a href=#pg-f95bd6f91140012a6a60bbc48e45342d>微信读书自动打卡刷时长</a></li></ul><li><a href=#pg-e6e054e8e2f3990091a8b4a8213d3e0c>关闭独显以省电</a></li><li><a href=#pg-08ea908b2ff7344d90a1bf1548cd3f62>docker</a></li><ul><li><a href=#pg-c38cd28aba24ac15282cf3e31ed892e4>docker介绍</a></li></ul><li><a href=#pg-6c1874984d9baf6e4d151ae8d2d66c8e>adguard</a></li><ul><li><a href=#pg-59e4cc5a694f247cd0d535c6af2c1745>利用DNS服务平滑切换网络服务</a></li></ul><li><a href=#pg-ca44a89b3e1f9290fd004f002cfb8027>letsencrypt的证书申请限制</a></li><li><a href=#pg-cd243ff5456a6d9d85c89b2ebbd970d5>测试工具</a></li><ul><li><a href=#pg-42145e1849133da1bffe65d5ed26f5f5>简易server-client代码</a></li></ul><li><a href=#pg-66ec6e435a0d6143639b3a41c8ca7bd9>AI</a></li><ul><li><a href=#pg-1b553b2d54a487ae94ad5c91fd63006c>trae使用的简单分享</a></li><li><a href=#pg-1ee793d3e79b84d8f033d7f8af3a5ae7>cursor自动化调试</a></li><li><a href=#pg-e945e5634476a6b96379a29cf2c31253>角色设计</a></li><ul></ul><li><a href=#pg-acbdb4ea5051f8e776fe81df81fd6dae>来自cline的提示词指南</a></li><li><a href=#pg-252aa5b5694af19740a738128bf07d27>Copilot系列</a></li><ul><li><a href=#pg-7c7b60150431279e2a32379e5f1768b9>Github Copilot付费模型对比</a></li><li><a href=#pg-3f339cec1cffc9714568737e3cdf30f5>Github Copilot Agent模式使用经验分享</a></li><li><a href=#pg-6db967f3a612d497f5c49bf8e49f3481>Copilot使用入门</a></li><li><a href=#pg-182cd9a0d38de14cb85a6e5d3ce0a687>Copilot使用入门</a></li></ul></ul></ul><div class=content></div></div><div class=td-content><h1 id=pg-2e54fb71f532889705c52acefa245522>思维工具</h1><div class="td-byline mb-4"><time datetime=2025-03-27 class=text-body-secondary>Thursday, March 27, 2025</time></div><h2 id=一基础逻辑思维方法><strong>一、基础逻辑思维方法</strong></h2><ol><li><p><strong>归纳与演绎</strong></p><ul><li><strong>归纳</strong>：从个别案例总结普遍规律（如从“黑马、白马”归纳出“马”的概念）。</li><li><strong>演绎</strong>：从普遍规律推导具体结论（如根据“马”的定义推导出“黑马”“白马”）。</li><li><strong>应用场景</strong>：科学研究、数据分析、制定规则。</li></ul></li><li><p><strong>分析与综合</strong></p><ul><li><strong>分析</strong>：将整体拆解为部分研究（如分解光的波粒二象性）。</li><li><strong>综合</strong>：将部分整合为整体理解（如结合光的波动性和粒子性提出新理论）。</li><li><strong>应用场景</strong>：复杂问题拆解、系统设计。</li></ul></li><li><p><strong>因果推理</strong></p><ul><li><strong>正推</strong>：从原因推断结果（如“下雨导致地面湿”）。</li><li><strong>逆推</strong>：从结果反推原因（如“地面湿”推断“可能下雨”）。</li><li><strong>应用场景</strong>：故障排查、逻辑推理。</li></ul></li></ol><hr><h2 id=二结构化思维工具><strong>二、结构化思维工具</strong></h2><ol><li><p><strong>黄金圈法则（Why-How-What）</strong></p><ul><li><strong>Why</strong>：核心目标（为什么做）。</li><li><strong>How</strong>：实现路径（如何做）。</li><li><strong>What</strong>：具体行动（做什么）。</li><li><strong>应用场景</strong>：战略规划、演讲表达（如苹果公司“我们坚信创新驱动世界”）。</li></ul></li><li><p><strong>SCQA 模型</strong></p><ul><li><strong>S（Situation）</strong>：背景情景。</li><li><strong>C（Complication）</strong>：冲突或问题。</li><li><strong>Q（Question）</strong>：提出核心问题。</li><li><strong>A（Answer）</strong>：解决方案。</li><li><strong>应用场景</strong>：演讲、报告、提案的结构化表达。</li></ul></li><li><p><strong>金字塔原理</strong></p><ul><li><strong>结构</strong>：中心论点 → 分论点 → 支持细节。</li><li><strong>应用场景</strong>：写作、汇报、逻辑表达（如“数字化转型是趋势”→ 市场、客户、竞争三方面论证）。</li></ul></li><li><p><strong>5W1H 分析法</strong></p><ul><li><strong>What</strong>：做什么？</li><li><strong>Why</strong>：为什么做？</li><li><strong>Who</strong>：谁来做？</li><li><strong>Where</strong>：在哪里做？</li><li><strong>When</strong>：何时做？</li><li><strong>How</strong>：如何做？</li><li><strong>应用场景</strong>：项目计划、任务分解（如自媒体运营的详细规划）。</li></ul></li></ol><hr><h2 id=三决策与问题解决工具><strong>三、决策与问题解决工具</strong></h2><ol><li><p><strong>SWOT 分析</strong></p><ul><li><strong>优势（Strengths）</strong>：内部强项。</li><li><strong>劣势（Weaknesses）</strong>：内部弱点。</li><li><strong>机会（Opportunities）</strong>：外部机会。</li><li><strong>威胁（Threats）</strong>：外部风险。</li><li><strong>应用场景</strong>：商业战略、个人职业规划。</li></ul></li><li><p><strong>10/10/10 法则</strong></p><ul><li><strong>提问</strong>：从三个时间维度（10 分钟、10 个月、10 年后）评估决策的影响。</li><li><strong>应用场景</strong>：短期与长期决策平衡（如是否换工作、投资）。</li></ul></li><li><p><strong>鱼骨图（因果图）</strong></p><ul><li><strong>结构</strong>：将问题（鱼头）与可能原因（鱼骨分支）可视化。</li><li><strong>应用场景</strong>：根因分析（如产品质量问题、工作低效原因）。</li></ul></li><li><p><strong>PDCA 循环（戴明环）</strong></p><ul><li><strong>Plan</strong>：计划。</li><li><strong>Do</strong>：执行。</li><li><strong>Check</strong>：检查结果。</li><li><strong>Act</strong>：改进并固化。</li><li><strong>应用场景</strong>：流程优化、持续改进（如自媒体内容迭代）。</li></ul></li></ol><hr><h2 id=四学习与沟通工具><strong>四、学习与沟通工具</strong></h2><ol><li><p><strong>费曼学习法</strong></p><ul><li><strong>步骤</strong>：<ol><li>选择知识点；</li><li>假设教学；</li><li>纠错与简化；</li><li>用通俗语言复述。</li></ol></li><li><strong>应用场景</strong>：知识内化、教学准备。</li></ul></li><li><p><strong>思维导图</strong></p><ul><li><strong>特点</strong>：以中心主题发散分支，可视化关联。</li><li><strong>应用场景</strong>：笔记整理、创意发散（如策划活动）。</li></ul></li><li><p><strong>SCAMPER 法则（创新思维）</strong></p><ul><li><strong>S（Substitute）</strong>：替代。</li><li><strong>C（Combine）</strong>：结合。</li><li><strong>A（Adapt）</strong>：改造。</li><li><strong>M（Modify/Magnify）</strong>：调整/放大。</li><li><strong>P（Purpose）</strong>：改变用途。</li><li><strong>E（Eliminate）</strong>：消除。</li><li><strong>R（Rearrange/Reverse）</strong>：重组/反转。</li><li><strong>应用场景</strong>：产品创新、方案优化。</li></ul></li><li><p><strong>六顶思考帽</strong></p><ul><li><strong>角色分工</strong>：<ul><li>白帽（数据）、红帽（情感）、黑帽（风险）、黄帽（价值）、绿帽（创新）、蓝帽（控制）。</li></ul></li><li><strong>应用场景</strong>：团队头脑风暴、多角度决策。</li></ul></li></ol><hr><h2 id=五系统与创新思维><strong>五、系统与创新思维</strong></h2><ol><li><p><strong>乔哈里视窗</strong></p><ul><li><strong>四区域模型</strong>：<ul><li>开放区（已知于己和他人）。</li><li>隐秘区（己知但他人未知）。</li><li>盲目区（未知于己但他人知）。</li><li>未知区（所有人未知）。</li></ul></li><li><strong>应用场景</strong>：团队沟通、自我认知提升。</li></ul></li><li><p><strong>上游思维（根本原因分析）</strong></p><ul><li><strong>核心</strong>：不解决表象问题，而追溯问题根源。</li><li><strong>应用场景</strong>：长期问题解决（如杜威通过清理蚊虫滋生地解决蚊患）。</li></ul></li><li><p><strong>二八法则（帕累托原则）</strong></p><ul><li><strong>原理</strong>：20%的原因导致 80%的结果。</li><li><strong>应用场景</strong>：资源分配（如聚焦 20%的关键客户）。</li></ul></li></ol><hr><h2 id=六高效行动工具><strong>六、高效行动工具</strong></h2><ol><li><p><strong>复盘法</strong></p><ul><li><strong>步骤</strong>：回顾行动、分析得失、提炼经验。</li></ul></li><li><p><strong>最小可行性产品（Minimum Viable Product, MVP）</strong></p></li></ol><ul><li><strong>核心</strong>：快速推出基础版本，验证需求后迭代。</li><li><strong>应用场景</strong>：产品开发、创业验证。</li></ul><ol start=3><li><strong>5Why 分析法</strong><ul><li><strong>方法</strong>：连续追问“为什么”直至找到根本原因。</li><li><strong>应用场景</strong>：故障排查、习惯养成（如分析加班原因）。</li></ul></li></ol><hr><h2 id=七其他实用工具><strong>七、其他实用工具</strong></h2><ul><li><strong>九宫格思维法</strong>：中心问题发散至 9 个方向，避免过度发散。</li><li><strong>思维导图+曼陀罗矩阵</strong>：结合视觉化与结构化思考。</li><li><strong>黄金时间圈</strong>：区分“重要-紧急”四象限，管理时间优先级。</li></ul><hr><h2 id=总结><strong>总结</strong></h2><p>这些工具可根据具体场景灵活组合使用：</p><ul><li><strong>学习</strong>：费曼法、思维导图、刻意练习。</li><li><strong>决策</strong>：黄金圈、SWOT、10/10/10 法则。</li><li><strong>沟通</strong>：SCQA、六顶思考帽、乔哈里视窗。</li><li><strong>创新</strong>：SCAMPER、上游思维、5W1H。</li></ul><p>通过结合多种工具，可以提升思维效率，突破认知局限，更高效地解决问题和实现目标。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-021b9ccb18d4df1fb5092e6ce9640245>工具</h1><div class="td-byline mb-4"><time datetime=2025-02-20 class=text-body-secondary>Thursday, February 20, 2025</time></div></div><div class=td-content><h1 id=pg-34cdc41200593c5e6ec8a41ba15e3aca>为AdguardHome增加分流能力</h1><div class="td-byline mb-4"><time datetime=2025-07-10 class=text-body-secondary>Thursday, July 10, 2025</time></div><p>开源地址: <a href=https://github.com/AdGuardPrivate/AdGuardPrivate>https://github.com/AdGuardPrivate/AdGuardPrivate</a></p><p>AdGuardHome 不带分流规则, 只能手写, 或则配置一个 upstream-file, 算是其痛点之一.</p><p>开发支持分流规则这个特性花了不少时间, 也测试了比较久, 总算稳定了.</p><p>有了分流规则, 就不再需要在 AdguardHome 前置 SmartDNS, 一个 AdguardPrivate 就齐活.</p><p>当然现在分流能力仅<strong>支持分 AB 两路</strong>, 即一部分走 A 上游群, 一部分走 B 上游群. 如果要做更灵活的分流支持, 开发难度会大一些, 实际的分流代码逻辑一部分在 adguardhome 中, 另外一部分在 dnsproxy 中. 两路不能满足需求的话, 可以 fork 了自己尝试做做.</p><p>有使用问题或建议可以提 issue, 目前主要针对特定地区的使用做一些改良.</p><p><img src=https://i.imgur.com/jhEZB52.png alt></p></div><div class=td-content style=page-break-before:always><h1 id=pg-2d36edd863c2df755150ddff829749c4>广告拦截新选择--AdGuardPrivate</h1><div class="td-byline mb-4"><time datetime=2025-02-20 class=text-body-secondary>Thursday, February 20, 2025</time></div><p><a href=https://www.adguardprivate.com>AdGuardPrivate</a> 是一款专注于网络隐私保护与广告拦截的 DNS 服务工具，基于开源项目 <a href=https://github.com/AdguardTeam/AdGuardHome>AdGuard Home</a> 二次开发，通过智能流量分析和过滤技术，为用户提供安全、高效的上网环境。以下是其主要功能与特点：</p><h2 id=核心功能广告拦截与隐私保护>核心功能：广告拦截与隐私保护</h2><ul><li>广告拦截：通过 DNS 层面拦截网页广告（如横幅、弹窗、视频广告等）及移动应用内广告，提升浏览速度和设备性能。</li><li>隐私防护：阻止跟踪器、社交网络插件和隐私窃取请求，防止用户行为数据被收集，同时拦截恶意网站、钓鱼链接和恶意软件。</li><li>DNS 防污染：通过加密 DNS（支持 DoT、DoH、HTTP/3）防止流量劫持，确保域名解析的准确性和安全性。</li></ul><h2 id=进阶特性定制化与优化>进阶特性：定制化与优化</h2><ul><li>自定义规则：支持用户添加第三方黑白名单或自定义过滤规则，灵活控制特定应用、网站或游戏的访问权限。</li><li>智能解析：可配置局域网设备的友好域名解析（如 NAS 或企业服务器），简化网络管理。</li><li>统计分析：提供详细的请求日志、拦截统计和 72 小时查询记录，帮助用户监控网络使用情况。</li></ul><h2 id=家庭与企业场景支持>家庭与企业场景支持</h2><ul><li>家长控制：可屏蔽成人网站和游戏，管理家庭成员的上网时间，保护未成年人。</li><li>企业级部署：支持分布式服务器负载均衡，优化大陆地区的访问体验，并通过阿里云节点提供稳定服务。</li></ul><h2 id=平台兼容性与服务模式>平台兼容性与服务模式</h2><ul><li>跨平台支持：兼容多种操作系统，无需额外软件，仅需配置加密 DNS 即可使用。</li><li>服务模式：</li><li>免费公共服务：提供基础广告拦截与安全规则，但可能存在误拦截问题。</li><li>付费私有服务：增强功能包括自定义解析、权威解析、设备分 ID 记录上网行为等，适合个性化需求。</li></ul><h2 id=技术优势与局限性>技术优势与局限性</h2><ul><li>优势：全设备覆盖、零额外功耗，降低无效数据加载，适合移动设备续航优化。</li><li>局限性：拦截精度低于浏览器插件，无法实现 HTTPS 内容的深度过滤（如 MITM 方案）。</li><li>应用场景示例<ul><li>个人用户：通过 AdGuardPrivate 阻止移动应用内广告，提升应用体验。</li><li>家庭用户：通过路由器部署 AdGuardPrivate，拦截全家设备的广告，并限制儿童访问不当内容。</li><li>企业网络：结合自定义规则屏蔽娱乐类网站，提升员工工作效率，同时保护内部数据安全。</li></ul></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-83c4508add9e3653a26646e35b2055cc>使用 curl 获取 DNS 结果</h1><div class=lead>介绍如何使用 curl 命令获取 DNS 查询结果的两种格式。</div><div class="td-byline mb-4"><time datetime=2025-02-20 class=text-body-secondary>Thursday, February 20, 2025</time></div><p>本文介绍两种利用 curl 获取 DNS 查询结果的方法：</p><ol><li>DNS JSON 格式</li><li>DNS Wire Format 格式</li></ol><h2 id=1-dns-json-格式查询>1. DNS JSON 格式查询</h2><p>返回 JSON 格式的 DNS 响应，便于解析。</p><h3 id=google>Google</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -H <span class=s1>&#39;accept: application/dns-json&#39;</span> <span class=s2>&#34;https://dns.google/resolve?name=baidu.com&amp;type=A&#34;</span> <span class=p>|</span> jq .
</span></span></code></pre></div><h3 id=cloudflare>Cloudflare</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -H <span class=s1>&#39;accept: application/dns-json&#39;</span> <span class=s1>&#39;https://cloudflare-dns.com/dns-query?name=baidu.com&amp;type=A&#39;</span> <span class=p>|</span> jq .
</span></span></code></pre></div><h3 id=aliyun>Aliyun</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -H <span class=s2>&#34;accept: application/dns-json&#34;</span> <span class=s2>&#34;https://223.5.5.5/resolve?name=baidu.com&amp;type=1&#34;</span> <span class=p>|</span> jq .
</span></span></code></pre></div><h3 id=dnspub>dns.pub</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -H <span class=s1>&#39;accept: application/dns-json&#39;</span> <span class=s1>&#39;https://doh.dns.pub/dns-query?name=baidu.com&amp;type=A&#39;</span> <span class=p>|</span> jq .
</span></span></code></pre></div><h3 id=adguard-private-dns>AdGuard Private DNS</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 暂不受支持</span>
</span></span></code></pre></div><h2 id=2-dns-wire-format-格式查询>2. DNS Wire Format 格式查询</h2><p>返回二进制格式的 DNS 响应，需要进一步解析。</p><h3 id=google-1>Google</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -H <span class=s1>&#39;accept: application/dns-message&#39;</span> <span class=s1>&#39;https://dns.google/dns-query?dns=q80BAAABAAAAAAAAA3d3dwdleGFtcGxlA2NvbQAAAQAB&#39;</span>  <span class=p>|</span> hexdump -c
</span></span></code></pre></div><h3 id=cloudflare-1>Cloudflare</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -H <span class=s1>&#39;accept: application/dns-message&#39;</span> <span class=s1>&#39;https://cloudflare-dns.com/dns-query?dns=q80BAAABAAAAAAAAA3d3dwdleGFtcGxlA2NvbQAAAQAB&#39;</span>  <span class=p>|</span> hexdump -c
</span></span></code></pre></div><h3 id=aliyun-1>Aliyun</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -H <span class=s1>&#39;accept: application/dns-message&#39;</span> <span class=s2>&#34;https://dns.alidns.com/dns-query?dns=P8QBAAABAAAAAAAABWJhaWR1A2NvbQAAAQAB&#34;</span>  <span class=p>|</span> hexdump -c
</span></span></code></pre></div><h3 id=dnspub-1>dns.pub</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -H <span class=s1>&#39;accept: application/dns-message&#39;</span> <span class=s1>&#39;https://doh.dns.pub/dns-query?dns=q80BAAABAAAAAAAAA3d3dwdleGFtcGxlA2NvbQAAAQAB&#39;</span>  <span class=p>|</span> hexdump -c
</span></span></code></pre></div><h3 id=adguard-private-dns-1>AdGuard Private DNS</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>curl -H <span class=s1>&#39;accept: application/dns-message&#39;</span> <span class=s1>&#39;https://public0.adguardprivate.com/dns-query?dns=q80BAAABAAAAAAAAA3d3dwdleGFtcGxlA2NvbQAAAQAB&#39;</span>  <span class=p>|</span> hexdump -c
</span></span></code></pre></div><h2 id=使用-python-解析-dns-响应>使用 Python 解析 DNS 响应</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># pip install dnspython</span>
</span></span><span class=line><span class=cl><span class=c1># pip install requests</span>
</span></span><span class=line><span class=cl><span class=c1># 解析 JSON 格式响应</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>json</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>query_dns_json</span><span class=p>(</span><span class=n>domain</span><span class=o>=</span><span class=s2>&#34;example.com&#34;</span><span class=p>,</span> <span class=nb>type</span><span class=o>=</span><span class=s2>&#34;A&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;&#34;&#34;使用 JSON 格式查询 DNS&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>  <span class=n>url</span> <span class=o>=</span> <span class=s2>&#34;https://dns.google/resolve&#34;</span>
</span></span><span class=line><span class=cl>  <span class=n>params</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&#34;name&#34;</span><span class=p>:</span> <span class=n>domain</span><span class=p>,</span> <span class=s2>&#34;type&#34;</span><span class=p>:</span> <span class=nb>type</span><span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=n>headers</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&#34;accept&#34;</span><span class=p>:</span> <span class=s2>&#34;application/dns-json&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=p>,</span> <span class=n>params</span><span class=o>=</span><span class=n>params</span><span class=p>,</span> <span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>json</span><span class=p>(),</span> <span class=n>indent</span><span class=o>=</span><span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 解析 Wire Format 响应</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>query_dns_wire</span><span class=p>(</span><span class=n>domain</span><span class=o>=</span><span class=s2>&#34;example.com&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;&#34;&#34;使用 Wire Format 格式查询 DNS&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>  <span class=kn>import</span> <span class=nn>dns.message</span>
</span></span><span class=line><span class=cl>  <span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl>  <span class=kn>import</span> <span class=nn>base64</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1># 创建DNS查询消息</span>
</span></span><span class=line><span class=cl>  <span class=n>query</span> <span class=o>=</span> <span class=n>dns</span><span class=o>.</span><span class=n>message</span><span class=o>.</span><span class=n>make_query</span><span class=p>(</span><span class=n>domain</span><span class=p>,</span> <span class=s1>&#39;A&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=n>wire_format</span> <span class=o>=</span> <span class=n>query</span><span class=o>.</span><span class=n>to_wire</span><span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=n>dns_query</span> <span class=o>=</span> <span class=n>base64</span><span class=o>.</span><span class=n>b64encode</span><span class=p>(</span><span class=n>wire_format</span><span class=p>)</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1># 发送请求</span>
</span></span><span class=line><span class=cl>  <span class=n>url</span> <span class=o>=</span> <span class=s2>&#34;https://dns.google/dns-query&#34;</span>
</span></span><span class=line><span class=cl>  <span class=n>params</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&#34;dns&#34;</span><span class=p>:</span> <span class=n>dns_query</span><span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=n>headers</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&#34;accept&#34;</span><span class=p>:</span> <span class=s2>&#34;application/dns-message&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>response</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>url</span><span class=p>,</span> <span class=n>params</span><span class=o>=</span><span class=n>params</span><span class=p>,</span> <span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=n>dns_response</span> <span class=o>=</span> <span class=n>dns</span><span class=o>.</span><span class=n>message</span><span class=o>.</span><span class=n>from_wire</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>content</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nb>str</span><span class=p>(</span><span class=n>dns_response</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>  <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;JSON格式查询结果:&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=nb>print</span><span class=p>(</span><span class=n>query_dns_json</span><span class=p>())</span>
</span></span><span class=line><span class=cl>  <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>Wire Format查询结果:&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=nb>print</span><span class=p>(</span><span class=n>query_dns_wire</span><span class=p>())</span>
</span></span></code></pre></div><h2 id=生成-dns-wire-format-base64-编码的数据>生成 DNS Wire Format Base64 编码的数据</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># pip install dnspython</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>base64</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>dns.message</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>dns.rdatatype</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 创建一个DNS查询消息</span>
</span></span><span class=line><span class=cl><span class=n>query</span> <span class=o>=</span> <span class=n>dns</span><span class=o>.</span><span class=n>message</span><span class=o>.</span><span class=n>make_query</span><span class=p>(</span><span class=s1>&#39;example.com&#39;</span><span class=p>,</span> <span class=n>dns</span><span class=o>.</span><span class=n>rdatatype</span><span class=o>.</span><span class=n>A</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 将消息转换为Wire Format</span>
</span></span><span class=line><span class=cl><span class=n>wire_format</span> <span class=o>=</span> <span class=n>query</span><span class=o>.</span><span class=n>to_wire</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 转为base64</span>
</span></span><span class=line><span class=cl><span class=n>wire_format_base64</span> <span class=o>=</span> <span class=n>base64</span><span class=o>.</span><span class=n>b64encode</span><span class=p>(</span><span class=n>wire_format</span><span class=p>)</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=s1>&#39;utf-8&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 打印</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>wire_format_base64</span><span class=p>)</span>
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-c27ed1175fd0e280e8afc349255f94ba>如何使用必应国际版</h1><div class="td-byline mb-4"><time datetime=2025-02-20 class=text-body-secondary>Thursday, February 20, 2025</time></div><p>有些搜索引擎不思进取，能搜到的有价值的内容越来越少，广告却越来越多。相信不少人都已逐渐放弃这类搜索引擎，转而使用必应（bing.com)。</p><p>但必应有多个版本：</p><ul><li><a href=https://cn.bing.com>cn.bing.com</a> 是中国版，搜索结果经过审查。<ul><li>国内版：主要搜索中文内容。
<img src=https://img1.techfetch.dev/blog/202502201527190.png alt></li><li>国际版：同时支持搜索中文和英文内容。
<img src=https://img1.techfetch.dev/blog/202502201530275.png alt></li></ul></li><li><a href=https://www.bing.com>www.bing.com</a> 这是真正的国际版，搜索结果没有中国大陆的审查，可以搜索到更多“你懂的”内容。
<img src=https://img1.techfetch.dev/blog/202502201535693.png alt></li></ul><p>这三个版本的搜索结果会有所区别。对于具备英文阅读能力的用户，强烈推荐使用国际版，能获取到更有价值的资料。</p><p>我就不详细展开真国际版搜索内容的差异了，有兴趣的朋友可以自行尝试。</p><p>真国际版还提供 <code>Microsoft Copilot</code> 的入口，类似于 <code>ChatGPT</code> 的功能，可以帮你总结搜索结果。虽然有使用频次限制，但正常使用是足够的。</p><p>国内版和国际版的切换没有难度，这里主要介绍如何使用必应真正的国际版。</p><p>相信不少人在设置里折腾了很久，但还是无法使用国际版，这可能是方向错了。</p><p><img src=https://img1.techfetch.dev/blog/202502201533833.png alt></p><p>真正的限制在于 DNS。DNS 可以根据请求者的所在地域，给出不同的解析结果。例如，山东和河南请求 <code>qq.com</code> 的 IP 地址可能不一样。通常，DNS 会返回在地理位置上更靠近的服务器 IP。</p><p>因此，如果你想使用国际版，可以尝试将 DNS 更换为 Google 的 <code>tls://dns.google</code> 或者 Cloudflare 的 <code>tls://one.one.one.one</code>。</p><p>这里只提供了两个 DNS 服务商的加密 DNS 地址，没有提供纯 IP 的 DNS，因为纯 IP 的海外 DNS 很容易被劫持，分享 <code>8.8.8.8</code> 和 <code>1.1.1.1</code> 毫无意义。</p><p>DNS 的设置方法可以参考 <a href=https://www.adguardprivate.com/docs/startup/free/android/>如何配置 DNS 加密</a>。</p><p>注意，最简单的使用国际版必应的方法是使用加密 DNS，也有其他方法，本文不展开。</p><p>如果一个 DNS 不可用，可以依次尝试以下几个设置：</p><ul><li><code>tls://dns.google</code></li><li><code>tls://one.one.one.one</code></li><li><code>tls://8.8.8.8</code></li><li><code>tls://8.8.4.4</code></li><li><code>tls://1.1.1.1</code></li><li><code>tls://1.0.0.1</code></li></ul><p>通常会有两个能连接成功。如果全部无法连接，那只能寻找其他方法了。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-4cd6a10e21675523168830d47f64e54b>微信读书体验分享</h1><div class="td-byline mb-4"><time datetime=2024-12-24 class=text-body-secondary>Tuesday, December 24, 2024</time></div><p>免费读书方案有很多, 但是微信读书的确是体验做的较好的一个. 希望免费读书的可以看 zlibrary.</p><p>这里主要分享微信读书的使用体验, 以及一些辅助工具, 如有任何侵权, 请联系我删除: <code>weread-challenge@techfetch.dev</code></p></div><div class=td-content style=page-break-before:always><h1 id=pg-f95bd6f91140012a6a60bbc48e45342d>微信读书自动打卡刷时长</h1><div class=lead>微信读书挑战会员助手是一款帮助用户以更低成本获取微信读书会员的工具，通过自动化阅读和打卡功能，帮助用户完成微信读书的挑战任务，从而获得会员权益。该工具支持多平台、多浏览器，并提供丰富的配置选项和定时任务功能。</div><div class="td-byline mb-4"><time datetime=2024-12-05 class=text-body-secondary>Thursday, December 05, 2024</time></div><p>只为便宜一点买微信读书会员.</p><p>本文档可能已过时, 最新可以访问开源地址: <a href=https://github.com/jqknono/weread-challenge-selenium>https://github.com/jqknono/weread-challenge-selenium</a></p><p><img src=https://img1.techfetch.dev/blog/202412261741639.gif alt=只为便宜一点买微信读书会员></p><h2 id=微信读书规则>微信读书规则</h2><ul><li>离线阅读计入总时长, 但需要联网上报</li><li>网页版, 墨水屏, 小程序, 听书, 有声书收听<strong>都计入总时长</strong></li><li>对单次自动阅读或收听时长过长的行为, 平台将结合用户行为特征判断, <strong>过长部分不计入总时长</strong></li><li>当日阅读超过<strong>5 分钟</strong>才算作有效阅读天数</li><li>付费 5 元立即获得 2 天会员, 后续 30 日内打卡 29 天, 读书时长超过 30 小时, 可获得 30 天会员和 30 书币</li><li>付费 50 元立即获得 30 天会员, 后续 365 日内打卡 360 天, 读书时长超过 300 小时, 可获得 365 天会员和 500 书币</li></ul><p>根据实际操作, 还有如下未明确说明的特点:</p><ul><li>第 29 日打卡后立即获得读书会员奖励, 并可立即开始下一轮挑战会员打卡, 无需等待第 31 日开始下一轮挑战, 第 29 日的打卡既算上一轮的打卡, 也算下一轮的打卡.</li><li>除第一轮需 29 日外, 后续每 28 日即可获得 32 日会员, 1+28*13=365, 一年可完成 13 轮, 花费 65 元, 获得 32*13=416 天会员和 390 书币.</li><li>更划算的仍然是年卡挑战会员, 但周期更长, 风险更大.</li></ul><h2 id=工具特性>工具特性</h2><ul><li>使用有头浏览器</li><li>支持本地浏览器和远程浏览器</li><li>随机浏览器宽度和高度</li><li>支持等待登录</li><li>支持登录二维码刷新</li><li>支持保存 cookies</li><li>支持加载 cookies</li><li>支持选择最近阅读的第 X 本书开始阅读</li><li>默认随机选择一本书开始阅读</li><li>支持自动阅读</li><li>支持跳到下一章</li><li>支持读完跳回第一章继续阅读</li><li>支持选择阅读速度</li><li>随机单页阅读时间</li><li>随机翻页时间</li><li>每分钟截图当前界面</li><li>支持日志</li><li>支持定时任务</li><li>支持设置阅读时间</li><li>支持邮件通知</li><li>多平台支持: <code>linux | windows | macos</code></li></ul><ul><li>支持浏览器: <code>chrome | MicrosoftEdge | firefox</code></li><li>支持多用户</li><li>异常时强制刷新</li><li>使用统计</li></ul><h2 id=linux>Linux</h2><h3 id=直接运行>直接运行</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 安装nodejs</span>
</span></span><span class=line><span class=cl>sudo apt install nodejs
</span></span><span class=line><span class=cl><span class=c1># 老旧版本的 nodejs 需要安装 npm</span>
</span></span><span class=line><span class=cl>sudo apt install npm
</span></span><span class=line><span class=cl><span class=c1># 创建运行文件夹</span>
</span></span><span class=line><span class=cl>mkdir -p <span class=nv>$HOME</span>/Documents/weread-challenge
</span></span><span class=line><span class=cl><span class=nb>cd</span> <span class=nv>$HOME</span>/Documents/weread-challenge
</span></span><span class=line><span class=cl><span class=c1># 安装依赖</span>
</span></span><span class=line><span class=cl>npm install selenium-webdriver
</span></span><span class=line><span class=cl><span class=c1># 下载脚本</span>
</span></span><span class=line><span class=cl>wget https://storage1.techfetch.dev/weread-challenge/weread-challenge.js -O weread-challenge.js
</span></span><span class=line><span class=cl><span class=c1># 通过环境变量设置运行参数</span>
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>WEREAD_BROWSER</span><span class=o>=</span><span class=s2>&#34;chrome&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># 运行</span>
</span></span><span class=line><span class=cl><span class=nv>WEREAD_BROWSER</span><span class=o>=</span><span class=s2>&#34;chrome&#34;</span> node weread-challenge.js
</span></span></code></pre></div><p>如需邮件通知, 需安装 <em>nodemailer</em>:
<code>npm install nodemailer</code></p><h3 id=docker-compose-运行>Docker Compose 运行</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>services</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>app</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>jqknono/weread-challenge:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>pull_policy</span><span class=p>:</span><span class=w> </span><span class=l>always</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>WEREAD_REMOTE_BROWSER=http://selenium:4444</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>WEREAD_DURATION=68</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>./data:/app/data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>depends_on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>selenium</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>condition</span><span class=p>:</span><span class=w> </span><span class=l>service_healthy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selenium</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>selenium/standalone-chrome:4.26</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>pull_policy</span><span class=p>:</span><span class=w> </span><span class=l>if_not_present</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>shm_size</span><span class=p>:</span><span class=w> </span><span class=l>2gb</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>/var/run/docker.sock:/var/run/docker.sock</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>SE_ENABLE_TRACING=false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>SE_BIND_HOST=false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>SE_JAVA_DISABLE_HOSTNAME_VERIFICATION=false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>healthcheck</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>test</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=s2>&#34;CMD&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;curl&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;-f&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;http://localhost:4444/wd/hub/status&#34;</span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>interval</span><span class=p>:</span><span class=w> </span><span class=l>5s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>timeout</span><span class=p>:</span><span class=w> </span><span class=l>60s</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>retries</span><span class=p>:</span><span class=w> </span><span class=m>10</span><span class=w>
</span></span></span></code></pre></div><p>保存为 <code>docker-compose.yml</code>, 运行 <code>docker compose up -d</code>.<br>首次启动后, 需微信扫描二维码登录, 二维码保存在 <code>./data/login.png</code></p><h3 id=docker-运行>Docker 运行</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># run selenium standalone</span>
</span></span><span class=line><span class=cl>docker run --restart always -d --name selenium-live <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -v /var/run/docker.sock:/var/run/docker.sock <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --shm-size<span class=o>=</span><span class=s2>&#34;2g&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -p 4444:4444 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -p 7900:7900 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=nv>SE_ENABLE_TRACING</span><span class=o>=</span><span class=nb>false</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=nv>SE_BIND_HOST</span><span class=o>=</span><span class=nb>false</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=nv>SE_JAVA_DISABLE_HOSTNAME_VERIFICATION</span><span class=o>=</span><span class=nb>false</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=nv>SE_NODE_MAX_INSTANCES</span><span class=o>=</span><span class=m>10</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=nv>SE_NODE_MAX_SESSIONS</span><span class=o>=</span><span class=m>10</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=nv>SE_NODE_OVERRIDE_MAX_SESSIONS</span><span class=o>=</span><span class=nb>true</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  selenium/standalone-chrome:4.26
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># run weread-challenge</span>
</span></span><span class=line><span class=cl>docker run --rm --name user-read <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -v <span class=nv>$HOME</span>/weread-challenge/user/data:/app/data <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=nv>WEREAD_REMOTE_BROWSER</span><span class=o>=</span>http://172.17.0.2:4444 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=nv>WEREAD_DURATION</span><span class=o>=</span><span class=m>68</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  weread-challenge:latest
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># add another user</span>
</span></span><span class=line><span class=cl>docker run --rm --name user2-read <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -v <span class=nv>$HOME</span>/weread-challenge/user2/data:/app/data <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=nv>WEREAD_REMOTE_BROWSER</span><span class=o>=</span>http://172.17.0.2:4444 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=nv>WEREAD_DURATION</span><span class=o>=</span><span class=m>68</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  weread-challenge:latest
</span></span></code></pre></div><p>首次启动后, 需微信扫描二维码登录, 二维码保存在 <code>./data/login.png</code></p><h3 id=创建定时任务>创建定时任务</h3><h4 id=docker-compose-方式>docker-compose 方式</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>WORKDIR</span><span class=o>=</span><span class=nv>$HOME</span>/weread-challenge
</span></span><span class=line><span class=cl>mkdir -p <span class=nv>$WORKDIR</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> <span class=nv>$WORKDIR</span>
</span></span><span class=line><span class=cl>cat &gt; <span class=nv>$WORKDIR</span>/docker-compose.yml <span class=s>&lt;&lt;EOF
</span></span></span><span class=line><span class=cl><span class=s>services:
</span></span></span><span class=line><span class=cl><span class=s>  app:
</span></span></span><span class=line><span class=cl><span class=s>    image: jqknono/weread-challenge:latest
</span></span></span><span class=line><span class=cl><span class=s>    pull_policy: always
</span></span></span><span class=line><span class=cl><span class=s>    environment:
</span></span></span><span class=line><span class=cl><span class=s>      - WEREAD_REMOTE_BROWSER=http://selenium:4444
</span></span></span><span class=line><span class=cl><span class=s>      - WEREAD_DURATION=68
</span></span></span><span class=line><span class=cl><span class=s>    volumes:
</span></span></span><span class=line><span class=cl><span class=s>      - ./data:/app/data
</span></span></span><span class=line><span class=cl><span class=s>    depends_on:
</span></span></span><span class=line><span class=cl><span class=s>      selenium:
</span></span></span><span class=line><span class=cl><span class=s>        condition: service_healthy
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>  selenium:
</span></span></span><span class=line><span class=cl><span class=s>    image: selenium/standalone-chrome:4.26
</span></span></span><span class=line><span class=cl><span class=s>    pull_policy: if_not_present
</span></span></span><span class=line><span class=cl><span class=s>    shm_size: 2gb
</span></span></span><span class=line><span class=cl><span class=s>    volumes:
</span></span></span><span class=line><span class=cl><span class=s>      - /var/run/docker.sock:/var/run/docker.sock
</span></span></span><span class=line><span class=cl><span class=s>    environment:
</span></span></span><span class=line><span class=cl><span class=s>      - SE_ENABLE_TRACING=false
</span></span></span><span class=line><span class=cl><span class=s>      - SE_BIND_HOST=false
</span></span></span><span class=line><span class=cl><span class=s>      - SE_JAVA_DISABLE_HOSTNAME_VERIFICATION=false
</span></span></span><span class=line><span class=cl><span class=s>    healthcheck:
</span></span></span><span class=line><span class=cl><span class=s>      test: [&#34;CMD&#34;, &#34;curl&#34;, &#34;-f&#34;, &#34;http://localhost:4444/wd/hub/status&#34;]
</span></span></span><span class=line><span class=cl><span class=s>      interval: 5s
</span></span></span><span class=line><span class=cl><span class=s>      timeout: 60s
</span></span></span><span class=line><span class=cl><span class=s>      retries: 10
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=cl><span class=c1># 首次启动后, 需微信扫描二维码登录, 二维码保存在 $HOME/weread-challenge/data/login.png</span>
</span></span><span class=line><span class=cl><span class=c1># 每天早上 7 点启动, 阅读68分钟</span>
</span></span><span class=line><span class=cl><span class=o>(</span>crontab -l 2&gt;/dev/null<span class=p>;</span> <span class=nb>echo</span> <span class=s2>&#34;00 07 * * *  cd </span><span class=nv>$WORKDIR</span><span class=s2> &amp;&amp; docker compose up -d&#34;</span><span class=o>)</span> <span class=p>|</span> crontab -
</span></span></code></pre></div><h4 id=docker-方式>docker 方式</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 启动浏览器</span>
</span></span><span class=line><span class=cl>docker run --restart always -d --name selenium-live <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -v /var/run/docker.sock:/var/run/docker.sock <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --shm-size<span class=o>=</span><span class=s2>&#34;2g&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -p 4444:4444 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -p 7900:7900 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=nv>SE_ENABLE_TRACING</span><span class=o>=</span><span class=nb>false</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=nv>SE_BIND_HOST</span><span class=o>=</span><span class=nb>false</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=nv>SE_JAVA_DISABLE_HOSTNAME_VERIFICATION</span><span class=o>=</span><span class=nb>false</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=nv>SE_NODE_MAX_INSTANCES</span><span class=o>=</span><span class=m>3</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=nv>SE_NODE_MAX_SESSIONS</span><span class=o>=</span><span class=m>3</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=nv>SE_NODE_OVERRIDE_MAX_SESSIONS</span><span class=o>=</span><span class=nb>true</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=nv>SE_SESSION_REQUEST_TIMEOUT</span><span class=o>=</span><span class=m>10</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=nv>SE_SESSION_RETRY_INTERVAL</span><span class=o>=</span><span class=m>3</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  selenium/standalone-chrome:4.26
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>WEREAD_USER</span><span class=o>=</span><span class=s2>&#34;user&#34;</span>
</span></span><span class=line><span class=cl>mkdir -p <span class=nv>$HOME</span>/weread-challenge/<span class=nv>$WEREAD_USER</span>/data
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Get container IP</span>
</span></span><span class=line><span class=cl><span class=nv>Selenium_IP</span><span class=o>=</span><span class=k>$(</span>docker inspect -f <span class=s1>&#39;{{range.NetworkSettings.Networks}}{{.IPAddress}}{{end}}&#39;</span> selenium-live<span class=k>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 首次启动后, 需微信扫描二维码登录, 二维码保存在 $HOME/weread-challenge/$WEREAD_USER/data/login.png</span>
</span></span><span class=line><span class=cl><span class=c1># 每天早上 7 点启动, 阅读68分钟</span>
</span></span><span class=line><span class=cl><span class=o>(</span>crontab -l 2&gt;/dev/null<span class=p>;</span> <span class=nb>echo</span> <span class=s2>&#34;00 07 * * * docker run --rm --name </span><span class=si>${</span><span class=nv>WEREAD_USER</span><span class=si>}</span><span class=s2>-read -v </span><span class=nv>$HOME</span><span class=s2>/weread-challenge/</span><span class=si>${</span><span class=nv>WEREAD_USER</span><span class=si>}</span><span class=s2>/data:/app/data -e WEREAD_REMOTE_BROWSER=http://</span><span class=si>${</span><span class=nv>Selenium_IP</span><span class=si>}</span><span class=s2>:4444 -e WEREAD_DURATION=68 -e WEREAD_USER=</span><span class=si>${</span><span class=nv>WEREAD_USER</span><span class=si>}</span><span class=s2> jqknono/weread-challenge:latest&#34;</span><span class=o>)</span> <span class=p>|</span> crontab -
</span></span></code></pre></div><h2 id=windows>Windows</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-ps1 data-lang=ps1><span class=line><span class=cl><span class=c># 安装nodejs</span>
</span></span><span class=line><span class=cl><span class=n>winget</span> <span class=n>install</span> <span class=n>-e</span> <span class=p>-</span><span class=n>-id</span> <span class=n>Node</span><span class=p>.</span><span class=py>js</span><span class=p>.</span><span class=py>Node</span><span class=p>.</span><span class=py>js</span>
</span></span><span class=line><span class=cl><span class=c># 创建运行文件夹</span>
</span></span><span class=line><span class=cl><span class=n>mkdir</span> <span class=n>-p</span> <span class=nv>$HOME</span><span class=p>/</span><span class=n>Documents</span><span class=p>/</span><span class=nb>weread-challenge</span>
</span></span><span class=line><span class=cl><span class=nb>cd </span><span class=nv>$HOME</span><span class=p>/</span><span class=n>Documents</span><span class=p>/</span><span class=nb>weread-challenge</span>
</span></span><span class=line><span class=cl><span class=c># 安装依赖</span>
</span></span><span class=line><span class=cl><span class=n>npm</span> <span class=n>install</span> <span class=nb>selenium-webdriver</span>
</span></span><span class=line><span class=cl><span class=c># 下载脚本powershell</span>
</span></span><span class=line><span class=cl><span class=nb>Invoke-WebRequest</span> <span class=n>-Uri</span> <span class=n>https</span><span class=err>:</span><span class=p>//</span><span class=n>storage1</span><span class=p>.</span><span class=py>techfetch</span><span class=p>.</span><span class=n>dev</span><span class=p>/</span><span class=nb>weread-challenge</span><span class=p>/</span><span class=nb>weread-challenge</span><span class=p>.</span><span class=py>js</span> <span class=n>-OutFile</span> <span class=nb>weread-challenge</span><span class=p>.</span><span class=py>js</span>
</span></span><span class=line><span class=cl><span class=c># 通过环境变量设置运行参数</span>
</span></span><span class=line><span class=cl><span class=nv>$env:WEREAD_BROWSER</span><span class=p>=</span><span class=s2>&#34;MicrosoftEdge&#34;</span>
</span></span><span class=line><span class=cl><span class=c># 运行</span>
</span></span><span class=line><span class=cl><span class=n>node</span> <span class=nb>weread-challenge</span><span class=p>.</span><span class=py>js</span>
</span></span></code></pre></div><p>Docker 运行同 Linux.</p><h2 id=macos>MacOS</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-zsh data-lang=zsh><span class=line><span class=cl><span class=c1># 安装nodejs</span>
</span></span><span class=line><span class=cl>brew install node
</span></span><span class=line><span class=cl><span class=c1># 创建运行文件夹</span>
</span></span><span class=line><span class=cl>mkdir -p <span class=nv>$HOME</span>/Documents/weread-challenge
</span></span><span class=line><span class=cl><span class=nb>cd</span> <span class=nv>$HOME</span>/Documents/weread-challenge
</span></span><span class=line><span class=cl><span class=c1># 安装依赖</span>
</span></span><span class=line><span class=cl>npm install selenium-webdriver
</span></span><span class=line><span class=cl><span class=c1># 下载脚本</span>
</span></span><span class=line><span class=cl>wget https://storage1.techfetch.dev/weread-challenge/weread-challenge.js -O weread-challenge.js
</span></span><span class=line><span class=cl><span class=c1># 通过环境变量设置运行参数</span>
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>WEREAD_BROWSER</span><span class=o>=</span><span class=s2>&#34;chrome&#34;</span>
</span></span><span class=line><span class=cl><span class=c1># 运行</span>
</span></span><span class=line><span class=cl>node weread-challenge.js
</span></span></code></pre></div><p>Docker 运行同 Linux.</p><h2 id=多用户支持>多用户支持</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 启动浏览器</span>
</span></span><span class=line><span class=cl>docker run --restart always -d --name selenium-live <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -v /var/run/docker.sock:/var/run/docker.sock <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --shm-size<span class=o>=</span><span class=s2>&#34;2g&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -p 4444:4444 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -p 7900:7900 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=nv>SE_ENABLE_TRACING</span><span class=o>=</span><span class=nb>false</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=nv>SE_BIND_HOST</span><span class=o>=</span><span class=nb>false</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=nv>SE_JAVA_DISABLE_HOSTNAME_VERIFICATION</span><span class=o>=</span><span class=nb>false</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=nv>SE_NODE_MAX_INSTANCES</span><span class=o>=</span><span class=m>10</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=nv>SE_NODE_MAX_SESSIONS</span><span class=o>=</span><span class=m>10</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -e <span class=nv>SE_NODE_OVERRIDE_MAX_SESSIONS</span><span class=o>=</span><span class=nb>true</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  selenium/standalone-chrome:4.26
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>WEREAD_USER1</span><span class=o>=</span><span class=s2>&#34;user1&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>WEREAD_USER2</span><span class=o>=</span><span class=s2>&#34;user2&#34;</span>
</span></span><span class=line><span class=cl>mkdir -p <span class=nv>$HOME</span>/weread-challenge/<span class=nv>$WEREAD_USER1</span>/data
</span></span><span class=line><span class=cl>mkdir -p <span class=nv>$HOME</span>/weread-challenge/<span class=nv>$WEREAD_USER2</span>/data
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Get container IP</span>
</span></span><span class=line><span class=cl><span class=nv>Selenium_IP</span><span class=o>=</span><span class=k>$(</span>docker inspect -f <span class=s1>&#39;{{range.NetworkSettings.Networks}}{{.IPAddress}}{{end}}&#39;</span> selenium-live<span class=k>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 首次启动后, 需微信扫描二维码登录, 二维码保存在:</span>
</span></span><span class=line><span class=cl><span class=c1># /$HOME/weread-challenge/${WEREAD_USER1}/data/login.png</span>
</span></span><span class=line><span class=cl><span class=c1># /$HOME/weread-challenge/${WEREAD_USER2}/data/login.png</span>
</span></span><span class=line><span class=cl><span class=c1># 每天早上 7 点启动, 阅读68分钟</span>
</span></span><span class=line><span class=cl><span class=o>(</span>crontab -l 2&gt;/dev/null<span class=p>;</span> <span class=nb>echo</span> <span class=s2>&#34;00 07 * * * docker run --rm --name </span><span class=si>${</span><span class=nv>WEREAD_USER1</span><span class=si>}</span><span class=s2>-read -v </span><span class=nv>$HOME</span><span class=s2>/weread-challenge/</span><span class=si>${</span><span class=nv>WEREAD_USER1</span><span class=si>}</span><span class=s2>/data:/app/data -e WEREAD_REMOTE_BROWSER=http://</span><span class=si>${</span><span class=nv>Selenium_IP</span><span class=si>}</span><span class=s2>:4444 -e WEREAD_DURATION=68 -e WEREAD_USER=</span><span class=si>${</span><span class=nv>WEREAD_USER1</span><span class=si>}</span><span class=s2> jqknono/weread-challenge:latest&#34;</span><span class=o>)</span> <span class=p>|</span> crontab -
</span></span><span class=line><span class=cl><span class=o>(</span>crontab -l 2&gt;/dev/null<span class=p>;</span> <span class=nb>echo</span> <span class=s2>&#34;00 07 * * * docker run --rm --name </span><span class=si>${</span><span class=nv>WEREAD_USER2</span><span class=si>}</span><span class=s2>-read -v </span><span class=nv>$HOME</span><span class=s2>/weread-challenge/</span><span class=si>${</span><span class=nv>WEREAD_USER2</span><span class=si>}</span><span class=s2>/data:/app/data -e WEREAD_REMOTE_BROWSER=http://</span><span class=si>${</span><span class=nv>Selenium_IP</span><span class=si>}</span><span class=s2>:4444 -e WEREAD_DURATION=68 -e WEREAD_USER=</span><span class=si>${</span><span class=nv>WEREAD_USER2</span><span class=si>}</span><span class=s2> jqknono/weread-challenge:latest&#34;</span><span class=o>)</span> <span class=p>|</span> crontab -
</span></span></code></pre></div><h2 id=可配置项>可配置项</h2><table><thead><tr><th>环境变量</th><th>默认值</th><th>可选值</th><th>说明</th></tr></thead><tbody><tr><td><code>WEREAD_USER</code></td><td><code>weread-default</code></td><td>-</td><td>用户标识</td></tr><tr><td><code>WEREAD_REMOTE_BROWSER</code></td><td>""</td><td>-</td><td>远程浏览器地址</td></tr><tr><td><code>WEREAD_DURATION</code></td><td><code>10</code></td><td>-</td><td>阅读时长</td></tr><tr><td><code>WEREAD_SPEED</code></td><td><code>slow</code></td><td><code>slow,normal,fast</code></td><td>阅读速度</td></tr><tr><td><code>WEREAD_SELECTION</code></td><td><code>random</code></td><td>[0-4]</td><td>选择阅读的书籍</td></tr><tr><td><code>WEREAD_BROWSER</code></td><td><code>chrome</code></td><td><code>chrome,MicrosoftEdge,firefox</code></td><td>浏览器</td></tr><tr><td><code>ENABLE_EMAIL</code></td><td><code>false</code></td><td><code>true,false</code></td><td>邮件通知</td></tr><tr><td><code>EMAIL_SMTP</code></td><td>""</td><td>-</td><td>邮箱 SMTP 服务器</td></tr><tr><td><code>EMAIL_USER</code></td><td>""</td><td>-</td><td>邮箱用户名</td></tr><tr><td><code>EMAIL_PASS</code></td><td>""</td><td>-</td><td>邮箱密码</td></tr><tr><td><code>EMAIL_TO</code></td><td>""</td><td>-</td><td>收件人</td></tr><tr><td><code>WEREAD_AGREE_TERMS</code></td><td><code>true</code></td><td><code>true,false</code></td><td>隐私同意条款</td></tr></tbody></table><h2 id=注意事项>注意事项</h2><ul><li>28 日刷满 30 小时, 需每日至少 65 分钟, 而不是每日 60 分钟.</li><li>微信读书统计可能会漏数分钟, 期望每日获得 65 分钟, 建议调整阅读时长到 68 分钟</li><li>网页扫码登录 cookies 有效期为 30 天, 30 天后需重新扫码登录, 适合月挑战会员</li><li>邮件通知可能被识别为垃圾邮件, 建议在收件方添加白名单</li><li>本项目仅供学习交流使用, 请勿用于商业用途, 请勿用于违法用途</li><li>如存在可能的侵权, 请联系 <code>weread-challenge@techfetch.dev</code>, 本项目会立即删除</li></ul><h2 id=隐私政策>隐私政策</h2><ul><li>隐私获取<ul><li>本项目搜集使用者的 <code>cookies</code> 部分信息, 以用于使用者统计和展示.</li><li>搜集使用者的使用信息, 包含: <code>用户名称 | 首次使用时间 | 最近使用时间 | 总使用次数 | 浏览器类型 | 操作系统类别 | 阅读时长设置 | 异常退出原因</code></li><li>如不希望被搜集任何信息, 可设置启动参数<code>WEREAD_AGREE_TERMS=false</code></li></ul></li><li>风险提示<ul><li><code>cookies</code> 可用于微信读书网页登录, 登录后可以执行书架操作, 但<strong>本工具不会使用搜集的信息进行登录操作</strong>.</li><li>腾讯保护机制确保异常登录时, 手机客户端将收到风险提示, 可在手机客户端<code>设置</code>-><code>登录设备</code>中确认登录设备.</li><li>本工具纯 js 实现, 容易反混淆和扩展, 第三方可以继续开发. 即使信任本工具, 也应在使用自动化工具时, 经常确认登录设备, 避免书架被恶意操作.</li></ul></li></ul><h2 id=参考>参考</h2><ul><li>脚本下载链接: <a href=https://storage1.techfetch.dev/weread-challenge/weread-challenge.js>weread-challenge.js</a></li><li>开源地址: <a href=https://github.com/jqknono/weread-challenge-selenium>https://github.com/jqknono/weread-challenge-selenium</a></li><li>统计: <a href=https://weread-challenge.techfetch.dev>https://weread-challenge.techfetch.dev</a></li><li>文章来源: <a href=https://blog.techfetch.dev/blog/2024/12/05/%E5%BE%AE%E4%BF%A1%E8%AF%BB%E4%B9%A6%E8%87%AA%E5%8A%A8%E6%89%93%E5%8D%A1%E5%88%B7%E6%97%B6%E9%95%BF/>https://blog.techfetch.dev</a></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-e6e054e8e2f3990091a8b4a8213d3e0c>关闭独显以省电</h1><div class="td-byline mb-4"><time datetime=2024-11-18 class=text-body-secondary>Monday, November 18, 2024</time></div><p>这篇文分享给台式机很少关机, 经常远程回家中的台式机上工作的朋友.</p><p>我的主力工作机和游戏机是同一台机器, 显示屏是 4K 144Hz, 日常都是开着独显, 普通操作显示都会更顺滑一些, 但是功耗也是明显更大.</p><p><em>以下截图里的功率同时带着一个 J4125 小主机, 日常功耗在 18w 上下, 因此结论可能有不准确的地方</em></p><p>不开游戏, 在桌面快速滑动鼠标的峰值功率可以到<em>192w</em></p><p><img src=https://img1.techfetch.dev/blog/202411181057492.jpg alt></p><p>关闭独显后, 刷新率降到 60Hz, 峰值功率降到<em>120w</em>上下.</p><p><img src=https://img1.techfetch.dev/blog/202411181103084.jpg alt></p><p>在外隧道回家工作是使用的腾讯的一个入门主机, 带宽较小, 远端刷新率只有 30hz, 这种情况用独显是没有意义, 可以考虑切换到集显.</p><p>多数时候, 我不直接使用远程桌面, 而是使用 vscode 的远程开发, 优势是隐蔽, 占用带宽小, 几乎是本地开发的体验.</p><p><img src=https://img1.techfetch.dev/blog/202411181116237.png alt></p><p>普通代码编辑时, 约 72w, 与关闭独显前的 120w 相比, 有一定的节能效果.</p><p><img src=https://img1.techfetch.dev/blog/202411221112020.jpg alt></p><p>使用<code>remote ssh</code>进行远程开发时, 可以用使用脚本关闭独显.</p><p>脚本保存为<code>switch_dedicate_graphic_cards.ps1</code>, 使用方法为<code>switch_dedicate_graphic_cards.ps1 off</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ps1 data-lang=ps1><span class=line><span class=cl><span class=c># Usage: switch_dedicate_graphic_cards.ps1 on|off</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># Get parameters</span>
</span></span><span class=line><span class=cl><span class=nv>$switch</span> <span class=p>=</span> <span class=nv>$args</span><span class=p>[</span><span class=mf>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># exit if no parameter is passed</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$switch</span> <span class=o>-eq</span> <span class=vm>$null</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>Write-Host</span> <span class=s2>&#34;Usage: switch_dedicate_graphic_cards.ps1 on|off&#34;</span> <span class=n>-ForegroundColor</span> <span class=n>Yellow</span>
</span></span><span class=line><span class=cl>    <span class=n>exit</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># Get display devices</span>
</span></span><span class=line><span class=cl><span class=nv>$displayDevices</span> <span class=p>=</span>  <span class=nb>Get-CimInstance</span> <span class=n>-Namespace</span> <span class=n>root</span><span class=p>\</span><span class=n>cimv2</span> <span class=n>-ClassName</span> <span class=n>Win32_VideoController</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># If there is no display device or only one display device, exit</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$displayDevices</span><span class=p>.</span><span class=py>Count</span> <span class=o>-le</span> <span class=mf>1</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>Write-Host</span> <span class=s2>&#34;No display device found.&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>exit</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># Get dedicated graphic cards</span>
</span></span><span class=line><span class=cl><span class=nv>$dedicatedGraphicCards</span> <span class=p>=</span> <span class=nv>$displayDevices</span> <span class=p>|</span> <span class=nb>Where-Object</span> <span class=p>{</span> <span class=nv>$_</span><span class=p>.</span><span class=py>Description</span> <span class=o>-like</span> <span class=s2>&#34;*NVIDIA*&#34;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># If there is no dedicated graphic card, exit</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$dedicatedGraphicCards</span><span class=p>.</span><span class=py>Count</span> <span class=o>-eq</span> <span class=mf>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>Write-Host</span> <span class=s2>&#34;No dedicated graphic card found.&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>exit</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c># turn dedicated graphic cards on or off</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nv>$switch</span> <span class=o>-eq</span> <span class=s2>&#34;on&#34;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nv>$dedicatedGraphicCards</span> <span class=p>|</span> <span class=nb>ForEach-Object</span> <span class=p>{</span> <span class=n>pnputil</span> <span class=p>/</span><span class=nb>enable-device</span> <span class=nv>$_</span><span class=p>.</span><span class=py>PNPDeviceID</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nb>Write-Host</span> <span class=s2>&#34;Dedicated graphic cards are turned on.&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=k>elseif</span> <span class=p>(</span><span class=nv>$switch</span> <span class=o>-eq</span> <span class=s2>&#34;off&#34;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nv>$dedicatedGraphicCards</span> <span class=p>|</span> <span class=nb>ForEach-Object</span> <span class=p>{</span> <span class=n>pnputil</span> <span class=p>/</span><span class=nb>disable-device</span> <span class=nv>$_</span><span class=p>.</span><span class=py>PNPDeviceID</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nb>Write-Host</span> <span class=s2>&#34;Dedicated graphic cards are turned off.&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>Write-Host</span> <span class=s2>&#34;Invalid parameter.&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>Write-Host</span> <span class=s2>&#34;Usage: switch_dedicate_graphic_cards.ps1 on|off&#34;</span> <span class=n>-ForegroundColor</span> <span class=n>Yellow</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-08ea908b2ff7344d90a1bf1548cd3f62>docker</h1><div class="td-byline mb-4"><time datetime=2024-06-28 class=text-body-secondary>Friday, June 28, 2024</time></div><h1 id=k8s-和-docker>k8s 和 docker</h1><ul><li>[<a href=/zh-cn/blog/2024/06/28/docker%E4%BB%8B%E7%BB%8D/ title=docker介绍>docker介绍</a>]<ul><li>[<a href=Windows%E5%AE%B9%E5%99%A8 title=Windows容器>Windows容器</a>]</li><li>[<a href=docker%E7%BD%91%E7%BB%9C title=docker网络>docker网络</a>]</li><li>[<a href=docker%E7%BD%91%E7%BB%9C%E5%88%86%E6%9E%90 title=docker网络分析>docker网络分析</a>]</li></ul></li></ul></div><div class=td-content><h1 id=pg-c38cd28aba24ac15282cf3e31ed892e4>docker介绍</h1><div class="td-byline mb-4"><time datetime=2024-06-28 class=text-body-secondary>Friday, June 28, 2024</time></div><ul><li><input disabled type=checkbox> docker介绍</li></ul><h1 id=docker-介绍>docker 介绍</h1><ul><li>docker 是一个应用容器引擎, 可以打包应用及其依赖包到一个可移植的容器中, 然后发布到任何流行的 Linux 或 Windows 机器上, 也可以实现虚拟化.</li><li>为什么会有 docker, 因为开发和运维经常遇到一类问题, 那就是应用在开发人员的环境上运行没有任何问题, 但在实际生产环境中却 bug 百出.<ul><li>程序的运行从硬件架构到操作系统, 再到应用程序, 这些都是不同的层次, 但是开发人员往往只关注应用程序的开发, 而忽略了其他层次的问题.</li><li>docker 的出现就是为了解决这个问题, 它将应用程序及其依赖, 打包在一个容器中, 这样就不用担心环境的问题了.</li></ul></li><li>同步开发和生产环境, 使开发人员可以在本地开发, 测试, 部署应用程序, 而不用担心环境的问题. 显著提升了开发和运维的效率, 代价是一点点资源的浪费.</li></ul><p>我极力建议所有开发者都学会使用容器进行开发和部署, 它以相对很低的代价, 为你的应用程序提供一个稳定的运行环境, 从而提高开发和运维的效率.</p><p>使用一些通俗的语言来描述使用 docker 的一种工作流:</p><ol><li>从零创建一个开发的环境, 包含了操作系统, 应用程序, 依赖包, 配置文件等等.<ul><li>环境可以在任何地方运行, 也可以在任何地方创建.</li><li>环境对源码编译的结果稳定且可预测, 行为完全一致.</li><li>环境中程序的运行不会产生任何歧义.</li><li>最好是可以使用声明式的方式来创建环境(docker-compose), 进一步减少环境的隐藏差异, 环境的一切都已在声明里展示.</li></ul></li><li>创建一个 commit, 创建镜像, 这相当于一个快照, 保存当前的环境, 以便以后使用.</li><li>分享镜像给其它开发和运维, 大家基于相同语境同步展开工作.</li><li>随着业务的发展需求, 修改镜像, 重新创建 commit, 重新创建镜像, 重新分发.</li></ol><h2 id=docker-的基本架构>docker 的基本架构</h2><ul><li>[<a href=docker%E7%BD%91%E7%BB%9C title=docker网络>docker网络</a>]</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-6c1874984d9baf6e4d151ae8d2d66c8e>adguard</h1><div class="td-byline mb-4"><time datetime=2024-06-28 class=text-body-secondary>Friday, June 28, 2024</time></div></div><div class=td-content><h1 id=pg-59e4cc5a694f247cd0d535c6af2c1745>利用DNS服务平滑切换网络服务</h1><div class="td-byline mb-4"><time datetime=2024-06-12 class=text-body-secondary>Wednesday, June 12, 2024</time></div><p>假设服务域名为<code>example.domain</code>, 原服务器 IP 地址为<code>A</code>, 由于服务器迁移或 IP 更换, 新服务器 IP 地址为<code>B</code>, 为了保证用户无感知, 可以通过 DNS 服务平滑切换网络服务.</p><ol><li>原服务状态, <code>example.domain</code> 解析到 IP 地址<code>A</code></li><li>过渡状态, <code>example.domain</code> 解析到 IP 地址<code>A</code> 和<code>B</code></li><li>新服务状态, <code>example.domain</code> 解析到 IP 地址<code>B</code>, 移除 IP 地址<code>A</code></li></ol><p>说明: 当用户获得两个解析地址时, 客户端会选择其中一个地址进行连接, 当连接失败时, 会尝试其它地址, 以此保证服务的可用性.</p><p>由于 DNS 解析存在缓存, 为了保证平滑切换, 需要在过渡状态保持一段时间, 以确保所有缓存失效.</p><p>我这里需要迁移的是 dns 服务, 可以在过渡状态中设置<code>DNS重写</code>, 加快迁移过程.</p><p>A 服务重写规则:</p><p><img src=https://s2.loli.net/2024/06/12/xRFMB1PTIcvUQHr.png alt=A服务重写></p><p>B 服务重写规则:</p><p><img src=https://s2.loli.net/2024/06/12/DILEi9jJoVYeuT2.png alt=B服务重写></p><p>原迁移过程拓展为:</p><ol><li>原服务状态, <code>example.domain</code> 解析到 IP 地址<code>A</code></li><li>过渡状态, <code>example.domain</code> 在<code>dns A</code>服务中重写到<code>A</code>和<code>B</code>, 在<code>dns B</code>服务中重写到<code>B</code></li><li>新服务状态, <code>example.domain</code> 解析到 IP 地址<code>B</code>, 移除 IP 地址<code>A</code></li></ol><p>当用户仍在使用<code>dns A</code>服务时, 可以获得两个地址, 有一半的概率会选择<code>dns A</code>服务.<br>另外一半的概率会切换到<code>dns B</code>服务, <code>dns B</code>服务故障时切换回<code>dns A</code>. <code>dns B</code>服务未故障时, 将只会获得一个地址, 因而用户会停留在<code>dns B</code>服务中.<br>这样我们可以逐步的减少<code>dns A</code>服务的资源消耗, 而不是直接停止, 实现更平滑的迁移.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-ca44a89b3e1f9290fd004f002cfb8027>letsencrypt的证书申请限制</h1><div class="td-byline mb-4"><time datetime=2024-06-28 class=text-body-secondary>Friday, June 28, 2024</time></div><h2 id=简洁总结>简洁总结</h2><ul><li>每个注册域名每周最多 50 个证书</li><li>每个账户每三小时最多 300 次请求</li><li>每份证书最多 100 个域名</li><li>每周最多 5 张重复证书</li><li><strong>续期证书不受限制</strong></li><li>每个 IP 每三小时最多创建 10 个账户</li><li>每个 IPv6/48 每三小时最多创建 500 个账户</li></ul><p>如果你需要给很多个子域名申请证书, 可以结合<code>每个注册域名每周最多 50 个证书</code>和<code>每份证书最多 100 个域名</code>, 实现每周最多 5000 个子域名的证书申请.</p><h2 id=参考>参考</h2><p><a href=https://letsencrypt.org/zh-cn/docs/rate-limits/>https://letsencrypt.org/zh-cn/docs/rate-limits/</a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-cd243ff5456a6d9d85c89b2ebbd970d5>测试工具</h1><div class="td-byline mb-4"><time datetime=2024-06-28 class=text-body-secondary>Friday, June 28, 2024</time></div><ul><li><input disabled type=checkbox> 测试工具</li></ul><h1 id=测试工具>测试工具</h1><ul><li>[<a href=%E7%B2%BE%E7%A1%AE%E5%8F%91%E5%8C%85-hping3 title=精确发包-hping3>精确发包-hping3</a>]</li><li>[<a href=/zh-cn/blog/2024/06/28/%E7%AE%80%E6%98%93server-client%E4%BB%A3%E7%A0%81/ title=简易server-client代码>简易server-client代码</a>]</li></ul></div><div class=td-content><h1 id=pg-42145e1849133da1bffe65d5ed26f5f5>简易server-client代码</h1><div class="td-byline mb-4"><time datetime=2024-06-28 class=text-body-secondary>Friday, June 28, 2024</time></div><ul><li><input disabled type=checkbox> 简易server-client代码</li></ul><h1 id=简易-server-client-代码-windows>简易 server-client 代码 windows</h1><h2 id=windows>Windows</h2><p><a href=https://docs.microsoft.com/en-us/windows/win32/winsock/complete-client-code>Complete Winsock Client Code</a>
<a href=https://docs.microsoft.com/en-us/windows/win32/winsock/complete-server-code>Complete Winsock Server Code</a></p><h2 id=linux>Linux</h2><p><a href=https://www.geeksforgeeks.org/socket-programming-cc/>Linux Socket Programming</a>
<a href=https://www.geeksforgeeks.org/simple-client-server-application-in-c/>Simple client/server application in C</a></p></div><div class=td-content style=page-break-before:always><h1 id=pg-66ec6e435a0d6143639b3a41c8ca7bd9>AI</h1><div class="td-byline mb-4"><time datetime=2025-07-22 class=text-body-secondary>Tuesday, July 22, 2025</time></div></div><div class=td-content><h1 id=pg-1b553b2d54a487ae94ad5c91fd63006c>trae使用的简单分享</h1><div class="td-byline mb-4"><time datetime=2025-07-22 class=text-body-secondary>Tuesday, July 22, 2025</time></div><p>这篇长文发布于 2025-07-22, 当前 trae 的功能完成度以及性能都较差, 后续 trae 可能会有改进, 大家可以自行体验, 以自己的体验为准.</p><p>常识上来说, 先到的员工会形成企业和产品文化, 属于较难改变的根基, 同时也是较虚的东西, 我的分享仅供参考.</p><h2 id=界面设计>界面设计</h2><p>trae 的界面具有不错的审美, 布局/配色/字体相较原版均有调整, 审美上很棒. 逻辑也较为清晰, 这方面我没有能力提出什么建议.</p><h2 id=功能>功能</h2><h3 id=功能缺失>功能缺失</h3><p>相较 vscode, 缺失较多 Microsoft 和 Github 提供的功能, 下边仅列出我知道的部分:</p><ul><li>设置同步</li><li>设置 Profile</li><li>Tunnel</li><li>插件市场</li><li>第一方闭源插件</li><li>IDE 仅支持 Windows 和 MacOS, 缺失 Web 和 Linux</li><li>Remote SSH 仅支持 linux 端, 缺失 Windows 和 MacOS</li></ul><p>其中第一方的闭源插件属于较难啃的骨头, 目前通过使用 open-vsx.org 来解决, 一些常用插件都有, 版本未必最新, 但够用.</p><p>由于 Remote 的缺失, 不同系统设备较多的只能暂时放弃.</p><h3 id=功能对齐>功能对齐</h3><p>对比较早发展的 vscode/cursor, 功能上已经对齐.</p><p>使用大模型的方式, Ask/Edit/Agent 等都有, CUE(Context Understanding Engine)对标 NES(Next Edit Suggestion).</p><p>Github Copilot 的补全使用 GPT-4o, Cursor 的补全使用 fusion 模型, Trae 尚未公布其补全模型.</p><p>MCP, rules, Docs 功能都有.</p><h4 id=补全>补全</h4><p>实际体验下来 CUE 效果较差, 至少 90%的建议都不会被我采纳, 由于其极低的采纳率, 多数时候会影响注意力, 我已经完全不使用 CUE 了.</p><p>GPT-4o 擅长补全下一行, NES 能力很差, 基本上 NES 我都是关的.
fusion 的 NES 极佳, 相信每个用过的人一定印象深刻. 但它的强处只在代码补全, 非代码内容补全不如 GPT-4o.
CUE 没有可用性.</p><p>以 10 分为满分, 不严谨主观打分</p><table><thead><tr><th>模型</th><th>代码行内补全</th><th>下一步修改补全</th><th>非代码内容补全</th></tr></thead><tbody><tr><td>Cursor</td><td>10</td><td>10</td><td>6</td></tr><tr><td>Github Copilot</td><td>9</td><td>3</td><td>8</td></tr><tr><td>Trae</td><td>3</td><td>0</td><td>3</td></tr></tbody></table><h4 id=agent>Agent</h4><p>各 IDE 初期的 Agent 都有较好的能力, 但实际效果都在逐步下降, 这点并不只批评哪一家, 各家都是如此.</p><p>目前有几个概念:</p><ul><li>RAG, Retrieval-Augmented Generation, 检索增强生成</li><li>Prompt Engineering, 提示词工程</li><li>Context Engineering, 上下文工程</li></ul><p>目的都是为了让大模型更好的理解人的需求. 喂给大模型的上下文不是越多越好, 上下文需要一定的质量, 低质的上下文会影响大模型的理解.</p><p>话虽如此, 但有些人在实际使用中可能会发现, 费很大力气, 最后发现还是代码原文件传递给大模型可以获得最好的效果.
在中间设计提示词, 上下文工程的作用并不明显, 有时甚至会影响效果.</p><p>Trae 中实现了这三种路线, 但我暂未感受到领先的体验.</p><h2 id=性能问题>性能问题</h2><p>有不少人和我一样遇到性能问题, Trae 绝对是 vscode 系中最不同寻常的一款, 尽管前文夸赞了它的前端设计, 但实际使用上有很多卡顿.</p><p>Trae 可能对 vscode 进行了较大的修改, 这意味着它将来不太能和 vscode 兼容, 基线版本可能会停留在某个 vscode 版本.</p><p>我的部分插件在 Trae 上运行卡顿, 有的功能已不能正常运行, 这个问题在 Trae 上可能会持续存在.</p><h2 id=隐私政策>隐私政策</h2><p>Trae 国际版提供隐私政策的说明: <a href=https://www.trae.ai/privacy-policy>https://www.trae.ai/privacy-policy</a></p><p><img src=https://s2.loli.net/2025/07/19/9KmboTcNyEPSpl1.png alt></p><p>Trae IDE 提供中英日语言, 隐私政策提供 9 国语言, 却不提供中文.</p><p>简单来说:</p><ol><li>Trae 搜集并分享数据给第三方</li><li>Trae 不提供任何隐私设置选项, 使用即同意隐私政策</li><li>Trae 的数据存储保护和分享, 遵循部分国家和地区的法律, 其中不包括中国</li></ol><h2 id=总结>总结</h2><p>Trae 的营销较多, 这可能会和企业文化绑定较深, 未来可能也会是网络上声量较大的 IDE, 由于它的能力不匹配声量, 后续我不会再继续观望. 字节的自有模型不算强, 可能需要数据来进行学习以提升自己的模型能力, 它的隐私政策不友好, 为数据收集开了大门. 以我的长时间和这类型开发工具打交道的体会, 根本竞争力在模型, 不在其它东西上, 也就是 cli 就足够 vibe coding. Trae 的价格非常便宜, 可以持续以 3 美元购买 600 次 Claude 对话, 是市面上能使用 Claude 模型最便宜的工具. 基于此我推断 Trae IDE 实际是为了训练字节自己的模型, 构建自己的核心竞争力, 而推出的一款数据搜集产品.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-1ee793d3e79b84d8f033d7f8af3a5ae7>cursor自动化调试</h1><div class="td-byline mb-4"><time datetime=2025-06-27 class=text-body-secondary>Friday, June 27, 2025</time></div><p>以下是使用 Cursor 进行自动化开发测试的大纲：</p><h3 id=1-简介>1. 简介</h3><ul><li><strong>Cursor 概述</strong>：介绍 Cursor 是什么，它的主要功能和特点。</li><li><strong>自动化开发测试的背景</strong>：解释为什么需要自动化开发测试，以及它在现代软件开发中的重要性。</li></ul><h3 id=2-准备工作>2. 准备工作</h3><ul><li><strong>安装与配置</strong>：<ul><li>下载并安装 Cursor。</li><li>配置必要的插件和扩展。</li></ul></li><li><strong>环境设置</strong>：<ul><li>设置项目结构。</li><li>安装依赖项（如 Node.js、Python 等）。</li></ul></li></ul><h3 id=3-自动化测试基础>3. 自动化测试基础</h3><ul><li><strong>测试类型</strong>：<ul><li>单元测试</li><li>集成测试</li><li>端到端测试</li></ul></li><li><strong>测试框架选择</strong>：<ul><li>介绍常用的测试框架（如 Jest, Mocha, PyTest 等）。</li></ul></li></ul><h3 id=4-使用-cursor-编写测试用例>4. 使用 Cursor 编写测试用例</h3><ul><li><strong>创建测试文件</strong>：<ul><li>在 Cursor 中创建新的测试文件。</li><li>使用模板生成基本的测试结构。</li></ul></li><li><strong>编写测试逻辑</strong>：<ul><li>编写单元测试用例。</li><li>使用断言库进行验证。</li></ul></li></ul><h3 id=5-运行和调试测试>5. 运行和调试测试</h3><ul><li><strong>运行测试</strong>：<ul><li>在 Cursor 中运行单个或多个测试用例。</li><li>查看测试结果和输出。</li></ul></li><li><strong>调试测试</strong>：<ul><li>设置断点。</li><li>步进执行以检查变量值和程序状态。</li></ul></li></ul><h3 id=6-测试报告与分析>6. 测试报告与分析</h3><ul><li><strong>生成测试报告</strong>：<ul><li>使用测试框架生成详细的测试报告。</li><li>导出报告为 HTML 或其他格式。</li></ul></li><li><strong>分析测试结果</strong>：<ul><li>识别失败的测试用例。</li><li>分析原因并进行修复。</li></ul></li></ul><h3 id=7-持续集成与持续交付-cicd>7. 持续集成与持续交付 (CI/CD)</h3><ul><li><strong>集成 CI/CD 工具</strong>：<ul><li>将 Cursor 与 GitHub Actions、Travis CI 等工具集成。</li><li>配置自动触发测试的流程。</li></ul></li><li><strong>部署与监控</strong>：<ul><li>自动化部署到测试环境。</li><li>监控测试覆盖率和质量指标。</li></ul></li></ul><h3 id=8-最佳实践与技巧>8. 最佳实践与技巧</h3><ul><li><strong>代码重构与测试维护</strong>：<ul><li>如何在代码重构时保持测试的有效性。</li></ul></li><li><strong>性能优化</strong>：<ul><li>提高测试执行速度的技巧。</li></ul></li><li><strong>常见问题解决</strong>：<ul><li>解决常见的测试失败问题。</li></ul></li></ul><h3 id=9-结论>9. 结论</h3><ul><li><strong>总结</strong>：回顾使用 Cursor 进行自动化开发测试的优势和关键步骤。</li><li><strong>展望</strong>：未来可能的发展方向和改进点。</li></ul><p>这个大纲旨在帮助开发者系统地了解如何利用 Cursor 进行自动化开发测试，从而提高开发效率和代码质量。</p><h3 id=cursor-windows-ssh-remote-to-linux-运行命令停止的问题>Cursor Windows SSH Remote to Linux 运行命令停止的问题</h3><p>参考: <a href=https://forum.cursor.com/t/cursor-agent-mode-when-running-terminal-commands-often-hangs-up-the-terminal-requiring-a-click-to-pop-it-out-in-order-to-continue-commands/59969/23>https://forum.cursor.com/t/cursor-agent-mode-when-running-terminal-commands-often-hangs-up-the-terminal-requiring-a-click-to-pop-it-out-in-order-to-continue-commands/59969/23</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>wget 
</span></span><span class=line><span class=cl>https://vscode.download.prss.microsoft.com/dbazure/download/stable/2901c5ac6db8a986a5666c3af51ff804d05af0d4/code_1.101.2-1750797935_amd64.deb
</span></span><span class=line><span class=cl>sudo dpkg -i code_1.101.2-1750797935_amd64.deb
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s1>&#39;[[ &#34;$TERM_PROGRAM&#34; == &#34;vscode&#34; ]] &amp;&amp; . &#34;$(code --locate-shell-integration-path bash --user-data-dir=&#34;.&#34; --no-sandbox)&#34;&#39;</span> &gt;&gt; ~/.bashrc
</span></span></code></pre></div><p>执行这几行命令后, cursor运行命令行不会再被卡住.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-e945e5634476a6b96379a29cf2c31253>角色设计</h1><div class="td-byline mb-4"><time datetime=2025-05-24 class=text-body-secondary>Saturday, May 24, 2025</time></div></div><div class=td-content style=page-break-before:always><h1 id=pg-acbdb4ea5051f8e776fe81df81fd6dae>来自cline的提示词指南</h1><div class="td-byline mb-4"><time datetime=2025-03-30 class=text-body-secondary>Sunday, March 30, 2025</time></div><h1 id=cline-记忆库---自定义指令>Cline 记忆库 - 自定义指令</h1><h3 id=1-目的和功能>1. 目的和功能</h3><ul><li><p><strong>这套指令的目标是什么？</strong></p><ul><li>这套指令将 Cline 转变为一个自我记录的开发系统，通过结构化的“记忆库”在会话间保持上下文。它确保一致的文档记录，仔细验证变更，并与用户进行清晰的沟通。</li></ul></li><li><p><strong>这最适合哪些类型的项目或任务？</strong></p><ul><li>需要广泛上下文跟踪的项目。</li><li>任何项目，无论技术栈如何（技术栈详情存储在 <code>techContext.md</code> 中）。</li><li>正在进行和新项目。</li></ul></li></ul><h3 id=2-使用指南>2. 使用指南</h3><ul><li><strong>如何添加这些指令</strong><ol><li>打开 VSCode</li><li>点击 Cline 扩展设置拨号 ⚙️</li><li>找到“自定义指令”字段</li><li>复制并粘贴下方部分的指令</li></ol></li></ul><img width=345 alt="Screenshot 2024-12-26 at 11 22 20 AM" src=https://github.com/user-attachments/assets/8b4ff439-db66-48ec-be13-1ddaa37afa9a><ul><li><p><strong>项目设置</strong></p><ol><li>在项目根目录创建一个空的 <code>cline_docs</code> 文件夹（即 YOUR-PROJECT-FOLDER/cline_docs）</li><li>首次使用时，提供项目简介并要求 Cline “初始化记忆库”</li></ol></li><li><p><strong>最佳实践</strong></p><ul><li>在操作过程中监控 <code>[MEMORY BANK: ACTIVE]</code> 标志。</li><li>对关键操作进行信心检查。</li><li>开始新项目时，为 Cline 创建项目简介（粘贴到聊天中或包含在 <code>cline_docs</code> 中作为 <code>projectBrief.md</code>），以用于创建初始上下文文件。<ul><li>注意：productBrief.md（或您拥有的任何文档）可以是技术/非技术或仅功能性的范围。Cline 被指示在创建这些上下文文件时填补空白。例如，如果您没有选择技术栈，Cline 将为您选择。</li></ul></li><li>以“遵循您的自定义指令”开始聊天（您只需在第一次聊天的开始时说一次）。</li><li>当提示 Cline 更新上下文文件时，说“仅更新相关的 cline_docs”。</li><li>在会话结束时通过告诉 Cline“更新记忆库”来验证文档更新。</li><li>在大约 200 万个标记处更新记忆库并结束会话。</li></ul></li></ul><h3 id=3-作者与贡献者>3. 作者与贡献者</h3><ul><li><strong>作者</strong><ul><li>nickbaumann98</li></ul></li><li><strong>贡献者</strong><ul><li>贡献者（Discord: <a href=https://discord.com/channels/1275535550845292637/1275555786621325382>Cline&rsquo;s #prompts</a>）:<ul><li>@SniperMunyShotz</li></ul></li></ul></li></ul><h3 id=4-自定义指令>4. 自定义指令</h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-markdown data-lang=markdown><span class=line><span class=cl><span class=gh># Cline 的记忆库
</span></span></span><span class=line><span class=cl><span class=gh></span>
</span></span><span class=line><span class=cl>您是 Cline，一位专家软件工程师，具有独特的限制：您的记忆会定期完全重置。这不是一个错误 - 这是让您保持完美文档的原因。每次重置后，您完全依赖于您的记忆库来理解项目并继续工作。没有适当的文档，您无法有效地工作。
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=gu>## 记忆库文件
</span></span></span><span class=line><span class=cl><span class=gu></span>
</span></span><span class=line><span class=cl>关键：如果 <span class=sb>`cline_docs/`</span> 或这些文件中的任何一个不存在，请立即创建它们，通过：
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>1.</span> 阅读所有提供的文档
</span></span><span class=line><span class=cl><span class=k>2.</span> 向用户询问任何缺失的信息
</span></span><span class=line><span class=cl><span class=k>3.</span> 仅使用验证过的信息创建文件
</span></span><span class=line><span class=cl><span class=k>4.</span> 在没有完整上下文的情况下绝不继续
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>所需文件：
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>productContext.md
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>-</span> 这个项目的存在原因
</span></span><span class=line><span class=cl><span class=k>-</span> 它解决了什么问题
</span></span><span class=line><span class=cl><span class=k>-</span> 它应该如何工作
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>activeContext.md
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>-</span> 你当前的工作
</span></span><span class=line><span class=cl><span class=k>-</span> 最近的更改
</span></span><span class=line><span class=cl><span class=k>-</span> 下一步骤
</span></span><span class=line><span class=cl>  （这是你的真实来源）
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>systemPatterns.md
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>-</span> 系统的构建方式
</span></span><span class=line><span class=cl><span class=k>-</span> 关键技术决策
</span></span><span class=line><span class=cl><span class=k>-</span> 架构模式
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>techContext.md
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>-</span> 使用的技术
</span></span><span class=line><span class=cl><span class=k>-</span> 开发设置
</span></span><span class=line><span class=cl><span class=k>-</span> 技术限制
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>progress.md
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>-</span> 哪些功能已实现
</span></span><span class=line><span class=cl><span class=k>-</span> 剩余需要构建的部分
</span></span><span class=line><span class=cl><span class=k>-</span> 进度状态
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=gu>## 核心工作流程
</span></span></span><span class=line><span class=cl><span class=gu></span>
</span></span><span class=line><span class=cl><span class=gu>### 开始任务
</span></span></span><span class=line><span class=cl><span class=gu></span>
</span></span><span class=line><span class=cl><span class=k>1.</span> 检查记忆库文件
</span></span><span class=line><span class=cl><span class=k>2.</span> 如果有任何文件缺失，停止并创建它们
</span></span><span class=line><span class=cl><span class=k>3.</span> 在继续之前读取所有文件
</span></span><span class=line><span class=cl><span class=k>4.</span> 验证你有完整的上下文
</span></span><span class=line><span class=cl><span class=k>5.</span> 开始开发。在任务开始时初始化记忆库后，不要更新 cline_docs。
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=gu>### 开发过程中
</span></span></span><span class=line><span class=cl><span class=gu></span>
</span></span><span class=line><span class=cl><span class=k>1.</span> 对于正常开发：
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>   <span class=k>-</span> 遵循记忆库模式
</span></span><span class=line><span class=cl>   <span class=k>-</span> 在重大更改后更新文档
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>2.</span> 在每次使用工具时开头说“[记忆库：激活]”。
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=gu>### 记忆库更新
</span></span></span><span class=line><span class=cl><span class=gu></span>
</span></span><span class=line><span class=cl>当用户说“更新记忆库”时：
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>1.</span> 这意味着即将进行记忆重置
</span></span><span class=line><span class=cl><span class=k>2.</span> 记录当前状态的所有信息
</span></span><span class=line><span class=cl><span class=k>3.</span> 使下一步骤非常清晰
</span></span><span class=line><span class=cl><span class=k>4.</span> 完成当前任务
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>记住：每次记忆重置后，你将完全从头开始。你与之前工作的唯一联系是记忆库。维护它就像你的功能依赖于它一样——因为确实如此。
</span></span></code></pre></div></div><div class=td-content style=page-break-before:always><h1 id=pg-252aa5b5694af19740a738128bf07d27>Copilot系列</h1><div class="td-byline mb-4"><time datetime=2024-06-28 class=text-body-secondary>Friday, June 28, 2024</time></div><ul><li><input disabled type=checkbox> Copilot系列</li></ul></div><div class=td-content><h1 id=pg-7c7b60150431279e2a32379e5f1768b9>Github Copilot付费模型对比</h1><div class="td-byline mb-4"><time datetime=2025-03-04 class=text-body-secondary>Tuesday, March 04, 2025</time></div><p><img src=https://img1.techfetch.dev/blog/202503041205012.png alt=7种模型></p><p>Github Copilot 目前提供了 7 种模型,</p><ul><li>Claude 3.5 Sonnet</li><li>Claude 3.7 Sonnet</li><li>Claude 3.7 Sonnet Thinking</li><li>Gemini 2.0 Flash</li><li>GPT-4o</li><li>o1</li><li>o3-mini</li></ul><p>官方缺少对这 7 种模型的介绍, 本文简略的描述它们在各领域的评分, 以区分它们擅长的领域, 方便读者在处理特定问题时, 切换到更合适的模型.</p><h2 id=模型对比>模型对比</h2><p>基于公开评测数据（部分数据为估算与不同来源折算后得出）的多维度对比表，涵盖编码（SWE‑Bench Verified）、数学（AIME’24）和推理（GPQA Diamond）三个关键指标：</p><table><thead><tr><th>模型</th><th>编码表现<br>(SWE‑Bench Verified)</th><th>数学表现<br>(AIME'24)</th><th>推理表现<br>(GPQA Diamond)</th></tr></thead><tbody><tr><td>Claude 3.5 Sonnet</td><td>70.3%</td><td>49.0%</td><td>77.0%</td></tr><tr><td>Claude 3.7 Sonnet (标准模式)</td><td>≈83.7%<br>(提高 ≈19%)</td><td>≈58.3%<br>(提高 ≈19%)</td><td>≈91.6%<br>(提高 ≈19%)</td></tr><tr><td>Claude 3.7 Sonnet Thinking</td><td>≈83.7%<br>(与标准相近)</td><td>≈64.0%<br>(思考模式进一步提升)</td><td>≈95.0%<br>(更强推理能力)</td></tr><tr><td>Gemini 2.0 Flash</td><td>≈65.0%<br>(估算)</td><td>≈45.0%<br>(估算)</td><td>≈75.0%<br>(估算)</td></tr><tr><td>GPT‑4o</td><td>38.0%</td><td>36.7%</td><td>71.4%</td></tr><tr><td>o1</td><td>48.9%</td><td>83.3%</td><td>78.0%</td></tr><tr><td>o3‑mini</td><td>49.3%</td><td>87.3%</td><td>79.7%</td></tr></tbody></table><p>说明：</p><ul><li>上表数值取自部分公开评测（例如 Vellum 平台的对比报告 VELLUM.AI）以及部分数据折算（例如 Claude 3.7 相比 3.5 大约提升 19%），部分 Gemini 2.0 Flash 数值为估算值。</li><li>“Claude 3.7 Sonnet Thinking”指的是在开启“思考模式”（即延长内部推理步骤）的情况下，模型在数学与推理任务上的表现显著改善。</li></ul><h2 id=优劣势总结与应用领域>优劣势总结与应用领域</h2><p>Claude 系列（3.5/3.7 Sonnet 与其 Thinking 变体）</p><ul><li>优势：
在编码和多步推理任务上具有较高准确率，尤其是 3.7 版本较 3.5 有明显提升；
“Thinking”模式下数学和推理表现更佳，适合处理复杂逻辑或需要详细计划的任务；
内置对工具调用和长上下文处理有优势。</li><li>劣势：
标准模式下数学指标相对较低，只有在开启延长推理时才能显著改善；
成本和响应时长在某些场景下可能较高。
适用领域：
软件工程、代码生成与调试、复杂问题求解、多步决策及企业级自动化工作流。</li></ul><p>Gemini 2.0 Flash</p><ul><li>优势：
具备较大上下文窗口，适合长文档处理与多模态输入（例如图像解析）；
推理能力与编码表现在部分测试中表现不俗，且响应速度快。</li><li>劣势：
部分场景下（如复杂编码任务）可能会出现“卡住”现象，稳定性有待验证；
部分指标为初步估算，整体表现仍需更多公开数据确认。
适用领域：
多模态任务、实时交互、需要大上下文的应用场景，如长文档摘要、视频解析及信息检索。</li></ul><p>GPT‑4o</p><ul><li>优势：
语言理解和生成自然流畅，适合开放性对话和一般文本处理。</li><li>劣势：
在编码、数学等专业任务上的表现相对较弱，部分指标远低于同类模型；
成本较高（与 GPT‑4.5 类似），性价比不如部分竞争对手。
适用领域：
通用对话系统、内容创作、文案撰写及日常问答任务。</li></ul><p>o1 与 o3‑mini（OpenAI 系列）</p><ul><li>优势：
数学推理方面表现出色，o1 与 o3‑mini 在 AIME 类任务上分别达到 83.3% 和 87.3%；
推理能力较稳定，适合需要高精度数学和逻辑分析的应用。</li><li>劣势：
编码表现中等，相较于 Claude 系列稍逊一筹；
整体性能在不同任务上表现略有不平衡。
适用领域：
科学计算、数学问题求解、逻辑推理、教育辅导及专业数据分析领域。</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-3f339cec1cffc9714568737e3cdf30f5>Github Copilot Agent模式使用经验分享</h1><div class=lead>本文总结了如何使用 GitHub Copilot Agent 模式，并分享实际操作经验。</div><div class="td-byline mb-4"><time datetime=2025-02-28 class=text-body-secondary>Friday, February 28, 2025</time></div><p>本文总结了如何使用 GitHub Copilot Agent 模式，并分享实际操作经验。</p><p><img src=https://img1.techfetch.dev/blog/202503041211061.png alt></p><h2 id=前置设置>前置设置</h2><ol><li>使用 VSCode Insider；</li><li>安装 GitHub Copilot（预览版）插件；</li><li>选择 Claude 3.7 Sonnet（预览版）模型，该模型在代码编写方面表现出色，同时其它模型在速度、多模态（如图像识别）及推理能力上具备优势；</li><li>工作模式选择 Agent。</li></ol><p><img src=https://img1.techfetch.dev/qt/202502191622707.png alt=前置设置></p><h2 id=操作步骤>操作步骤</h2><ol><li>打开 “Copilot Edits” 选项卡；</li><li>添加附件，如 “Codebase”、“Get Errors”、“Terminal Last Commands” 等；</li><li>添加 “Working Set” 文件，默认包含当前打开的文件，也可手动选择其他文件（如 “Open Editors”）；</li><li>添加 “Instructions”，输入需要 Copilot Agent 特别注意的提示词；</li><li>点击 “Send” 按钮，开始对话，观察 Agent 的表现。</li></ol><h2 id=其它说明>其它说明</h2><ul><li>VSCode 通过语言插件提供的 lint 功能可以产生 Error 或 Warning 提示，Agent 能自动根据这些提示修正代码。</li><li>随着对话的深入，Agent 生成的代码修改可能会偏离预期。建议每次会话都聚焦一个明确的主题，避免对话过长；达到短期目标后结束当前会话，再启动新任务。</li><li>“Working Set” 下的 “Add Files” 提供 “Related Files” 选项，可推荐相关文件。</li><li>注意控制单个代码文件的行数，以免 token 消耗过快。</li><li>建议先生成基础代码，再编写测试用例，便于 Agent 根据测试结果调试和自我校验。</li><li>为限制修改范围，可在 settings.json 中添加如下配置，只修改指定目录下的文件, 仅供参考：</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl> <span class=s2>&#34;github.copilot.chat.codeGeneration.instructions&#34;</span><span class=err>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;text&#34;</span><span class=p>:</span> <span class=s2>&#34;只需修改 ./script/ 目录下的文件，不修改其他目录下的文件.&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;text&#34;</span><span class=p>:</span> <span class=s2>&#34;若目标代码文件行数超过 1000 行，建议将新增函数置于新文件中，通过引用调用；如产生的修改导致文件超长，可暂不严格遵守此规则.&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span><span class=err>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;github.copilot.chat.testGeneration.instructions&#34;</span><span class=err>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;text&#34;</span><span class=p>:</span> <span class=s2>&#34;在现有单元测试文件中生成测试用例.&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nt>&#34;text&#34;</span><span class=p>:</span> <span class=s2>&#34;代码修改后务必运行测试用例验证.&#34;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span><span class=err>,</span>
</span></span></code></pre></div><h2 id=常见问题>常见问题</h2><h3 id=输入需求得不到想要的业务代码>输入需求得不到想要的业务代码</h3><p>需要将大任务拆分成较小的任务, 每次会话只处理一个小任务. 这是由于大模型的上下文太多会导致注意力分散.</p><p>喂给单次对话的上下文, 需要自己揣摩, 太多和太少都会导致不理解需求.</p><p>DeepSeek 模型解决了注意力分散问题, 但需要在 cursor 中使用 Deepseek API. 不清楚其效果如何.</p><h3 id=响应缓慢问题>响应缓慢问题</h3><p>需要理解 token 消耗机制, token 输入是便宜且耗时较短的, token 输出贵很多, 且明显更缓慢.</p><p>假如一个代码文件非常大， 实际需要修改的代码行只有三行, 但由于上下文多, 输出也多, 会导致 token 消耗很快, 且响应缓慢.</p><p>因此, 必须要考虑控制文件的大小, 不要写很大的文件和很大的函数. 及时拆分大文件, 大函数, 通过引用调用.</p><h3 id=业务理解问题>业务理解问题</h3><p>理解问题或许有些依赖代码中的注释, 以及测试文件, 代码中补充足够的注释, 以及测试用例, 有助于 Copilot Agent 更好的理解业务.</p><p>Agent 自己生成的业务代码就有足够多的注释, 检视这些注释, 就可以快速判断 Agent 是否正确理解了需求.</p><h3 id=生成大量代码需要-debug-较久>生成大量代码需要 debug 较久</h3><p>可以考虑在生成某个特性的基础代码后, 先生成测试用例, 再调整业务逻辑，这样 Agent 可以自行进行调试，自我验证.</p><p>Agent 会询问是否允许运行测试命令, 运行完成后会自行读终端输出, 以此来判断代码是否正确. 如果不正确, 会根据报错信息进行修改. 循环往复, 直到测试通过.</p><p>也就是需要自己更多理解业务, 需要手动写的时候并不太多, 如果测试用例代码和业务代码都不正确, Agent 既不能根据业务写出正确用例, 也不能根据用例写出正确业务代码, 这种情况才会出现 debug 较久的情况.</p><h2 id=总结>总结</h2><p>理解大模型的 token 消耗机制, 输入的上下文很便宜，输出的代码较贵，文件中未修改的代码部分可能也算作输出, 证据是很多无需修改的代码也会缓慢输出.</p><p>因此应尽量控制单文件的大小, 可以在使用中感受 Agent 在处理大文件和小文件时, 响应速度上的差异, 这个差异是非常明显的.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-6db967f3a612d497f5c49bf8e49f3481>Copilot使用入门</h1><div class="td-byline mb-4"><time datetime=2024-06-28 class=text-body-secondary>Friday, June 28, 2024</time></div><p><a href=https://qingteng.feishu.cn/minutes/obcnj9f86gvr3o863mb88p99>视频分享</a></p><ul><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#copilot-labs-%e8%83%bd%e5%8a%9b>Copilot Labs 能力</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#copilot-%e6%98%af%e4%bb%80%e4%b9%88>Copilot 是什么</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e7%90%86%e8%a7%a3>理解</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e5%bb%ba%e8%ae%ae>建议</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e8%b0%83%e8%af%95>调试</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e6%a3%80%e8%a7%86>检视</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e9%87%8d%e6%9e%84>重构</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e6%96%87%e6%a1%a3>文档</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e4%bd%bf%e7%94%a8-custom-%e6%89%a9%e5%b1%95-copilot-%e8%be%b9%e7%95%8c>使用 Custom 扩展 Copilot 边界</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e8%8e%b7%e5%be%97%e6%9b%b4%e4%b8%93%e4%b8%9a%e7%9a%84%e5%bb%ba%e8%ae%ae>获得更专业的建议</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e7%ba%af%e6%96%87%e6%9c%ac%e7%9a%84%e5%bb%ba%e8%ae%ae>纯文本的建议</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e8%ae%be%e7%bd%ae%e9%a1%b9>设置项</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e6%95%b0%e6%8d%ae%e5%ae%89%e5%85%a8>数据安全</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98>常见问题</a></li></ul><p>GitHub Copilot 是一款基于机器学习的代码补全工具，能帮助你更快速地编写代码并提升编码效率。</p><h2 id=copilot-labs-能力>Copilot Labs 能力</h2><table><thead><tr><th>能力</th><th>说明</th><th>备注</th><th>example</th></tr></thead><tbody><tr><td><code>Explain</code></td><td>生成代码片段的解释说明</td><td>有高级选项定制提示词, 更清晰说明自己的需求</td><td><img src=https://s2.loli.net/2023/05/06/BHCu27UmD19Nwit.png alt="picture 1"></td></tr><tr><td><code>Show example code</code></td><td>生成代码片段的示例代码</td><td>有高级选项定制</td><td><img src=https://s2.loli.net/2023/05/06/9cCew5yvSjrX2DF.png alt="picture 2"></td></tr><tr><td><code>Language Translation</code></td><td>生成代码片段的翻译</td><td>此翻译是基于编程语言的翻译, 比如<em>C++ -> Python</em></td><td><img src=https://s2.loli.net/2023/05/06/1SIolbdY3fCimPx.png alt="picture 3"></td></tr><tr><td><code>Readable</code></td><td>提高一段代码的可读性</td><td>不是简单的格式化, 是真正的可读性提升</td><td><img src=https://s2.loli.net/2023/05/06/pYxH6isGqr7Sh14.png alt="picture 4"></td></tr><tr><td><code>Add Types</code></td><td>类型推测</td><td>将自动类型的变量改为明确的类型</td><td><img src=https://s2.loli.net/2023/05/06/rDeh9dtjbPHl8yG.png alt="picture 5"></td></tr><tr><td><code>Fix bug</code></td><td>修复 bug</td><td>修复一些常见的 bug</td><td><img src=https://s2.loli.net/2023/05/06/h8AfL65qSOn9BJ7.png alt="picture 6"></td></tr><tr><td><code>Debug</code></td><td>使代码更容易调试</td><td>增加打印日志, 或增加临时变量以用于断点</td><td><img src=https://s2.loli.net/2023/05/06/adW8QO3yfTZpx5o.png alt="picture 7"></td></tr><tr><td><code>Clean</code></td><td>清理代码</td><td>清理代码的无用部分, 注释/打印/废弃代码等</td><td><img src=https://s2.loli.net/2023/05/06/kGdpSLoOtJuBvmf.png alt="picture 8"></td></tr><tr><td><code>List steps</code></td><td>列出代码的步骤</td><td>有的代码的执行严格依赖顺序, 需要明确注释其执行顺序</td><td><img src=https://s2.loli.net/2023/05/06/gXM19C2NBVYpIKO.png alt="picture 9"></td></tr><tr><td><code>Make robust</code></td><td>使代码更健壮</td><td>考虑边界/多线程/重入等</td><td><img src=https://s2.loli.net/2023/05/06/eMawki5IySGKf4U.png alt="picture 10"></td></tr><tr><td><code>Chunk</code></td><td>将代码分块</td><td>一般希望函数有效行数&lt;=50, 嵌套&lt;=4, 扇出&lt;=7, 圈复杂度&lt;=20</td><td><img src=https://s2.loli.net/2023/05/06/x7LRskn52iTY8b1.png alt="picture 11"></td></tr><tr><td><code>Document</code></td><td>生成代码的文档</td><td>通过写注释生成代码, 还可以通过代码生成注释和文档</td><td><img src=https://s2.loli.net/2023/05/06/HPJkC7zp518w3fI.png alt="picture 12"></td></tr><tr><td><code>Custom</code></td><td>自定义操作</td><td>告诉 copilot 如何操作你的代码</td><td><img src=https://s2.loli.net/2023/05/06/ro3ziwAekLS7qyt.png alt="picture 13"></td></tr></tbody></table><h2 id=copilot-是什么>Copilot 是什么</h2><p><a href=https://github.com/features/copilot/>官网</a> 的介绍简单明了：<strong>Your AI pair programmer</strong> —— 你的结对程序员</p><blockquote><p><a href=https://zh.wikipedia.org/wiki/%E7%BB%93%E5%AF%B9%E7%BC%96%E7%A8%8B>结对编程</a>：是一种敏捷软件开发方法，两个程序员在同一台计算机前协作：一人键入代码，另一人审视每行代码。角色时常互换，确保逻辑严谨、问题预防。</p></blockquote><p>Copilot 通过以下方式参与编码工作, 实现扮演结对程序员这一角色.</p><ul><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e7%90%86%e8%a7%a3>理解</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e5%bb%ba%e8%ae%ae>建议</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e8%b0%83%e8%af%95>调试</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e6%a3%80%e8%a7%86>检视</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e9%87%8d%e6%9e%84>重构</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e6%96%87%e6%a1%a3>文档</a></li></ul><h2 id=理解>理解</h2><p>Copilot 是个大语言模型, 它不能理解我们的代码, 我们也不能理解 Copilot 的模型, 这里的理解是一名程序员与一群程序员之间的相互理解. 大家基于一些共识而一起写代码.</p><p><img src=https://s2.loli.net/2023/05/06/6kDSKoqdOQuB4EC.png alt="picture 14"></p><p>Copilot 搜集信息以理解上下文, 信息包括:</p><ul><li>正在编辑的代码</li><li>关联文件</li><li>IDE 已打开文件</li><li>库地址</li><li>文件路径</li></ul><p>Copilot 不仅仅是通过一行注释去理解, 它搜集了足够多的上下文信息来理解下一步将要做什么.</p><h2 id=建议>建议</h2><table><thead><tr><th>整段建议</th><th>inline 建议</th></tr></thead><tbody><tr><td><img src=https://s2.loli.net/2023/05/06/DK6r2FiIwCA5sWV.png alt="picture 15"></td><td><img src=https://s2.loli.net/2023/05/06/m4vyoeIOGscfHla.png alt="picture 16"></td></tr></tbody></table><p>众所周知，最常见的获取建议方式是通过描述需求的注释而非直接编写代码，从而引导 GitHub Copilot 给出整段建议. 但这可能会造成注释冗余的问题, 注释不是越多越好, 注释可以帮助理解, 但它不是代码主体. 良好的代码没有注释也清晰明了, 依靠的是合适的命名, 合理的设计以及清晰的逻辑. 使用 inline 建议时, 只要给出合适的变量名/函数名/类名, Copilot 总能给出合适的建议.</p><p>除了合适的外部输入外, Copilot 也支持支持根据已有的代码片段给出建议, <code>Copilot Labs</code>-><code>Show example code</code>可以帮助生成指定函数的示例代码, 只需要选中代码, 点击<code>Show example code</code>.</p><p><code>Ctrl</code>+<code>Enter</code>, 总是能给人非常多的启发, 我创建了三个文件, 一个 main.cpp 空文件, 一个 calculator.h 空文件, 在 calculator.cpp 中实现"加"和"减", Copilot 给出了如下建议内容:</p><ol><li>添加"乘"和"除"的实现</li><li>在 main 中调用"加减乘除"的实现</li><li>calculator 静态库的创建和使用方法</li><li>main 函数的运行结果, 并且结果正确</li><li>calculator.h 头文件的建议内容</li><li>g++编译命令</li><li>gtest 用例</li><li>CMakeLists.txt 的内容, 并包含测试</li><li>objdump -d main > main.s 查看汇编代码, 并显示了汇编代码</li><li>ar 查看静态库的内容, 并显示了静态库的内容</li></ol><p>默认配置下, 每次敲击<code>Ctrl</code>+<code>Enter</code>展示的内容差异很大, 无法回看上次生成的内容, 如果需要更稳定的生成内容, 可以设置<code>temperature</code>的值[0, 1]. 值越小, 生成的内容越稳定; 值越大, 生成的内容越难以捉摸.<br>以上建议内容远超了日常使用的一般建议内容, 可能是由于工程确实过于简单, 一旦把编译文件, 头文件写全, 建议就不会有这么多了, 但它仍然常常具有很好的启发作用.</p><p>使用 Copilot 建议的<a href="https://docs.github.com/en/copilot/configuring-github-copilot/configuring-github-copilot-in-your-environment?tool=vscode#keyboard-shortcuts-for-github-copilot-2">快捷键</a></p><table><thead><tr><th style=text-align:left>Action</th><th style=text-align:left>Shortcut</th><th style=text-align:left>Command name</th></tr></thead><tbody><tr><td style=text-align:left>接受 inline 建议</td><td style=text-align:left><code>Tab</code></td><td style=text-align:left>editor.action.inlineSuggest.commit</td></tr><tr><td style=text-align:left>忽略建议</td><td style=text-align:left><code>Esc</code></td><td style=text-align:left>editor.action.inlineSuggest.hide</td></tr><tr><td style=text-align:left>显示下一条 inline 建议</td><td style=text-align:left><code>Alt</code>+<code>]</code></td><td style=text-align:left>editor.action.inlineSuggest.showNext</td></tr><tr><td style=text-align:left>显示上一条 inline 建议</td><td style=text-align:left><code>Alt</code>+<code>[</code></td><td style=text-align:left>editor.action.inlineSuggest.showPrevious</td></tr><tr><td style=text-align:left>触发 inline 建议</td><td style=text-align:left><code>Alt</code>+<code>\</code></td><td style=text-align:left>editor.action.inlineSuggest.trigger</td></tr><tr><td style=text-align:left>在单独面板显示更多建议</td><td style=text-align:left><code>Ctrl</code>+<code>Enter</code></td><td style=text-align:left>github.copilot.generate</td></tr></tbody></table><h2 id=调试>调试</h2><p>一般两种调试方式, 打印和断点.</p><ul><li>Copilot 可以帮助自动生成打印代码, 根据上下文选用格式的打印或日志.</li><li>Copilot 可以帮助修改已有代码结构, 提供方便的断点位置. 一些嵌套风格的代码难以打断点, Copilot 可以直接修改它们.</li></ul><p>Copilot Labs 预置了以下功能:</p><ul><li><strong>Debug</strong>, 生成调试代码, 例如打印, 断点, 以及其他调试代码.</li></ul><h2 id=检视>检视</h2><p>检视是相互的, 我们和 copilot 需要经常相互检视, 不要轻信快速生成的代码.</p><p>Copilot Labs 预置了以下功能:</p><ul><li><strong>Fix bug</strong>, 直接修复它发现的 bug, 需要先保存好自己的代码, 仔细检视 Copilot 的修改.</li><li><strong>Make robust</strong>, 使代码更健壮, Copilot 会发现未处理的情况, 生成改进代码, 我们应该受其启发, 想的更缜密一些.</li></ul><h2 id=重构>重构</h2><p>Copilot Labs 预置了以下功能:</p><ul><li><strong>Readable</strong>, 提高可读性, 真正的提高可读性, 而不是简单的格式化, 但是要务必小心的检视 Copilot 的修改.</li><li><strong>Clean</strong>, 使代码更简洁, 去除多余的代码.</li><li><strong>Chunk</strong>, 使代码更易于理解, 将代码分块, 将一个大函数分成多个小函数.</li></ul><h2 id=文档>文档</h2><p>Copilot Labs 预置了以下功能:</p><ul><li><strong>Document</strong>, 生成文档, 例如函数注释, 以及其他文档.</li></ul><h2 id=使用-custom-扩展-copilot-边界>使用 Custom 扩展 Copilot 边界</h2><p><code>Custom</code>不太起眼, 但它让 Copilot 具有无限可能. 我们可以将它理解为一种新的编程语言, 这种编程语言就是英语或者中文.</p><p>你可以通过 <code>Custom</code> 输入</p><ul><li><p><code>移除注释代码</code><br><img src=https://s2.loli.net/2023/05/06/zi9xnmraVTNCGW3.png alt="picture 17"></p></li><li><p><code>增加乘除的能力</code><br><img src=https://s2.loli.net/2023/05/06/W32hnFydZvkPltc.png alt="picture 18"></p></li><li><p><code>改写为go</code><br><img src=https://s2.loli.net/2023/05/06/9p1yRdjJacEOBDx.png alt="picture 19"></p></li><li><p><code>添加三角函数计算</code><br><img src=https://s2.loli.net/2023/05/06/QX6zJDxjhnvKwmL.png alt="picture 20"></p></li><li><p><code>添加微分计算</code>, 中文这里不好用了, 使用 <code>support calculate differential</code>, 在低温模式时, 没有靠谱答案, 高温模式时, 有几个离谱答案.</p></li></ul><p>在日常工作中, 随时可以向 Copilot 提出自己的需求, 通过 <code>Custom</code> 能力, 可以让 Copilot 帮助完成许多想要的操作.</p><p>一些例子:</p><table><thead><tr><th>prompts</th><th>说明</th></tr></thead><tbody><tr><td><code>generate the cmake file</code></td><td>生成 cmake 文件</td></tr><tr><td><code>generate 10 test cases for tan()</code></td><td>生成 10 个测试用例</td></tr><tr><td><code>format like google style</code></td><td>格式化代码</td></tr><tr><td><code>考虑边界情况</code></td><td>考虑边界情况</td></tr><tr><td><code>确认释放内存</code></td><td>确认释放内存</td></tr></tbody></table><p><code>Custom</code> 用法充满想象力, 但有时也不那么靠谱, 建议使用前保存好代码, 然后好好检视它所作的修改.</p><h2 id=获得更专业的建议>获得更专业的建议</h2><p>给 Copilot 的提示越清晰, 它给的建议越准确, 专业的提示可以获得更专业的建议.
许多不合适的代码既不影响代码编译, 也不影响业务运行, 但影响可读性, 可维护性, 扩展性, 复用, 这些特性也非常重要, 如果希望获得更专业的建议, 我们最好了解一些最佳实践的英文名称.</p><ul><li>首先是使用可被理解的英文, 可以通过看开源项目学习英语.</li><li><a href=https://github.com/kettanaito/naming-cheatsheet>命名约定</a>, 命名是概念最基础的定义, 好的命名可以避免产生歧义, 避免阅读者陷入业务细节, 从而提高代码的可读性, 也是一种最佳实践.<ul><li>通常只需要一个合理的变量名, Copilot 就能给出整段的靠谱建议.</li></ul></li><li><a href=https://en.wikipedia.org/wiki/Software_design_pattern>设计模式列表</a>, 设计模式是一种解决问题的模板, 针对不同问题合理取舍<a href=https://en.wikipedia.org/wiki/SOLID>SOLID</a>设计基本原则, 节省方案设计时间, 提高代码的质量.<ul><li>只需要写出所需要的模式名称, Copilot 就能生成完整代码片段.</li></ul></li><li><a href=https://en.wikipedia.org/wiki/List_of_algorithms>算法列表</a>, 好的算法是用来解决一类问题的高度智慧结晶, 开发者需自行将具体问题抽象, 将数据抽象后输入到算法.<ul><li>算法代码通常是通用的, 只需要写出算法名称, Copilot 就能生成算法代码片段, 并且 Copilot 总是能巧妙的将上下文的数据结构合理运用到算法中.</li></ul></li></ul><h2 id=纯文本的建议>纯文本的建议</h2><table><thead><tr><th>en</th><th>zh</th></tr></thead><tbody><tr><td>GitHub Copilot uses the OpenAI Codex to suggest code and entire functions in real-time, right from your editor.</td><td>GitHub Copilot 使用 OpenAI Codex 在编辑器中实时提供代码和整个函数的建议。</td></tr><tr><td>Trained on billions of lines of code, GitHub Copilot turns natural language prompts into coding suggestions across dozens of languages.</td><td>通过数十亿行代码的训练，GitHub Copilot 将自然语言提示转换为跨语言的编码建议。</td></tr><tr><td>Don&rsquo;t fly solo. Developers all over the world use GitHub Copilot to code faster, focus on business logic over boilerplate, and do what matters most: building great software.</td><td>不要孤军奋战。世界各地的开发人员都在使用 GitHub Copilot 来更快地编码，专注于业务逻辑而不是样板代码，并且做最重要的事情：构建出色的软件。</td></tr><tr><td>Focus on solving bigger problems. Spend less time creating boilerplate and repetitive code patterns, and more time on what matters: building great software. Write a comment describing the logic you want and GitHub Copilot will immediately suggest code to implement the solution.</td><td>专注于解决更大的问题。花更少的时间创建样板和重复的代码模式，更多的时间在重要的事情上：构建出色的软件。编写描述您想要的逻辑的注释，GitHub Copilot 将立即提供代码以实现该解决方案。</td></tr><tr><td>Get AI-based suggestions, just for you. GitHub Copilot shares recommendations based on the project&rsquo;s context and style conventions. Quickly cycle through lines of code, complete function suggestions, and decide which to accept, reject, or edit.</td><td>获得基于 AI 的建议，只为您。GitHub Copilot 根据项目的上下文和风格约定共享建议。快速循环代码行，完成函数建议，并决定接受，拒绝或编辑哪个。</td></tr><tr><td>Code confidently in unfamiliar territory. Whether you’re working in a new language or framework, or just learning to code, GitHub Copilot can help you find your way. Tackle a bug, or learn how to use a new framework without spending most of your time spelunking through the docs or searching the web.</td><td>在不熟悉的领域自信地编码。无论您是在新的语言或框架中工作，还是刚刚开始学习编码，GitHub Copilot 都可以帮助您找到自己的方式。解决 bug，或者在不花费大部分时间在文档或搜索引擎中寻找的情况下学习如何使用新框架。</td></tr></tbody></table><p>这些翻译都由 Copilot 生成, 不能确定这些建议是基于模型生成, 还是基于翻译行为产生. 事实上你在表的<code>en</code>列中写的任何英语内容, 都可以被 Copilot 翻译(生成)到<code>zh</code>列中的内容.</p><p><img src=https://s2.loli.net/2023/05/06/qMtGlBIr1ofxp35.gif alt="picture 21"></p><h2 id=设置项>设置项</h2><p>客户端设置项</p><table><thead><tr><th>设置项</th><th>说明</th><th>备注</th></tr></thead><tbody><tr><td>temperature</td><td>采样温度</td><td>0.0 - 1.0, 0.0 生成最常见的代码片段, 1.0 生成最不常见更随机的代码片段</td></tr><tr><td>length</td><td>生成代码建议的最大长度</td><td>默认 500</td></tr><tr><td>inlineSuggestCount</td><td>生成行内建议的数量</td><td>默认 3</td></tr><tr><td>listCount</td><td>生成建议的数量</td><td>默认 10</td></tr><tr><td>top_p</td><td>优先展示概率前 N 的建议</td><td>默认展示全部可能的建议</td></tr></tbody></table><p><a href=https://github.com/settings/copilot>个人账户设置</a>有两项设置, 一个是版权相关, 一个是隐私相关.</p><ul><li>是否使用开源代码提供建议, 主要用于规避 Copilot 生成的代码片段中的版权问题, 避免开源协议限制.</li><li>是否允许使用个人的代码片段改进产品, 避免隐私泄露风险.</li></ul><h2 id=数据安全>数据安全</h2><p>Copilot 的信息收集</p><ul><li>商用版<ul><li>功能使用信息, 可能包含个人信息</li><li>搜集代码片段, 提供建议后立刻丢弃, <strong>不保留任何代码片段</strong></li><li>数据共享, GitHub, Microsoft, OpenAI</li></ul></li><li>个人版<ul><li>功能使用信息, 可能包含个人信息</li><li>搜集代码片段, 提供建议后, 根据个人 telemetry 设置, 保留或丢弃</li><li>代码片段包含, 正在编辑的代码, 关联文件, IDE 已打开文件, 库地址, 文件路径</li><li>数据共享, GitHub, Microsoft, OpenAI</li><li>代码数据保护, 1. 加密. 2. Copilot 团队相关的 Github/OpenAI 的部分员工可看. 3. 访问时需基于角色的访问控制和多因素验证</li><li>避免代码片段被使用(保留或训练), 1. <a href=https://github.com/settings/copilot>设置</a> 2. 联系 <a href=https://support.github.com/request>Copilot 团队</a></li><li>私有代码是否会被使用? 不会.</li><li>是否会输出个人信息(姓名生日等)? 少见, 还在改进.</li></ul></li><li><a href=https://docs.github.com/en/site-policy/privacy-policies/>详细隐私声明</a></li></ul><h2 id=常见问题>常见问题</h2><ul><li>Copilot 的训练数据, 来自 Github 的公开库.</li><li>Copilot 写的代码完美吗? 不一定.</li><li>可以为新平台写代码吗? 暂时能力有限.</li><li>如何更好的使用 Copilot? 拆分代码为小函数, 用自然语言描述函数的功能, 以及输入输出, 使用有具体意义的变量名和函数名.</li><li>Copilot 生成的代码会有 bug 吗? 当然无法避免.</li><li>Copilot 生成的代码可以直接使用吗? 不一定, 有时候需要修改.</li><li>Copilot 生成的代码可以用于商业项目吗? 可以.<ul><li>Copilot 生成的代码属于 Copilot 的知识产权吗? 不属于.</li><li>Copilot 是从训练集里拷贝的代码吗? Copilot 不拷贝代码, 极低概率会出现超过 150 行代码能匹配到训练集, 以下两种情况会出现<ul><li>在上下文信息非常少时</li><li>是通用问题的解决方案</li></ul></li><li>如何避免与公开代码重复, 设置<a href=https://docs.github.com/en/copilot/configuring-github-copilot/configuring-github-copilot-settings-on-githubcom>filter</a><br><img src=https://s2.loli.net/2023/05/06/JiK8rH4sbAXFLIQ.png alt="picture 22"></li></ul></li><li>如何正确的使用 Copilot 生成的代码? 1. 自行测试/检视生成代码; 2. 不要在检视前自动编译或运行生成的代码.</li><li>Copilot 是否在每种自然语言都有相同的表现? 最佳表现是英语.</li><li>Copilot 是否会生成冒犯性内容? 已有过滤, 但是不排除可能出现.</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-182cd9a0d38de14cb85a6e5d3ce0a687>Copilot使用入门</h1><div class="td-byline mb-4"><time datetime=2024-06-28 class=text-body-secondary>Friday, June 28, 2024</time></div><ul><li><input disabled type=checkbox> 文档已过期</li></ul><p><a href=https://qingteng.feishu.cn/minutes/obcnj9f86gvr3o863mb88p99>视频分享</a></p><ul><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#copilot-labs-%e8%83%bd%e5%8a%9b>Copilot Labs 能力</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#copilot-%e6%98%af%e4%bb%80%e4%b9%88>Copilot 是什么</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e7%90%86%e8%a7%a3>理解</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e5%bb%ba%e8%ae%ae>建议</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e8%b0%83%e8%af%95>调试</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e6%a3%80%e8%a7%86>检视</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e9%87%8d%e6%9e%84>重构</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e6%96%87%e6%a1%a3>文档</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e4%bd%bf%e7%94%a8-custom-%e6%89%a9%e5%b1%95-copilot-%e8%be%b9%e7%95%8c>使用 Custom 扩展 Copilot 边界</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e8%8e%b7%e5%be%97%e6%9b%b4%e4%b8%93%e4%b8%9a%e7%9a%84%e5%bb%ba%e8%ae%ae>获得更专业的建议</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e7%ba%af%e6%96%87%e6%9c%ac%e7%9a%84%e5%bb%ba%e8%ae%ae>纯文本的建议</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e8%ae%be%e7%bd%ae%e9%a1%b9>设置项</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e6%95%b0%e6%8d%ae%e5%ae%89%e5%85%a8>数据安全</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98>常见问题</a></li></ul><p>GitHub Copilot 是一款基于机器学习的代码补全工具，能帮助你更快速地编写代码并提升编码效率。</p><h2 id=copilot-labs-能力>Copilot Labs 能力</h2><table><thead><tr><th>能力</th><th>说明</th><th>备注</th><th>example</th></tr></thead><tbody><tr><td><code>Explain</code></td><td>生成代码片段的解释说明</td><td>有高级选项定制提示词, 更清晰说明自己的需求</td><td><img src=https://s2.loli.net/2023/05/06/BHCu27UmD19Nwit.png alt="picture 1"></td></tr><tr><td><code>Show example code</code></td><td>生成代码片段的示例代码</td><td>有高级选项定制</td><td><img src=https://s2.loli.net/2023/05/06/9cCew5yvSjrX2DF.png alt="picture 2"></td></tr><tr><td><code>Language Translation</code></td><td>生成代码片段的翻译</td><td>此翻译是基于编程语言的翻译, 比如<em>C++ -> Python</em></td><td><img src=https://s2.loli.net/2023/05/06/1SIolbdY3fCimPx.png alt="picture 3"></td></tr><tr><td><code>Readable</code></td><td>提高一段代码的可读性</td><td>不是简单的格式化, 是真正的可读性提升</td><td><img src=https://s2.loli.net/2023/05/06/pYxH6isGqr7Sh14.png alt="picture 4"></td></tr><tr><td><code>Add Types</code></td><td>类型推测</td><td>将自动类型的变量改为明确的类型</td><td><img src=https://s2.loli.net/2023/05/06/rDeh9dtjbPHl8yG.png alt="picture 5"></td></tr><tr><td><code>Fix bug</code></td><td>修复 bug</td><td>修复一些常见的 bug</td><td><img src=https://s2.loli.net/2023/05/06/h8AfL65qSOn9BJ7.png alt="picture 6"></td></tr><tr><td><code>Debug</code></td><td>使代码更容易调试</td><td>增加打印日志, 或增加临时变量以用于断点</td><td><img src=https://s2.loli.net/2023/05/06/adW8QO3yfTZpx5o.png alt="picture 7"></td></tr><tr><td><code>Clean</code></td><td>清理代码</td><td>清理代码的无用部分, 注释/打印/废弃代码等</td><td><img src=https://s2.loli.net/2023/05/06/kGdpSLoOtJuBvmf.png alt="picture 8"></td></tr><tr><td><code>List steps</code></td><td>列出代码的步骤</td><td>有的代码的执行严格依赖顺序, 需要明确注释其执行顺序</td><td><img src=https://s2.loli.net/2023/05/06/gXM19C2NBVYpIKO.png alt="picture 9"></td></tr><tr><td><code>Make robust</code></td><td>使代码更健壮</td><td>考虑边界/多线程/重入等</td><td><img src=https://s2.loli.net/2023/05/06/eMawki5IySGKf4U.png alt="picture 10"></td></tr><tr><td><code>Chunk</code></td><td>将代码分块</td><td>一般希望函数有效行数&lt;=50, 嵌套&lt;=4, 扇出&lt;=7, 圈复杂度&lt;=20</td><td><img src=https://s2.loli.net/2023/05/06/x7LRskn52iTY8b1.png alt="picture 11"></td></tr><tr><td><code>Document</code></td><td>生成代码的文档</td><td>通过写注释生成代码, 还可以通过代码生成注释和文档</td><td><img src=https://s2.loli.net/2023/05/06/HPJkC7zp518w3fI.png alt="picture 12"></td></tr><tr><td><code>Custom</code></td><td>自定义操作</td><td>告诉 copilot 如何操作你的代码</td><td><img src=https://s2.loli.net/2023/05/06/ro3ziwAekLS7qyt.png alt="picture 13"></td></tr></tbody></table><h2 id=copilot-是什么>Copilot 是什么</h2><p><a href=https://github.com/features/copilot/>官网</a> 的介绍简单明了：<strong>Your AI pair programmer</strong> —— 你的结对程序员</p><blockquote><p><a href=https://zh.wikipedia.org/wiki/%E7%BB%93%E5%AF%B9%E7%BC%96%E7%A8%8B>结对编程</a>：是一种敏捷软件开发方法，两个程序员在同一台计算机前协作：一人键入代码，另一人审视每行代码。角色时常互换，确保逻辑严谨、问题预防。</p></blockquote><p>Copilot 通过以下方式参与编码工作, 实现扮演结对程序员这一角色.</p><ul><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e7%90%86%e8%a7%a3>理解</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e5%bb%ba%e8%ae%ae>建议</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e8%b0%83%e8%af%95>调试</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e6%a3%80%e8%a7%86>检视</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e9%87%8d%e6%9e%84>重构</a></li><li><a href=/zh-cn/blog/2024/06/28/copilot%E4%BD%BF%E7%94%A8%E5%85%A5%E9%97%A8/#%e6%96%87%e6%a1%a3>文档</a></li></ul><h2 id=理解>理解</h2><p>Copilot 是个大语言模型, 它不能理解我们的代码, 我们也不能理解 Copilot 的模型, 这里的理解是一名程序员与一群程序员之间的相互理解. 大家基于一些共识而一起写代码.</p><p><img src=https://s2.loli.net/2023/05/06/6kDSKoqdOQuB4EC.png alt="picture 14"></p><p>Copilot 搜集信息以理解上下文, 信息包括:</p><ul><li>正在编辑的代码</li><li>关联文件</li><li>IDE 已打开文件</li><li>库地址</li><li>文件路径</li></ul><p>Copilot 不仅仅是通过一行注释去理解, 它搜集了足够多的上下文信息来理解下一步将要做什么.</p><h2 id=建议>建议</h2><table><thead><tr><th>整段建议</th><th>inline 建议</th></tr></thead><tbody><tr><td><img src=https://s2.loli.net/2023/05/06/DK6r2FiIwCA5sWV.png alt="picture 15"></td><td><img src=https://s2.loli.net/2023/05/06/m4vyoeIOGscfHla.png alt="picture 16"></td></tr></tbody></table><p>众所周知，最常见的获取建议方式是通过描述需求的注释而非直接编写代码，从而引导 GitHub Copilot 给出整段建议. 但这可能会造成注释冗余的问题, 注释不是越多越好, 注释可以帮助理解, 但它不是代码主体. 良好的代码没有注释也清晰明了, 依靠的是合适的命名, 合理的设计以及清晰的逻辑. 使用 inline 建议时, 只要给出合适的变量名/函数名/类名, Copilot 总能给出合适的建议.</p><p>除了合适的外部输入外, Copilot 也支持支持根据已有的代码片段给出建议, <code>Copilot Labs</code>-><code>Show example code</code>可以帮助生成指定函数的示例代码, 只需要选中代码, 点击<code>Show example code</code>.</p><p><code>Ctrl</code>+<code>Enter</code>, 总是能给人非常多的启发, 我创建了三个文件, 一个 main.cpp 空文件, 一个 calculator.h 空文件, 在 calculator.cpp 中实现"加"和"减", Copilot 给出了如下建议内容:</p><ol><li>添加"乘"和"除"的实现</li><li>在 main 中调用"加减乘除"的实现</li><li>calculator 静态库的创建和使用方法</li><li>main 函数的运行结果, 并且结果正确</li><li>calculator.h 头文件的建议内容</li><li>g++编译命令</li><li>gtest 用例</li><li>CMakeLists.txt 的内容, 并包含测试</li><li>objdump -d main > main.s 查看汇编代码, 并显示了汇编代码</li><li>ar 查看静态库的内容, 并显示了静态库的内容</li></ol><p>默认配置下, 每次敲击<code>Ctrl</code>+<code>Enter</code>展示的内容差异很大, 无法回看上次生成的内容, 如果需要更稳定的生成内容, 可以设置<code>temperature</code>的值[0, 1]. 值越小, 生成的内容越稳定; 值越大, 生成的内容越难以捉摸.<br>以上建议内容远超了日常使用的一般建议内容, 可能是由于工程确实过于简单, 一旦把编译文件, 头文件写全, 建议就不会有这么多了, 但它仍然常常具有很好的启发作用.</p><p>使用 Copilot 建议的<a href="https://docs.github.com/en/copilot/configuring-github-copilot/configuring-github-copilot-in-your-environment?tool=vscode#keyboard-shortcuts-for-github-copilot-2">快捷键</a></p><table><thead><tr><th style=text-align:left>Action</th><th style=text-align:left>Shortcut</th><th style=text-align:left>Command name</th></tr></thead><tbody><tr><td style=text-align:left>接受 inline 建议</td><td style=text-align:left><code>Tab</code></td><td style=text-align:left>editor.action.inlineSuggest.commit</td></tr><tr><td style=text-align:left>忽略建议</td><td style=text-align:left><code>Esc</code></td><td style=text-align:left>editor.action.inlineSuggest.hide</td></tr><tr><td style=text-align:left>显示下一条 inline 建议</td><td style=text-align:left><code>Alt</code>+<code>]</code></td><td style=text-align:left>editor.action.inlineSuggest.showNext</td></tr><tr><td style=text-align:left>显示上一条 inline 建议</td><td style=text-align:left><code>Alt</code>+<code>[</code></td><td style=text-align:left>editor.action.inlineSuggest.showPrevious</td></tr><tr><td style=text-align:left>触发 inline 建议</td><td style=text-align:left><code>Alt</code>+<code>\</code></td><td style=text-align:left>editor.action.inlineSuggest.trigger</td></tr><tr><td style=text-align:left>在单独面板显示更多建议</td><td style=text-align:left><code>Ctrl</code>+<code>Enter</code></td><td style=text-align:left>github.copilot.generate</td></tr></tbody></table><h2 id=调试>调试</h2><p>一般两种调试方式, 打印和断点.</p><ul><li>Copilot 可以帮助自动生成打印代码, 根据上下文选用格式的打印或日志.</li><li>Copilot 可以帮助修改已有代码结构, 提供方便的断点位置. 一些嵌套风格的代码难以打断点, Copilot 可以直接修改它们.</li></ul><p>Copilot Labs 预置了以下功能:</p><ul><li><strong>Debug</strong>, 生成调试代码, 例如打印, 断点, 以及其他调试代码.</li></ul><h2 id=检视>检视</h2><p>检视是相互的, 我们和 copilot 需要经常相互检视, 不要轻信快速生成的代码.</p><p>Copilot Labs 预置了以下功能:</p><ul><li><strong>Fix bug</strong>, 直接修复它发现的 bug, 需要先保存好自己的代码, 仔细检视 Copilot 的修改.</li><li><strong>Make robust</strong>, 使代码更健壮, Copilot 会发现未处理的情况, 生成改进代码, 我们应该受其启发, 想的更缜密一些.</li></ul><h2 id=重构>重构</h2><p>Copilot Labs 预置了以下功能:</p><ul><li><strong>Readable</strong>, 提高可读性, 真正的提高可读性, 而不是简单的格式化, 但是要务必小心的检视 Copilot 的修改.</li><li><strong>Clean</strong>, 使代码更简洁, 去除多余的代码.</li><li><strong>Chunk</strong>, 使代码更易于理解, 将代码分块, 将一个大函数分成多个小函数.</li></ul><h2 id=文档>文档</h2><p>Copilot Labs 预置了以下功能:</p><ul><li><strong>Document</strong>, 生成文档, 例如函数注释, 以及其他文档.</li></ul><h2 id=使用-custom-扩展-copilot-边界>使用 Custom 扩展 Copilot 边界</h2><p><code>Custom</code>不太起眼, 但它让 Copilot 具有无限可能. 我们可以将它理解为一种新的编程语言, 这种编程语言就是英语或者中文.</p><p>你可以通过 <code>Custom</code> 输入</p><ul><li><p><code>移除注释代码</code><br><img src=https://s2.loli.net/2023/05/06/zi9xnmraVTNCGW3.png alt="picture 17"></p></li><li><p><code>增加乘除的能力</code><br><img src=https://s2.loli.net/2023/05/06/W32hnFydZvkPltc.png alt="picture 18"></p></li><li><p><code>改写为go</code><br><img src=https://s2.loli.net/2023/05/06/9p1yRdjJacEOBDx.png alt="picture 19"></p></li><li><p><code>添加三角函数计算</code><br><img src=https://s2.loli.net/2023/05/06/QX6zJDxjhnvKwmL.png alt="picture 20"></p></li><li><p><code>添加微分计算</code>, 中文这里不好用了, 使用 <code>support calculate differential</code>, 在低温模式时, 没有靠谱答案, 高温模式时, 有几个离谱答案.</p></li></ul><p>在日常工作中, 随时可以向 Copilot 提出自己的需求, 通过 <code>Custom</code> 能力, 可以让 Copilot 帮助完成许多想要的操作.</p><p>一些例子:</p><table><thead><tr><th>prompts</th><th>说明</th></tr></thead><tbody><tr><td><code>generate the cmake file</code></td><td>生成 cmake 文件</td></tr><tr><td><code>generate 10 test cases for tan()</code></td><td>生成 10 个测试用例</td></tr><tr><td><code>format like google style</code></td><td>格式化代码</td></tr><tr><td><code>考虑边界情况</code></td><td>考虑边界情况</td></tr><tr><td><code>确认释放内存</code></td><td>确认释放内存</td></tr></tbody></table><p><code>Custom</code> 用法充满想象力, 但有时也不那么靠谱, 建议使用前保存好代码, 然后好好检视它所作的修改.</p><h2 id=获得更专业的建议>获得更专业的建议</h2><p>给 Copilot 的提示越清晰, 它给的建议越准确, 专业的提示可以获得更专业的建议.
许多不合适的代码既不影响代码编译, 也不影响业务运行, 但影响可读性, 可维护性, 扩展性, 复用, 这些特性也非常重要, 如果希望获得更专业的建议, 我们最好了解一些最佳实践的英文名称.</p><ul><li>首先是使用可被理解的英文, 可以通过看开源项目学习英语.</li><li><a href=https://github.com/kettanaito/naming-cheatsheet>命名约定</a>, 命名是概念最基础的定义, 好的命名可以避免产生歧义, 避免阅读者陷入业务细节, 从而提高代码的可读性, 也是一种最佳实践.<ul><li>通常只需要一个合理的变量名, Copilot 就能给出整段的靠谱建议.</li></ul></li><li><a href=https://en.wikipedia.org/wiki/Software_design_pattern>设计模式列表</a>, 设计模式是一种解决问题的模板, 针对不同问题合理取舍<a href=https://en.wikipedia.org/wiki/SOLID>SOLID</a>设计基本原则, 节省方案设计时间, 提高代码的质量.<ul><li>只需要写出所需要的模式名称, Copilot 就能生成完整代码片段.</li></ul></li><li><a href=https://en.wikipedia.org/wiki/List_of_algorithms>算法列表</a>, 好的算法是用来解决一类问题的高度智慧结晶, 开发者需自行将具体问题抽象, 将数据抽象后输入到算法.<ul><li>算法代码通常是通用的, 只需要写出算法名称, Copilot 就能生成算法代码片段, 并且 Copilot 总是能巧妙的将上下文的数据结构合理运用到算法中.</li></ul></li></ul><h2 id=纯文本的建议>纯文本的建议</h2><table><thead><tr><th>en</th><th>zh</th></tr></thead><tbody><tr><td>GitHub Copilot uses the OpenAI Codex to suggest code and entire functions in real-time, right from your editor.</td><td>GitHub Copilot 使用 OpenAI Codex 在编辑器中实时提供代码和整个函数的建议。</td></tr><tr><td>Trained on billions of lines of code, GitHub Copilot turns natural language prompts into coding suggestions across dozens of languages.</td><td>通过数十亿行代码的训练，GitHub Copilot 将自然语言提示转换为跨语言的编码建议。</td></tr><tr><td>Don&rsquo;t fly solo. Developers all over the world use GitHub Copilot to code faster, focus on business logic over boilerplate, and do what matters most: building great software.</td><td>不要孤军奋战。世界各地的开发人员都在使用 GitHub Copilot 来更快地编码，专注于业务逻辑而不是样板代码，并且做最重要的事情：构建出色的软件。</td></tr><tr><td>Focus on solving bigger problems. Spend less time creating boilerplate and repetitive code patterns, and more time on what matters: building great software. Write a comment describing the logic you want and GitHub Copilot will immediately suggest code to implement the solution.</td><td>专注于解决更大的问题。花更少的时间创建样板和重复的代码模式，更多的时间在重要的事情上：构建出色的软件。编写描述您想要的逻辑的注释，GitHub Copilot 将立即提供代码以实现该解决方案。</td></tr><tr><td>Get AI-based suggestions, just for you. GitHub Copilot shares recommendations based on the project&rsquo;s context and style conventions. Quickly cycle through lines of code, complete function suggestions, and decide which to accept, reject, or edit.</td><td>获得基于 AI 的建议，只为您。GitHub Copilot 根据项目的上下文和风格约定共享建议。快速循环代码行，完成函数建议，并决定接受，拒绝或编辑哪个。</td></tr><tr><td>Code confidently in unfamiliar territory. Whether you’re working in a new language or framework, or just learning to code, GitHub Copilot can help you find your way. Tackle a bug, or learn how to use a new framework without spending most of your time spelunking through the docs or searching the web.</td><td>在不熟悉的领域自信地编码。无论您是在新的语言或框架中工作，还是刚刚开始学习编码，GitHub Copilot 都可以帮助您找到自己的方式。解决 bug，或者在不花费大部分时间在文档或搜索引擎中寻找的情况下学习如何使用新框架。</td></tr></tbody></table><p>这些翻译都由 Copilot 生成, 不能确定这些建议是基于模型生成, 还是基于翻译行为产生. 事实上你在表的<code>en</code>列中写的任何英语内容, 都可以被 Copilot 翻译(生成)到<code>zh</code>列中的内容.</p><p><img src=https://s2.loli.net/2023/05/06/qMtGlBIr1ofxp35.gif alt="picture 21"></p><h2 id=设置项>设置项</h2><p>客户端设置项</p><table><thead><tr><th>设置项</th><th>说明</th><th>备注</th></tr></thead><tbody><tr><td>temperature</td><td>采样温度</td><td>0.0 - 1.0, 0.0 生成最常见的代码片段, 1.0 生成最不常见更随机的代码片段</td></tr><tr><td>length</td><td>生成代码建议的最大长度</td><td>默认 500</td></tr><tr><td>inlineSuggestCount</td><td>生成行内建议的数量</td><td>默认 3</td></tr><tr><td>listCount</td><td>生成建议的数量</td><td>默认 10</td></tr><tr><td>top_p</td><td>优先展示概率前 N 的建议</td><td>默认展示全部可能的建议</td></tr></tbody></table><p><a href=https://github.com/settings/copilot>个人账户设置</a>有两项设置, 一个是版权相关, 一个是隐私相关.</p><ul><li>是否使用开源代码提供建议, 主要用于规避 Copilot 生成的代码片段中的版权问题, 避免开源协议限制.</li><li>是否允许使用个人的代码片段改进产品, 避免隐私泄露风险.</li></ul><h2 id=数据安全>数据安全</h2><p>Copilot 的信息收集</p><ul><li>商用版<ul><li>功能使用信息, 可能包含个人信息</li><li>搜集代码片段, 提供建议后立刻丢弃, <strong>不保留任何代码片段</strong></li><li>数据共享, GitHub, Microsoft, OpenAI</li></ul></li><li>个人版<ul><li>功能使用信息, 可能包含个人信息</li><li>搜集代码片段, 提供建议后, 根据个人 telemetry 设置, 保留或丢弃</li><li>代码片段包含, 正在编辑的代码, 关联文件, IDE 已打开文件, 库地址, 文件路径</li><li>数据共享, GitHub, Microsoft, OpenAI</li><li>代码数据保护, 1. 加密. 2. Copilot 团队相关的 Github/OpenAI 的部分员工可看. 3. 访问时需基于角色的访问控制和多因素验证</li><li>避免代码片段被使用(保留或训练), 1. <a href=https://github.com/settings/copilot>设置</a> 2. 联系 <a href=https://support.github.com/request>Copilot 团队</a></li><li>私有代码是否会被使用? 不会.</li><li>是否会输出个人信息(姓名生日等)? 少见, 还在改进.</li></ul></li><li><a href=https://docs.github.com/en/site-policy/privacy-policies/>详细隐私声明</a></li></ul><h2 id=常见问题>常见问题</h2><ul><li>Copilot 的训练数据, 来自 Github 的公开库.</li><li>Copilot 写的代码完美吗? 不一定.</li><li>可以为新平台写代码吗? 暂时能力有限.</li><li>如何更好的使用 Copilot? 拆分代码为小函数, 用自然语言描述函数的功能, 以及输入输出, 使用有具体意义的变量名和函数名.</li><li>Copilot 生成的代码会有 bug 吗? 当然无法避免.</li><li>Copilot 生成的代码可以直接使用吗? 不一定, 有时候需要修改.</li><li>Copilot 生成的代码可以用于商业项目吗? 可以.<ul><li>Copilot 生成的代码属于 Copilot 的知识产权吗? 不属于.</li><li>Copilot 是从训练集里拷贝的代码吗? Copilot 不拷贝代码, 极低概率会出现超过 150 行代码能匹配到训练集, 以下两种情况会出现<ul><li>在上下文信息非常少时</li><li>是通用问题的解决方案</li></ul></li><li>如何避免与公开代码重复, 设置<a href=https://docs.github.com/en/copilot/configuring-github-copilot/configuring-github-copilot-settings-on-githubcom>filter</a><br><img src=https://s2.loli.net/2023/05/06/JiK8rH4sbAXFLIQ.png alt="picture 22"></li></ul></li><li>如何正确的使用 Copilot 生成的代码? 1. 自行测试/检视生成代码; 2. 不要在检视前自动编译或运行生成的代码.</li><li>Copilot 是否在每种自然语言都有相同的表现? 最佳表现是英语.</li><li>Copilot 是否会生成冒犯性内容? 已有过滤, 但是不排除可能出现.</li></ul></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title="User mailing list" aria-label="User mailing list"><a target=_blank rel=noopener href=https://groups.google.com/forum/#!forum/jqknono aria-label="User mailing list"><i class=envelope></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Telegram aria-label=Telegram><a target=_blank rel=noopener href=https://t.me/jqknono aria-label=Telegram><i class="fab fa-telegram"></i></a></li></ul></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=GitHub aria-label=GitHub><a target=_blank rel=noopener href=https://github.com/jqknono aria-label=GitHub><i class="fab fa-github"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="User mailing list" aria-label="User mailing list"><a target=_blank rel=noopener href=https://groups.google.com/forum/#!forum/jqknono aria-label="User mailing list"><i class=envelope></i></a></li></ul></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"><span class=td-footer__copyright>&copy;
2015&ndash;2025
<span class=td-footer__authors>jqknono</span></span><span class=td-footer__all_rights_reserved>版权所有</span></div></div></div></footer></div><style>.markmap>svg{width:100%;height:300px}</style><script>window.markmap={autoLoader:{manual:!0,onReady(){const{autoLoader:e,builtInPlugins:t}=window.markmap;e.transformPlugins=t.filter(e=>e.name!=="prism")}}}</script><script src=https://cdn.jsdelivr.net/npm/markmap-autoloader></script><script src=/js/deflate.js></script><script src=/js/main.min.b1e0b5a38e56b9b7c83b3c554ad992a3a7eda6a3723bf21bf90386e93112058a.js integrity="sha256-seC1o45WubfIOzxVStmSo6ftpqNyO/Ib+QOG6TESBYo=" crossorigin=anonymous></script><script defer src=/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script></body></html>