<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>运维 on jqknono Blogs</title><link>https://blog.jqknono.com/zh-cn/tags/%E8%BF%90%E7%BB%B4/</link><description>Recent content in 运维 on jqknono Blogs</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Fri, 05 Dec 2025 11:51:04 +0800</lastBuildDate><atom:link href="https://blog.jqknono.com/zh-cn/tags/%E8%BF%90%E7%BB%B4/index.xml" rel="self" type="application/rss+xml"/><item><title>抢占服务器是个大便宜</title><link>https://blog.jqknono.com/zh-cn/blog/2025/12/05/%E6%8A%A2%E5%8D%A0%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%98%AF%E4%B8%AA%E5%A4%A7%E4%BE%BF%E5%AE%9C/</link><pubDate>Fri, 05 Dec 2025 11:51:04 +0800</pubDate><guid>https://blog.jqknono.com/zh-cn/blog/2025/12/05/%E6%8A%A2%E5%8D%A0%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%98%AF%E4%B8%AA%E5%A4%A7%E4%BE%BF%E5%AE%9C/</guid><description>&lt;p&gt;一直有个大便宜, 我从未在公开社区宣传过, 那就是阿里云的&lt;strong&gt;抢占服务器&lt;/strong&gt;非常划算.&lt;/p&gt;
&lt;h2 id="长期大折扣"&gt;长期大折扣&lt;/h2&gt;
&lt;p&gt;其在标题栏上写的&lt;em&gt;最高节省 90%&lt;/em&gt;, 并不夸张, 热门配置的服务器通常是乘以 20%的折扣, 也就是二折, 稍冷门的配置可以到 9%的折扣, 不到一折.&lt;/p&gt;
&lt;p&gt;热门服务器一类是小规格入门服务器, 如 2c2g,2c4g 等, 还有一类是&lt;em&gt;CPU/内存&lt;/em&gt;均衡型服务器, 如 1:2(4c8g), 1:4(4c16g,8c32g) 等, 这类服务器折扣少一点.&lt;/p&gt;
&lt;p&gt;冷门配置一般是指&lt;em&gt;CPU/内存&lt;/em&gt;不均衡的服务器, 如 1:8(8c64g), 1:1(8c8g) 等, 这类服务器折扣最多.&lt;/p&gt;
&lt;p&gt;今天查抢占服务器, 2c16g 的比 2c8g 的还便宜, 因为一个折扣到 9%, 一个折扣到 14%, 形成倒挂.&lt;/p&gt;
&lt;p&gt;阿里云抢占服务器的折扣率动态刷新, 我不清楚其算法如何, 但为我的使用场景节省了 85%的成本肯定是有的.&lt;/p&gt;
&lt;h2 id="抢占服务器使用前提"&gt;抢占服务器使用前提&lt;/h2&gt;
&lt;p&gt;使用抢占服务器的核心是将&lt;strong&gt;CPU/内存&lt;/strong&gt;和长期存储分离, 长期存储可以使用可分离的云盘, OSS, NAS, 数据库.&lt;/p&gt;
&lt;p&gt;其中云盘依赖于地域, 而抢占服务器的可用资源也和地域强相关, 因此尽管云盘是 IO 性能最强的稳定存储, 但并不能保证在所有地域都有抢占服务器可用, 我个人建议将其置为次选.&lt;/p&gt;
&lt;p&gt;其它三个存储都依赖网络, 而阿里云的内网通信免费, 尽管 IO 延迟可能较高, 但 IO 速率还可以, 主要是随机读写慢于云盘.&lt;/p&gt;
&lt;p&gt;OSS 是阿里云的对象存储, 适合存储主要用于&lt;strong&gt;读&lt;/strong&gt;的文件, 适合网络分享.&lt;/p&gt;
&lt;p&gt;NAS 是阿里云的网络存储, 适合存储各类文件, 读写均衡, 但不太适合公共分享.&lt;/p&gt;</description></item><item><title>建议先不要使用阿里云ESA_page功能</title><link>https://blog.jqknono.com/zh-cn/blog/2025/12/03/%E5%BB%BA%E8%AE%AE%E5%85%88%E4%B8%8D%E8%A6%81%E4%BD%BF%E7%94%A8%E9%98%BF%E9%87%8C%E4%BA%91esa_page%E5%8A%9F%E8%83%BD/</link><pubDate>Wed, 03 Dec 2025 19:16:52 +0800</pubDate><guid>https://blog.jqknono.com/zh-cn/blog/2025/12/03/%E5%BB%BA%E8%AE%AE%E5%85%88%E4%B8%8D%E8%A6%81%E4%BD%BF%E7%94%A8%E9%98%BF%E9%87%8C%E4%BA%91esa_page%E5%8A%9F%E8%83%BD/</guid><description>&lt;p&gt;这是 ESA Pages 功能的限制, 这个资源规模只够托管一个小网站. 如果是想托管长期更新的网站, 2000 个文件的限制太低.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;功能&lt;/th&gt;
&lt;th&gt;限制项&lt;/th&gt;
&lt;th&gt;限制&lt;/th&gt;
&lt;th&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;函数&lt;/td&gt;
&lt;td&gt;响应时间&lt;/td&gt;
&lt;td&gt;120 秒&lt;/td&gt;
&lt;td&gt;函数单次执行的响应时间不能超过 120 秒（等待 I/O 也算作 RT 时间）。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;等待时间&lt;/td&gt;
&lt;td&gt;10 秒&lt;/td&gt;
&lt;td&gt;网关等待 Functions 的时间，如果 Functions 在 10 秒内仍不返回任何数据，则网关会主动断开连接，向客户端返回 504 状态码。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;代码包大小&lt;/td&gt;
&lt;td&gt;4 MB&lt;/td&gt;
&lt;td&gt;每个函数的 JavaScript 代码文件大小上限。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;子请求数量&lt;/td&gt;
&lt;td&gt;4 个&lt;/td&gt;
&lt;td&gt;Functions 单次执行允许 fetch 的请求数量。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;开发语言&lt;/td&gt;
&lt;td&gt;JavaScript（ES6 语法）&lt;/td&gt;
&lt;td&gt;目前仅支持 JS，您需要有 JavaScript 编程能力。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Pages&lt;/td&gt;
&lt;td&gt;文件数&lt;/td&gt;
&lt;td&gt;2000 个&lt;/td&gt;
&lt;td&gt;每个 Pages 项目最多可上传 2000 个静态文件（如：HTML、CSS、JS、图片等）。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;单个文件大小&lt;/td&gt;
&lt;td&gt;25MB&lt;/td&gt;
&lt;td&gt;单个文件（如：视频、PDF、JS 包）最大支持 25MB。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;td&gt;包大小&lt;/td&gt;
&lt;td&gt;1024MB&lt;/td&gt;
&lt;td&gt;整个项目源码压缩包（deploy package）最大支持 1024MB。&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="参考文档"&gt;参考文档&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.alibabacloud.com/help/zh/edge-security-acceleration/esa/user-guide/what-is-functions-and-pages/?spm=a2c63.p38356.help-menu-2673927.d_2_14_0.3fc311f30eRxno"&gt;阿里云文档: ESA_page 功能限制&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>阿里巴巴ESA与OSS的坑</title><link>https://blog.jqknono.com/zh-cn/blog/2025/12/02/%E9%98%BF%E9%87%8C%E5%B7%B4%E5%B7%B4esa%E4%B8%8Eoss%E7%9A%84%E5%9D%91/</link><pubDate>Tue, 02 Dec 2025 18:10:45 +0800</pubDate><guid>https://blog.jqknono.com/zh-cn/blog/2025/12/02/%E9%98%BF%E9%87%8C%E5%B7%B4%E5%B7%B4esa%E4%B8%8Eoss%E7%9A%84%E5%9D%91/</guid><description>&lt;p&gt;早期阿里巴巴 ESA 说的是从 ESA 访问私有 OSS 流量免费, 后来改为了:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;当源站为阿里云 OSS 时，OSS 侧将按回源流出流量计费。若 OSS 所在地域非中国内地地区且将请求资源传输相应地区 ESA 节点时不收费。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;从此前的任意 ESA 节点回源 OSS 免费, 改为了&lt;em&gt;相应地区 ESA 节点回源非大陆 OSS 免费&lt;/em&gt;. 也就是如果 OSS 在韩国, 在开了 ESA 之后, 仅韩国人访问托管站点免费, 来自韩国以外地区的访问在一个缓存周期内会收一次 OSS 的回源流量费. 这个费用在 2025.10 及之前是免费的, 从 2025.11 开始收费.&lt;/p&gt;
&lt;p&gt;我的小站之前用了 9 个月都没收费, 从第十个月, 也就是从 2025.11 开始, 我这个月的 CDN 回源流出流量 11G, 收了 0.8 美元.&lt;/p&gt;
&lt;p&gt;现在我已不能再将阿里巴巴的产品当作免费产品推荐, 并且, 阿里巴巴没有任何通知, 连站内信都没有. 说明它的商业化很粗糙, 对用户非常不尊重. 我自己做个小 SaaS 产品都不敢这样对用户, 难怪着急要绑信用卡.&lt;/p&gt;
&lt;p&gt;阿里巴巴 ESA 的最新收费详见:
&lt;a href="https://www.alibabacloud.com/help/zh/edge-security-acceleration/esa/product-overview/basic-package-fee?spm=a2c63.p38356.help-menu-2673927.d_0_4_0.1f7e996f3LOyTd"&gt;https://www.alibabacloud.com/help/zh/edge-security-acceleration/esa/product-overview/basic-package-fee?spm=a2c63.p38356.help-menu-2673927.d_0_4_0.1f7e996f3LOyTd&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;老文档已经找不到了, 由于我此前九个月都没收费, 现在的收费很清晰, 因此我确定是 ESA 的收费策略发生了改变.&lt;/p&gt;</description></item></channel></rss>