<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>攻防 on Nono Blogs</title><link>https://blog.jqknono.com/zh-cn/tags/%E6%94%BB%E9%98%B2/</link><description>Recent content in 攻防 on Nono Blogs</description><generator>Hugo</generator><language>zh-cn</language><lastBuildDate>Tue, 31 Dec 2024 15:57:34 +0800</lastBuildDate><atom:link href="https://blog.jqknono.com/zh-cn/tags/%E6%94%BB%E9%98%B2/index.xml" rel="self" type="application/rss+xml"/><item><title>攻防</title><link>https://blog.jqknono.com/zh-cn/blog/attack-and-defense/</link><pubDate>Tue, 31 Dec 2024 15:57:34 +0800</pubDate><guid>https://blog.jqknono.com/zh-cn/blog/attack-and-defense/</guid><description/></item><item><title>某厂商防止DNS拦截的办法</title><link>https://blog.jqknono.com/zh-cn/blog/2024/12/13/%E6%9F%90%E5%8E%82%E5%95%86%E9%98%B2%E6%AD%A2dns%E6%8B%A6%E6%88%AA%E7%9A%84%E5%8A%9E%E6%B3%95/</link><pubDate>Fri, 13 Dec 2024 17:19:36 +0800</pubDate><guid>https://blog.jqknono.com/zh-cn/blog/2024/12/13/%E6%9F%90%E5%8E%82%E5%95%86%E9%98%B2%E6%AD%A2dns%E6%8B%A6%E6%88%AA%E7%9A%84%E5%8A%9E%E6%B3%95/</guid><description>&lt;p>近日发觉 DNS 公共服务有 IP 有异常访问行为, 每秒数十次重复的请求一个域名, 完全不遵循 DNS 协议, 不理会全局生存时间 (TTL)值.&lt;/p>
&lt;p>&lt;img src="https://img1.techfetch.dev/blog/202412131719062.png" alt="重复快速请求域名">&lt;/p>
&lt;!-- `api-access.pangolin-sdk-toutiao-b.com` -->
&lt;p>开始时以为该 IP 是攻击者, 观察流量后发现, 主要是某厂商的 App 在疯狂请求 DNS. 后端设置的&lt;code>TTL=10&lt;/code>表示接收到的 DNS 查询返回值生命周期为 10 秒, 这 10 秒内请求者都应该使用这个返回值, 而不是再次请求 DNS 服务器. 但该 App 每秒数十个相同请求, 说明该 App 没有按照 DNS 协议正确处理 TTL 值. 后台拦截请求统计里, 有 90%以上的请求都是该域名的请求.&lt;/p>
&lt;p>可能该厂商知道有 DNS 拦截的手段, 采取了你不让我访问, 我就让用户 App 直接 DoS 攻击你的 DNS 服务器的方式. 由于后端同时设置了每秒只允许 20 次突发请求, 该莽撞行为同时会影响到用户的其它正常 DNS 查询, 影响其它 App 的正常使用.&lt;/p>
&lt;p>运维看到这样单 IP 疯狂请求同一域名的行为, 不想放行也得放行了.&lt;/p></description></item></channel></rss>