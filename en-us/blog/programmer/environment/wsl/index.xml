<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Windows Subsystem Linux(WSL) on Nono Blogs</title><link>https://blog.jqknono.com/en-us/blog/programmer/environment/wsl/</link><description>Recent content in Windows Subsystem Linux(WSL) on Nono Blogs</description><generator>Hugo</generator><language>en-us</language><lastBuildDate>Wed, 25 Jun 2025 19:09:29 +0800</lastBuildDate><atom:link href="https://blog.jqknono.com/en-us/blog/programmer/environment/wsl/index.xml" rel="self" type="application/rss+xml"/><item><title>WSL Mirrored Network Mode Configuration Guide</title><link>https://blog.jqknono.com/en-us/blog/2025/06/25/wsl-mirrored-network-mode-configuration-guide/</link><pubDate>Wed, 25 Jun 2025 19:09:29 +0800</pubDate><guid>https://blog.jqknono.com/en-us/blog/2025/06/25/wsl-mirrored-network-mode-configuration-guide/</guid><description>&lt;h2 id="version-requirements">Version Requirements&lt;/h2>
&lt;p>Current version status:&lt;/p>
&lt;ul>
&lt;li>Latest stable: 2.5.9 (known networking issues)&lt;/li>
&lt;li>Recommended version: 2.6.0 preview (full mirrored mode support)&lt;/li>
&lt;/ul>
&lt;h2 id="mode-comparison-analysis">Mode Comparison Analysis&lt;/h2>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th>Feature&lt;/th>
 &lt;th>bridge mode (deprecated)&lt;/th>
 &lt;th>mirrored mode (recommended)&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td>Protocol architecture&lt;/td>
 &lt;td>Dual-stack&lt;/td>
 &lt;td>Shared stack&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>IP address allocation&lt;/td>
 &lt;td>Independent IP (Windows + WSL)&lt;/td>
 &lt;td>Shared host IP&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>Port resources&lt;/td>
 &lt;td>Separate&lt;/td>
 &lt;td>Shared ports (conflict-avoidance required)&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>Network performance&lt;/td>
 &lt;td>Relatively heavy&lt;/td>
 &lt;td>Lightweight &amp;amp; efficient&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td>Configuration complexity&lt;/td>
 &lt;td>Simple&lt;/td>
 &lt;td>Requires deep firewall policy setup&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;h2 id="standard-configuration-steps">Standard Configuration Steps&lt;/h2>
&lt;h3 id="1-network-mode-settings">1. Network Mode Settings&lt;/h3>
&lt;p>Configure the base mode via &lt;strong>WSL Settings&lt;/strong> app:&lt;/p></description></item><item><title>wsl</title><link>https://blog.jqknono.com/en-us/blog/2024/06/28/wsl/</link><pubDate>Fri, 28 Jun 2024 16:37:30 +0800</pubDate><guid>https://blog.jqknono.com/en-us/blog/2024/06/28/wsl/</guid><description>&lt;h1 id="configure-wsl">Configure wsl&lt;/h1>
&lt;!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->
&lt;!-- code_chunk_output -->
&lt;ul>
&lt;li>&lt;a href="https://blog.jqknono.com/en-us/blog/2024/06/28/wsl/#configure-wsl">Configure wsl&lt;/a>
&lt;ul>
&lt;li>&lt;a href="https://blog.jqknono.com/en-us/blog/2024/06/28/wsl/#remote-access-ssh">Remote access ssh&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://blog.jqknono.com/en-us/blog/2024/06/28/wsl/#configure-wsl-1">Configure wsl&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;!-- /code_chunk_output -->
&lt;h2 id="remote-access-ssh">Remote access ssh&lt;/h2>
&lt;p>&lt;strong>wsl&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo apt install openssh-server
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo nano /etc/ssh/sshd_config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/etc/ssh/sshd_config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...STUFF ABOVE THIS...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Port &lt;span class="m">2222&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#AddressFamily any&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ListenAddress 0.0.0.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#ListenAddress ::&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...STUFF BELOW THIS...
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>windows&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-ps1" data-lang="ps1">&lt;span class="line">&lt;span class="cl">&lt;span class="n">service&lt;/span> &lt;span class="n">ssh&lt;/span> &lt;span class="nb">start
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">&lt;/span>&lt;span class="n">netsh&lt;/span> &lt;span class="n">interface&lt;/span> &lt;span class="n">portproxy&lt;/span> &lt;span class="n">add&lt;/span> &lt;span class="n">v4tov4&lt;/span> &lt;span class="n">listenaddress&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="mf">0.0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">0&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">0&lt;/span> &lt;span class="n">listenport&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="mf">2222&lt;/span> &lt;span class="n">connectaddress&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="mf">172.23&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">129&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">80&lt;/span> &lt;span class="n">connectport&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="mf">2222&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">netsh&lt;/span> &lt;span class="n">advfirewall&lt;/span> &lt;span class="n">firewall&lt;/span> &lt;span class="n">add&lt;/span> &lt;span class="n">rule&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s2">&amp;#34;Open Port 2222 for WSL2&amp;#34;&lt;/span> &lt;span class="n">dir&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="k">in&lt;/span> &lt;span class="n">action&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="n">allow&lt;/span> &lt;span class="n">protocol&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="n">TCP&lt;/span> &lt;span class="n">localport&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="mf">2222&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">netsh&lt;/span> &lt;span class="n">interface&lt;/span> &lt;span class="n">portproxy&lt;/span> &lt;span class="n">show&lt;/span> &lt;span class="n">v4tov4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">netsh&lt;/span> &lt;span class="n">int&lt;/span> &lt;span class="n">portproxy&lt;/span> &lt;span class="n">reset&lt;/span> &lt;span class="n">all&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="configure-wsl-1">Configure wsl&lt;/h2>
&lt;p>&lt;a href="https://docs.microsoft.com/en-us/windows/wsl/wsl-config#configuration-setting-for-wslconfig">https://docs.microsoft.com/en-us/windows/wsl/wsl-config#configuration-setting-for-wslconfig&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-ps1" data-lang="ps1">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">Set-Content&lt;/span> &lt;span class="n">-Path&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$env:userprofile&lt;/span>&lt;span class="s2">\\.wslconfig&amp;#34;&lt;/span> &lt;span class="n">-Value&lt;/span> &lt;span class="s2">&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"># Settings apply across all Linux distros running on WSL 2
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">[wsl2]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"># Limits VM memory to use no more than 4 GB, this can be set as whole numbers using GB or MB
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">memory=2GB
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"># Sets the VM to use two virtual processors
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">processors=2
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"># Specify a custom Linux kernel to use with your installed distros. The default kernel used can be found at https://github.com/microsoft/WSL2-Linux-Kernel
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"># kernel=C:\\temp\\myCustomKernel
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"># Sets additional kernel parameters, in this case enabling older Linux base images such as Centos 6
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"># kernelCommandLine = vsyscall=emulate
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"># Sets amount of swap storage space to 8GB, default is 25% of available RAM
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">swap=1GB
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"># Sets swapfile path location, default is %USERPROFILE%\AppData\Local\Temp\swap.vhdx
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">swapfile=C:\\temp\\wsl-swap.vhdx
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"># Disable page reporting so WSL retains all allocated memory claimed from Windows and releases none back when free
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">pageReporting=false
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"># Turn off default connection to bind WSL 2 localhost to Windows localhost
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">localhostforwarding=true
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"># Disables nested virtualization
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">nestedVirtualization=false
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"># Turns on output console showing contents of dmesg when opening a WSL 2 distro for debugging
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">debugConsole=true
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item></channel></rss>