<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=nl-nl class=no-js data-theme-init><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=color-scheme content="light dark"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#000000"><style>html{background:Canvas;color:CanvasText}@media(prefers-color-scheme:dark){html{background:#0b0d12;color:#e6e6e6}}html[data-theme-init] *{transition:none!important}</style><script>(function(){const t="td-color-theme",n=localStorage.getItem(t);let e=n||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");e==="auto"&&(e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),document.documentElement.setAttribute("data-bs-theme",e)})()</script><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Hoe behoud je het bron-IP van verzoeken na load balancing in een K8s-cluster | jqknono Blogs</title><meta name=description content="Inleiding Applicatie-implementatie is niet altijd simpelweg installeren en uitvoeren, soms moet je ook rekening houden met netwerkproblemen. Dit artikel legt uit hoe je in een K8s-cluster ervoor zorgt dat services het bron-IP van verzoeken kunnen verkrijgen.
Applicaties die diensten leveren zijn afhankelijk van invoerinformation, als die invoer niet afhankelijk is van de vijf-tupel (bron-IP, bronpoort, doel-IP, doelpoort, protocol), dan heeft de dienst een lage netwerkkoppeling en hoeft het zich geen zorgen te maken over netwerkdetails."><meta property="og:url" content="https://blog.jqknono.com/nl-nl/blog/2024/05/27/hoe-behoud-je-het-bron-ip-van-verzoeken-na-load-balancing-in-een-k8s-cluster/"><meta property="og:site_name" content="jqknono Blogs"><meta property="og:title" content="Hoe behoud je het bron-IP van verzoeken na load balancing in een K8s-cluster"><meta property="og:description" content="Inleiding Applicatie-implementatie is niet altijd simpelweg installeren en uitvoeren, soms moet je ook rekening houden met netwerkproblemen. Dit artikel legt uit hoe je in een K8s-cluster ervoor zorgt dat services het bron-IP van verzoeken kunnen verkrijgen.
Applicaties die diensten leveren zijn afhankelijk van invoerinformation, als die invoer niet afhankelijk is van de vijf-tupel (bron-IP, bronpoort, doel-IP, doelpoort, protocol), dan heeft de dienst een lage netwerkkoppeling en hoeft het zich geen zorgen te maken over netwerkdetails."><meta property="og:locale" content="nl_nl"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2024-05-27T11:52:22+08:00"><meta property="article:modified_time" content="2024-05-27T11:52:22+08:00"><meta property="article:tag" content="Netwerk"><meta property="article:tag" content="Blog"><meta itemprop=name content="Hoe behoud je het bron-IP van verzoeken na load balancing in een K8s-cluster"><meta itemprop=description content="Inleiding Applicatie-implementatie is niet altijd simpelweg installeren en uitvoeren, soms moet je ook rekening houden met netwerkproblemen. Dit artikel legt uit hoe je in een K8s-cluster ervoor zorgt dat services het bron-IP van verzoeken kunnen verkrijgen.
Applicaties die diensten leveren zijn afhankelijk van invoerinformation, als die invoer niet afhankelijk is van de vijf-tupel (bron-IP, bronpoort, doel-IP, doelpoort, protocol), dan heeft de dienst een lage netwerkkoppeling en hoeft het zich geen zorgen te maken over netwerkdetails."><meta itemprop=datePublished content="2024-05-27T11:52:22+08:00"><meta itemprop=dateModified content="2024-05-27T11:52:22+08:00"><meta itemprop=wordCount content="1625"><meta itemprop=keywords content="Netwerk,Blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="Hoe behoud je het bron-IP van verzoeken na load balancing in een K8s-cluster"><meta name=twitter:description content="Inleiding Applicatie-implementatie is niet altijd simpelweg installeren en uitvoeren, soms moet je ook rekening houden met netwerkproblemen. Dit artikel legt uit hoe je in een K8s-cluster ervoor zorgt dat services het bron-IP van verzoeken kunnen verkrijgen.
Applicaties die diensten leveren zijn afhankelijk van invoerinformation, als die invoer niet afhankelijk is van de vijf-tupel (bron-IP, bronpoort, doel-IP, doelpoort, protocol), dan heeft de dienst een lage netwerkkoppeling en hoeft het zich geen zorgen te maken over netwerkdetails."><link rel=preload href=/scss/main.min.19deb9bb49a16bab1391617801cf2d75f58ded83cae46516f211ba8fc3e9f6f9.css as=style integrity="sha256-Gd65u0mha6sTkWF4Ac8tdfWN7YPK5GUW8hG6j8Pp9vk=" crossorigin=anonymous><link href=/scss/main.min.19deb9bb49a16bab1391617801cf2d75f58ded83cae46516f211ba8fc3e9f6f9.css rel=stylesheet integrity="sha256-Gd65u0mha6sTkWF4Ac8tdfWN7YPK5GUW8hG6j8Pp9vk=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><script defer src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-F3FFTG72NE"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-F3FFTG72NE")}</script></head><body class="td-page td-blog"><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="td-navbar-container container-fluid flex-column flex-md-row"><a class=navbar-brand href=/nl-nl/><span class="navbar-brand__logo navbar-logo"></span><span class=navbar-brand__name>jqknono Blogs</span></a><div class="td-navbar-nav-scroll td-navbar-nav-scroll--indicator" id=main_navbar><div class="scroll-indicator scroll-left"></div><ul class=navbar-nav><li class=nav-item><a class=nav-link href=https://jqknono.com target=_blank rel=noopener><span>About</span><sup><i class="ps-1 fa-solid fa-up-right-from-square fa-xs" aria-hidden=true></i></sup></a></li><li class=nav-item><a class=nav-link href=https://github.com/jqknono target=_blank rel=noopener><i class="fab fa-github" aria-hidden=true></i><span>GitHub</span><sup><i class="ps-1 fa-solid fa-up-right-from-square fa-xs" aria-hidden=true></i></sup></a></li><li class="nav-item td-navbar__lang-menu"><div class="td-lang-menu dropdown"><a class="nav-link dropdown-toggle td-lang-menu__title" href=# role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false><span class=td-lang-menu__title-text>Nederlands</span>
<span class=td-lang-menu__title-code>NL-NL</span></a><ul class=dropdown-menu><li><a class=dropdown-item href=/blog/2024/05/27/how-to-preserve-the-source-ip-of-requests-after-load-balancing-in-a-k8s-cluster/>English</a></li><li><a class=dropdown-item href=/zh-tw/blog/2024/05/27/k8s%E5%8F%A2%E9%9B%86%E4%B8%AD%E5%A6%82%E4%BD%95%E4%BF%9D%E7%95%99%E8%B2%A0%E8%BC%89%E5%9D%87%E8%A1%A1%E5%BE%8C%E7%9A%84%E8%AB%8B%E6%B1%82%E6%BA%90ip/>繁體中文</a></li><li><a class=dropdown-item href=/ja-jp/blog/1/01/01/>日本語</a></li><li><a class=dropdown-item href=/ko-kr/blog/2024/05/27/k8s-%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0%EC%97%90%EC%84%9C-%EB%A1%9C%EB%93%9C-%EB%B0%B8%EB%9F%B0%EC%8B%B1-%ED%9B%84-%EC%9A%94%EC%B2%AD-%EC%9B%90%EB%B3%B8-ip%EB%A5%BC-%EB%B3%B4%EC%A1%B4%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95/>한국어</a></li><li><a class=dropdown-item href=/ar-sa/blog/1/01/01/>العربية</a></li><li><a class=dropdown-item href=/de-de/blog/2024/05/27/wie-beh%C3%A4lt-man-in-einem-k8s-cluster-die-quell-ip-der-anfragen-nach-der-lastverteilung-bei/>Deutsch</a></li><li><a class=dropdown-item href=/fr-fr/blog/2024/05/27/comment-conserver-lip-source-des-requ%C3%AAtes-apr%C3%A8s-%C3%A9quilibrage-de-charge-dans-un-cluster-k8s/>Français</a></li><li><a class=dropdown-item href=/hi-in/blog/2024/05/27/k8s-%E0%A4%95%E0%A5%8D%E0%A4%B2%E0%A4%B8%E0%A5%8D%E0%A4%9F%E0%A4%B0-%E0%A4%AE%E0%A5%87%E0%A4%82-%E0%A4%B2%E0%A5%8B%E0%A4%A1-%E0%A4%AC%E0%A5%88%E0%A4%B2%E0%A5%87%E0%A4%82%E0%A4%B8%E0%A4%B0-%E0%A4%95%E0%A5%87-%E0%A4%AC%E0%A4%BE%E0%A4%A6-%E0%A4%95%E0%A5%87-%E0%A4%85%E0%A4%A8%E0%A5%81%E0%A4%B0%E0%A5%8B%E0%A4%A7-%E0%A4%B8%E0%A5%8D%E0%A4%B0%E0%A5%8B%E0%A4%A4-ip-%E0%A4%95%E0%A5%8B-%E0%A4%95%E0%A5%88%E0%A4%B8%E0%A5%87-%E0%A4%AC%E0%A4%A8%E0%A4%BE%E0%A4%8F-%E0%A4%B0%E0%A4%96%E0%A5%87%E0%A4%82/>हिंदी</a></li><li><a class=dropdown-item href=/es-es/blog/2024/05/27/c%C3%B3mo-conservar-la-ip-de-origen-de-las-solicitudes-despu%C3%A9s-de-la-equilibraci%C3%B3n-de-carga-en-un-cl%C3%BAster-de-k8s/>Español</a></li><li><a class=dropdown-item href=/pt-br/blog/2024/05/27/como-preservar-o-ip-de-origem-da-solicita%C3%A7%C3%A3o-ap%C3%B3s-o-balanceamento-de-carga-em-um-cluster-k8s/>Português</a></li><li><a class=dropdown-item href=/ru-ru/blog/2024/05/27/%D0%BA%D0%B0%D0%BA-%D1%81%D0%BE%D1%85%D1%80%D0%B0%D0%BD%D0%B8%D1%82%D1%8C-%D0%B8%D1%81%D1%85%D0%BE%D0%B4%D0%BD%D1%8B%D0%B9-ip-%D0%B0%D0%B4%D1%80%D0%B5%D1%81-%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0-%D0%BF%D0%BE%D1%81%D0%BB%D0%B5-%D0%B1%D0%B0%D0%BB%D0%B0%D0%BD%D1%81%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B8-%D0%BD%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B8-%D0%B2-%D0%BA%D0%BB%D0%B0%D1%81%D1%82%D0%B5%D1%80%D0%B5-k8s/>Русский</a></li><li><a class=dropdown-item href=/it-it/blog/2024/05/27/come-preservare-lip-sorgente-delle-richieste-dopo-il-bilanciamento-del-carico-in-un-cluster-k8s/>Italiano</a></li><li><span class="dropdown-item disabled">Bahasa Indonesia</span></li><li><a class=dropdown-item href=/tr-tr/blog/2024/05/27/k8s-k%C3%BCmesinde-y%C3%BCk-dengeleme-sonras%C4%B1-istek-kaynak-ipsini-nas%C4%B1l-koruyabiliriz/>Türkçe</a></li><li><span class="dropdown-item active">Nederlands</span></li><li><a class=dropdown-item href=/pl-pl/blog/2024/05/27/jak-zachowa%C4%87-oryginalny-ip-%C5%BAr%C3%B3d%C5%82a-%C5%BC%C4%85dania-po-r%C3%B3wnowa%C5%BCeniu-obci%C4%85%C5%BCenia-w-klastrze-k8s/>Polski</a></li><li><a class=dropdown-item href=/ar-ae/blog/1/01/01/>العربية</a></li><li><a class=dropdown-item href=/zh-cn/blog/2024/05/27/k8s%E9%9B%86%E7%BE%A4%E4%B8%AD%E5%A6%82%E4%BD%95%E4%BF%9D%E7%95%99%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E5%90%8E%E7%9A%84%E8%AF%B7%E6%B1%82%E6%BA%90ip/>简体中文</a></li></ul></div></li><li class="nav-item td-navbar__light-dark-menu"><div class="td-light-dark-menu dropdown"><svg class="d-none"><symbol id="check2" viewBox="0 0 16 16"><path d="M13.854 3.646a.5.5.0 010 .708l-7 7a.5.5.0 01-.708.0l-3.5-3.5a.5.5.0 11.708-.708L6.5 10.293l6.646-6.647a.5.5.0 01.708.0z"/></symbol><symbol id="circle-half" viewBox="0 0 16 16"><path d="M8 15A7 7 0 108 1v14zm0 1A8 8 0 118 0a8 8 0 010 16z"/></symbol><symbol id="moon-stars-fill" viewBox="0 0 16 16"><path d="M6 .278a.768.768.0 01.08.858 7.208 7.208.0 00-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527.0 1.04-.055 1.533-.16a.787.787.0 01.81.316.733.733.0 01-.031.893A8.349 8.349.0 018.344 16C3.734 16 0 12.286.0 7.71.0 4.266 2.114 1.312 5.124.06A.752.752.0 016 .278z"/><path d="M10.794 3.148a.217.217.0 01.412.0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217.0 010 .412l-1.162.387A1.734 1.734.0 0011.593 7.69l-.387 1.162a.217.217.0 01-.412.0l-.387-1.162A1.734 1.734.0 009.31 6.593l-1.162-.387a.217.217.0 010-.412l1.162-.387a1.734 1.734.0 001.097-1.097l.387-1.162zM13.863.099a.145.145.0 01.274.0l.258.774c.115.346.386.617.732.732l.774.258a.145.145.0 010 .274l-.774.258a1.156 1.156.0 00-.732.732l-.258.774a.145.145.0 01-.274.0l-.258-.774a1.156 1.156.0 00-.732-.732l-.774-.258a.145.145.0 010-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/></symbol><symbol id="sun-fill" viewBox="0 0 16 16"><path d="M8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0zm0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13zm8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5zM3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8zm10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0zm-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0zm9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707zM4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708z"/></symbol></svg>
<button class="btn btn-link nav-link dropdown-toggle d-flex align-items-center" id=bd-theme type=button aria-expanded=false data-bs-toggle=dropdown aria-label="Toggle theme (auto)">
<svg class="bi my-1 theme-icon-active"><use href="#circle-half"/></svg></button><ul class=dropdown-menu aria-labelledby=bd-theme><li><button type=button class="dropdown-item d-flex align-items-center" data-bs-theme-value=light aria-pressed=false>
<svg class="bi me-2 opacity-50"><use href="#sun-fill"/></svg>
Light
<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li><li><button type=button class="dropdown-item d-flex align-items-center" data-bs-theme-value=dark aria-pressed=false>
<svg class="bi me-2 opacity-50"><use href="#moon-stars-fill"/></svg>
Dark
<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li><li><button type=button class="dropdown-item d-flex align-items-center active" data-bs-theme-value=auto aria-pressed=true>
<svg class="bi me-2 opacity-50"><use href="#circle-half"/></svg>
Auto
<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li></ul></div></li></ul><div class="scroll-indicator scroll-right"></div></div><div class="d-none d-lg-block td-navbar__search"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Zoek op deze site…" aria-label="Zoek op deze site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.cc8256ce9df3b0ba01ec0c0a9666d270.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main data-bs-spy=scroll data-bs-target=.td-toc data-bs-root-margin="0px 0px -10%"><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><div id=content-mobile><form class="td-sidebar__search d-flex align-items-center"><div class="td-search td-search--offline"><div class=td-search__icon></div><input type=search class="td-search__input form-control" placeholder="Zoek op deze site…" aria-label="Zoek op deze site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.cc8256ce9df3b0ba01ec0c0a9666d270.json data-offline-search-base-href=/ data-offline-search-max-results=10></div><button class="btn btn-link td-sidebar__toggle" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form></div><div id=content-desktop></div><nav class="td-sidebar-nav collapse td-sidebar-nav--search-disabled foldable-nav" id=td-section-nav><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-nl-nlblog-li><a href=/nl-nl/blog/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-nl-nlblog><span>Blogs</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-nl-nlblog20251203het-wordt-aanbevolen-om-de-alibaba-cloud-esa_page-functie-nog-niet-te-gebruiken-li><input type=checkbox id=m-nl-nlblog20251203het-wordt-aanbevolen-om-de-alibaba-cloud-esa_page-functie-nog-niet-te-gebruiken-check>
<label for=m-nl-nlblog20251203het-wordt-aanbevolen-om-de-alibaba-cloud-esa_page-functie-nog-niet-te-gebruiken-check><a href=/nl-nl/blog/2025/12/03/het-wordt-aanbevolen-om-de-alibaba-cloud-esa_page-functie-nog-niet-te-gebruiken/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-nl-nlblog20251203het-wordt-aanbevolen-om-de-alibaba-cloud-esa_page-functie-nog-niet-te-gebruiken><span>Het wordt aanbevolen om de Alibaba Cloud ESA_page-functie nog niet te gebruiken</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-nl-nlblog20251202valkuilen-van-alibaba-esa-en-oss-li><input type=checkbox id=m-nl-nlblog20251202valkuilen-van-alibaba-esa-en-oss-check>
<label for=m-nl-nlblog20251202valkuilen-van-alibaba-esa-en-oss-check><a href=/nl-nl/blog/2025/12/02/valkuilen-van-alibaba-esa-en-oss/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-nl-nlblog20251202valkuilen-van-alibaba-esa-en-oss><span>Valkuilen van Alibaba ESA en OSS</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-nl-nlblog20251202windows-methode-voor-gedeelde-chrome-debugging-li><input type=checkbox id=m-nl-nlblog20251202windows-methode-voor-gedeelde-chrome-debugging-check>
<label for=m-nl-nlblog20251202windows-methode-voor-gedeelde-chrome-debugging-check><a href=/nl-nl/blog/2025/12/02/windows-methode-voor-gedeelde-chrome-debugging/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-nl-nlblog20251202windows-methode-voor-gedeelde-chrome-debugging><span>Windows-methode voor gedeelde Chrome-debugging</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-nl-nlblog20251202is-cloudflare-volledig-te-vertrouwen-li><input type=checkbox id=m-nl-nlblog20251202is-cloudflare-volledig-te-vertrouwen-check>
<label for=m-nl-nlblog20251202is-cloudflare-volledig-te-vertrouwen-check><a href=/nl-nl/blog/2025/12/02/is-cloudflare-volledig-te-vertrouwen/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-nl-nlblog20251202is-cloudflare-volledig-te-vertrouwen><span>Is Cloudflare volledig te vertrouwen</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-nl-nlblog20251201zichtverbeteringsmysterie-li><input type=checkbox id=m-nl-nlblog20251201zichtverbeteringsmysterie-check>
<label for=m-nl-nlblog20251201zichtverbeteringsmysterie-check><a href=/nl-nl/blog/2025/12/01/zichtverbeteringsmysterie/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-nl-nlblog20251201zichtverbeteringsmysterie><span>Zichtverbeteringsmysterie</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-nl-nlblog20251127gratis-producten-die-je-kunt-krijgen-door-een-domein-te-bezitten-li><input type=checkbox id=m-nl-nlblog20251127gratis-producten-die-je-kunt-krijgen-door-een-domein-te-bezitten-check>
<label for=m-nl-nlblog20251127gratis-producten-die-je-kunt-krijgen-door-een-domein-te-bezitten-check><a href=/nl-nl/blog/2025/11/27/gratis-producten-die-je-kunt-krijgen-door-een-domein-te-bezitten/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-nl-nlblog20251127gratis-producten-die-je-kunt-krijgen-door-een-domein-te-bezitten><span>Gratis producten die je kunt krijgen door een domein te bezitten</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-nl-nlblog20230506ipv6-probleem-bij-windows-bruggen-li><input type=checkbox id=m-nl-nlblog20230506ipv6-probleem-bij-windows-bruggen-check>
<label for=m-nl-nlblog20230506ipv6-probleem-bij-windows-bruggen-check><a href=/nl-nl/blog/2023/05/06/ipv6-probleem-bij-windows-bruggen/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-nl-nlblog20230506ipv6-probleem-bij-windows-bruggen><span>IPv6-probleem bij Windows-bruggen</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-nl-nlblog20240527windows-systeem-installeren-en-activeren-li><input type=checkbox id=m-nl-nlblog20240527windows-systeem-installeren-en-activeren-check>
<label for=m-nl-nlblog20240527windows-systeem-installeren-en-activeren-check><a href=/nl-nl/blog/2024/05/27/windows-systeem-installeren-en-activeren/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-nl-nlblog20240527windows-systeem-installeren-en-activeren><span>Windows-systeem installeren en activeren</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-nl-nlblog20240527hoe-behoud-je-het-bron-ip-van-verzoeken-na-load-balancing-in-een-k8s-cluster-li><input type=checkbox id=m-nl-nlblog20240527hoe-behoud-je-het-bron-ip-van-verzoeken-na-load-balancing-in-een-k8s-cluster-check checked>
<label for=m-nl-nlblog20240527hoe-behoud-je-het-bron-ip-van-verzoeken-na-load-balancing-in-een-k8s-cluster-check><a href=/nl-nl/blog/2024/05/27/hoe-behoud-je-het-bron-ip-van-verzoeken-na-load-balancing-in-een-k8s-cluster/ class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id=m-nl-nlblog20240527hoe-behoud-je-het-bron-ip-van-verzoeken-na-load-balancing-in-een-k8s-cluster><span class=td-sidebar-nav-active-item>Hoe behoud je het bron-IP van verzoeken na load balancing in een K8s-cluster</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-nl-nlblog20240521wireguard-volledige-oplossing-tegen-provider-udp-qos-li><input type=checkbox id=m-nl-nlblog20240521wireguard-volledige-oplossing-tegen-provider-udp-qos-check>
<label for=m-nl-nlblog20240521wireguard-volledige-oplossing-tegen-provider-udp-qos-check><a href=/nl-nl/blog/2024/05/21/wireguard-volledige-oplossing-tegen-provider-udp-qos/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-nl-nlblog20240521wireguard-volledige-oplossing-tegen-provider-udp-qos><span>WireGuard: Volledige oplossing tegen provider UDP QoS</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-nl-nlblog20240520introductie-van-nieuwe-gebruiker-bij-de-minderheid-li><input type=checkbox id=m-nl-nlblog20240520introductie-van-nieuwe-gebruiker-bij-de-minderheid-check>
<label for=m-nl-nlblog20240520introductie-van-nieuwe-gebruiker-bij-de-minderheid-check><a href=/nl-nl/blog/2024/05/20/introductie-van-nieuwe-gebruiker-bij-de-minderheid/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-nl-nlblog20240520introductie-van-nieuwe-gebruiker-bij-de-minderheid><span>Introductie van nieuwe gebruiker bij de Minderheid</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-nl-nlblog20240509gepersonaliseerde-aanbevelingen-een-handig-hulpmiddel-of-een-cognitieve-valkuil-li><input type=checkbox id=m-nl-nlblog20240509gepersonaliseerde-aanbevelingen-een-handig-hulpmiddel-of-een-cognitieve-valkuil-check>
<label for=m-nl-nlblog20240509gepersonaliseerde-aanbevelingen-een-handig-hulpmiddel-of-een-cognitieve-valkuil-check><a href=/nl-nl/blog/2024/05/09/gepersonaliseerde-aanbevelingen-een-handig-hulpmiddel-of-een-cognitieve-valkuil/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-nl-nlblog20240509gepersonaliseerde-aanbevelingen-een-handig-hulpmiddel-of-een-cognitieve-valkuil><span>Gepersonaliseerde aanbevelingen: een handig hulpmiddel of een cognitieve valkuil?</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-nl-nlblog20240509ervaring-met-crec3abren-in-de-tencent-cloud-developer-community-li><input type=checkbox id=m-nl-nlblog20240509ervaring-met-crec3abren-in-de-tencent-cloud-developer-community-check>
<label for=m-nl-nlblog20240509ervaring-met-crec3abren-in-de-tencent-cloud-developer-community-check><a href=/nl-nl/blog/2024/05/09/ervaring-met-cre%C3%ABren-in-de-tencent-cloud-developer-community/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-nl-nlblog20240509ervaring-met-crec3abren-in-de-tencent-cloud-developer-community><span>Ervaring met creëren in de Tencent Cloud Developer Community</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-nl-nlblog10101-li><input type=checkbox id=m-nl-nlblog10101-check>
<label for=m-nl-nlblog10101-check><a href=/nl-nl/blog/1/01/01/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-nl-nlblog10101><span></span></a></label></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ms-2 pb-1 pt-2 mb-0"></div><div class=td-toc data-proofer-ignore><div class=td-toc-title><span class=td-toc-title__text></span>
<a class=td-toc-title__link title href=#></a></div><nav id=TableOfContents><ul><li><a href=#inleiding>Inleiding</a></li><li><a href=#waarom-gaat-de-bron-ip-informatie-verloren>Waarom gaat de bron-IP-informatie verloren?</a></li><li><a href=#hoe-behoud-je-het-bron-ip>Hoe behoud je het bron-IP?</a></li><li><a href=#k8s-bedieningshandleiding>K8S-bedieningshandleiding</a><ul><li><a href=#deployment-maken>Deployment maken</a></li><li><a href=#service-maken>Service maken</a></li><li><a href=#ingress-maken>Ingress maken</a></li></ul></li><li><a href=#samenvatting>Samenvatting</a></li><li><a href=#referenties>Referenties</a></li></ul></nav></div><div class="taxonomy taxonomy-terms-cloud taxo-tags"><h5 class=taxonomy-title>Taxonomy Cloud</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=https://blog.jqknono.com/nl-nl/tags/2025/ data-taxonomy-term=2025><span class=taxonomy-label>2025</span><span class=taxonomy-count>6</span></a></li><li><a class=taxonomy-term href=https://blog.jqknono.com/nl-nl/tags/beheer/ data-taxonomy-term=beheer><span class=taxonomy-label>Beheer</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://blog.jqknono.com/nl-nl/tags/beoordeling/ data-taxonomy-term=beoordeling><span class=taxonomy-label>Beoordeling</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://blog.jqknono.com/nl-nl/tags/blog/ data-taxonomy-term=blog><span class=taxonomy-label>Blog</span><span class=taxonomy-count>4</span></a></li><li><a class=taxonomy-term href=https://blog.jqknono.com/nl-nl/tags/creatorplatform/ data-taxonomy-term=creatorplatform><span class=taxonomy-label>Creatorplatform</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://blog.jqknono.com/nl-nl/tags/handleidingen/ data-taxonomy-term=handleidingen><span class=taxonomy-label>Handleidingen</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://blog.jqknono.com/nl-nl/tags/lessen/ data-taxonomy-term=lessen><span class=taxonomy-label>Lessen</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://blog.jqknono.com/nl-nl/tags/moeilijkheden-en-problemen/ data-taxonomy-term=moeilijkheden-en-problemen><span class=taxonomy-label>Moeilijkheden en Problemen</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://blog.jqknono.com/nl-nl/tags/netwerk/ data-taxonomy-term=netwerk><span class=taxonomy-label>Netwerk</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://blog.jqknono.com/nl-nl/tags/netwerkoptimalisatie/ data-taxonomy-term=netwerkoptimalisatie><span class=taxonomy-label>Netwerkoptimalisatie</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://blog.jqknono.com/nl-nl/tags/notities/ data-taxonomy-term=notities><span class=taxonomy-label>Notities</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://blog.jqknono.com/nl-nl/tags/ongeclassificeerd/ data-taxonomy-term=ongeclassificeerd><span class=taxonomy-label>Ongeclassificeerd</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://blog.jqknono.com/nl-nl/tags/speltheorie/ data-taxonomy-term=speltheorie><span class=taxonomy-label>Speltheorie</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://blog.jqknono.com/nl-nl/tags/udp-qos/ data-taxonomy-term=udp-qos><span class=taxonomy-label>UDP QoS</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://blog.jqknono.com/nl-nl/tags/vpn/ data-taxonomy-term=vpn><span class=taxonomy-label>VPN</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://blog.jqknono.com/nl-nl/tags/windows-storingen-en-diverse-problemen/ data-taxonomy-term=windows-storingen-en-diverse-problemen><span class=taxonomy-label>Windows-Storingen en Diverse Problemen</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://blog.jqknono.com/nl-nl/tags/wireguard/ data-taxonomy-term=wireguard><span class=taxonomy-label>WireGuard</span><span class=taxonomy-count>1</span></a></li></ul></div><div class="taxonomy taxonomy-terms-cloud taxo-categories"><h5 class=taxonomy-title>Categories</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=https://blog.jqknono.com/nl-nl/categories/beheer/ data-taxonomy-term=beheer><span class=taxonomy-label>Beheer</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://blog.jqknono.com/nl-nl/categories/beoordeling/ data-taxonomy-term=beoordeling><span class=taxonomy-label>Beoordeling</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://blog.jqknono.com/nl-nl/categories/handleidingen/ data-taxonomy-term=handleidingen><span class=taxonomy-label>Handleidingen</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://blog.jqknono.com/nl-nl/categories/lessen/ data-taxonomy-term=lessen><span class=taxonomy-label>Lessen</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://blog.jqknono.com/nl-nl/categories/netwerk/ data-taxonomy-term=netwerk><span class=taxonomy-label>Netwerk</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://blog.jqknono.com/nl-nl/categories/netwerktechnologie/ data-taxonomy-term=netwerktechnologie><span class=taxonomy-label>Netwerktechnologie</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://blog.jqknono.com/nl-nl/categories/notities/ data-taxonomy-term=notities><span class=taxonomy-label>Notities</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://blog.jqknono.com/nl-nl/categories/ongeclassificeerd/ data-taxonomy-term=ongeclassificeerd><span class=taxonomy-label>Ongeclassificeerd</span><span class=taxonomy-count>2</span></a></li><li><a class=taxonomy-term href=https://blog.jqknono.com/nl-nl/categories/speltheorie/ data-taxonomy-term=speltheorie><span class=taxonomy-label>Speltheorie</span><span class=taxonomy-count>1</span></a></li><li><a class=taxonomy-term href=https://blog.jqknono.com/nl-nl/categories/windows-storingen-en-diverse-problemen/ data-taxonomy-term=windows-storingen-en-diverse-problemen><span class=taxonomy-label>Windows-Storingen en Diverse Problemen</span><span class=taxonomy-count>1</span></a></li></ul></div></aside><main class="col-12 col-md-9 col-xl-8 ps-md-5 pe-md-4" role=main><a class=td-rss-button title=RSS href=/nl-nl/blog/index.xml target=_blank rel=noopener><i class="fa-solid fa-rss" aria-hidden=true></i></a><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=/nl-nl/blog/>Blogs</a></li><li class="breadcrumb-item active" aria-current=page>Hoe behoud je het bron-IP van verzoeken na load balancing in een K8s-cluster</li></ol></nav><div class=td-content><h1>Hoe behoud je het bron-IP van verzoeken na load balancing in een K8s-cluster</h1><div class="td-byline mb-4"><time datetime=2024-05-27 class=text-body-secondary>Monday, May 27, 2024</time></div><header class=article-meta><div class="taxonomy taxonomy-terms-article taxo-tags"><h5 class=taxonomy-title>Tags:</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=https://blog.jqknono.com/nl-nl/tags/netwerk/ data-taxonomy-term=netwerk><span class=taxonomy-label>Netwerk</span></a></li><li><a class=taxonomy-term href=https://blog.jqknono.com/nl-nl/tags/blog/ data-taxonomy-term=blog><span class=taxonomy-label>Blog</span></a></li></ul></div><div class="taxonomy taxonomy-terms-article taxo-categories"><h5 class=taxonomy-title>Categories:</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=https://blog.jqknono.com/nl-nl/categories/netwerk/ data-taxonomy-term=netwerk><span class=taxonomy-label>Netwerk</span></a></li></ul></div></header><h2 id=inleiding>Inleiding</h2><p><strong>Applicatie-implementatie</strong> is niet altijd simpelweg <strong>installeren</strong> en <strong>uitvoeren</strong>, soms moet je ook rekening houden met <strong>netwerk</strong>problemen. Dit artikel legt uit hoe je in een <strong>K8s-cluster</strong> ervoor zorgt dat services het <strong>bron-IP</strong> van verzoeken kunnen verkrijgen.</p><p>Applicaties die diensten leveren zijn afhankelijk van invoerinformation, als die invoer niet afhankelijk is van de <strong>vijf-tupel</strong> (bron-IP, bronpoort, doel-IP, doelpoort, protocol), dan heeft de dienst een <strong>lage netwerkkoppeling</strong> en hoeft het zich geen zorgen te maken over netwerkdetails.</p><p>Daarom is het voor de meeste mensen niet nodig om dit artikel te lezen. Als je geïnteresseerd bent in netwerken, of je horizon wilt verbreden, kun je doorgaan met lezen om meer service-scenario&rsquo;s te begrijpen.</p><p>Dit artikel is gebaseerd op K8s <code>v1.29.4</code>. In het artikel worden pod en endpoint soms door elkaar gebruikt; in dit scenario kun je ze als equivalent beschouwen.</p><p><strong>Als er fouten zijn, welkom om te corrigeren, ik zal het kịp tijdig aanpassen.</strong></p><h2 id=waarom-gaat-de-bron-ip-informatie-verloren>Waarom gaat de bron-IP-informatie verloren?</h2><p>Laten we eerst verduidelijken wat het bron-IP is. Wanneer A een verzoek stuurt naar B, en B stuurt het verzoek door naar C, ziet C in het IP-protocol het bron-IP van B, maar in dit artikel beschouwen we het <strong>IP van A</strong> als het bron-IP.</p><p>Er zijn voornamelijk twee soorten gedragingen die leiden tot verlies van broninformatie:</p><ol><li><strong>Netwerkadresvertaling (NAT)</strong>, met als doel het besparen van publieke IPv4-adressen, load balancing, enz. Dit zorgt ervoor dat de server het bron-IP van het <strong>NAT</strong>-apparaat ziet, in plaats van het echte bron-IP.</li><li><strong>Proxy</strong>, <strong>reverse proxy</strong> (RP, Reverse Proxy) en <strong>load balancer</strong> (LB, Load Balancer) behoren allemaal tot deze categorie, hieronder samengevat als <strong>proxyserver</strong>. Deze proxyservices sturen verzoeken door naar backend-services, maar vervangen het bron-IP door hun eigen IP.</li></ol><ul><li>NAT komt neer op <strong>IP-ruimte ruilen voor poortruimte</strong>. IPv4-adressen zijn beperkt, één IP-adres kan 65535 poorten mappen. In de meeste gevallen zijn deze poorten niet volledig gebruikt, dus kunnen meerdere subnet-IP&rsquo;s één publiek IP delen en services onderscheiden op poortniveau. De gebruiksvorm is: <code>public IP:public port -> private IP_1:private port</code>. Meer informatie vind je in <a href="https://www.google.com/search?q=%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2">Netwerkadresvertaling</a></li><li>Proxyservices zijn bedoeld om te <strong>verbergen of bloot te stellen</strong>. Proxyservices sturen verzoeken door naar backend-services en vervangen het bron-IP door hun eigen IP, om het echte IP van de backend-service te verbergen en de veiligheid te beschermen. De gebruiksvorm is: <code>client IP -> proxy IP -> server IP</code>. Meer informatie vind je in <a href="https://www.google.com/search?q=%E4%BB%A3%E7%90%86">Proxy</a></li></ul><p><strong>NAT</strong> en <strong>proxyservers</strong> zijn zeer gebruikelijk, de meeste services kunnen het bron-IP van verzoeken niet verkrijgen.</p><p><em>Dit zijn de twee meest voorkomende manieren om het bron-IP te wijzigen; suggesties voor anderen zijn welkom.</em></p><h2 id=hoe-behoud-je-het-bron-ip>Hoe behoud je het bron-IP?</h2><p>Hier is een voorbeeld van een <code>HTTP-verzoek</code>:</p><table><thead><tr><th>Veld</th><th>Lengte (bytes)</th><th>Bitverschuiving</th><th>Beschrijving</th></tr></thead><tbody><tr><td><strong>IP-kop</strong></td><td></td><td></td><td></td></tr><tr><td><code>Bron-IP</code></td><td>4</td><td>0-31</td><td>IP-adres van de verzender</td></tr><tr><td>Doel-IP</td><td>4</td><td>32-63</td><td>IP-adres van de ontvanger</td></tr><tr><td><strong>TCP-kop</strong></td><td></td><td></td><td></td></tr><tr><td>Bronpoort</td><td>2</td><td>0-15</td><td>Verzendpoortnummer</td></tr><tr><td>Doelpoort</td><td>2</td><td>16-31</td><td>Ontvangpoortnummer</td></tr><tr><td>Sequencenummer</td><td>4</td><td>32-63</td><td>Gebruikt om de byte-stroom te identificeren die door de verzender is verzonden</td></tr><tr><td>Bevestigingsnummer</td><td>4</td><td>64-95</td><td>Als de ACK-vlag is ingesteld, het volgende verwachte sequencenummer</td></tr><tr><td>Gegevensverschuiving</td><td>4</td><td>96-103</td><td>Aantal bytes van de TCP-kop tot het begin van de gegevens</td></tr><tr><td>Gereserveerd</td><td>4</td><td>104-111</td><td>Gereserveerd veld, niet gebruikt, ingesteld op 0</td></tr><tr><td>Vlagbits</td><td>2</td><td>112-127</td><td>Verschillende controle-vlaggen, zoals SYN, ACK, FIN, enz.</td></tr><tr><td>Venstergrootte</td><td>2</td><td>128-143</td><td>Hoeveelheid gegevens die de ontvanger kan ontvangen</td></tr><tr><td>Controlesom</td><td>2</td><td>144-159</td><td>Gebruikt om te detecteren of gegevens fouten hebben tijdens transmissie</td></tr><tr><td>Dringendheidspointer</td><td>2</td><td>160-175</td><td>Positie van dringende gegevens die de verzender wil dat de ontvanger snel verwerkt</td></tr><tr><td>Opties</td><td>Variabel</td><td>176-&mldr;</td><td>Kan tijdstempels, maximale segmentlengte, enz. bevatten</td></tr><tr><td><strong>HTTP-kop</strong></td><td></td><td></td><td></td></tr><tr><td>Verzoekregel</td><td>Variabel</td><td>&mldr;-&mldr;</td><td>Bevat verzoekmethode, URI en HTTP-versie</td></tr><tr><td><code>Kopvelden</code></td><td>Variabel</td><td>&mldr;-&mldr;</td><td>Bevat verschillende kopvelden, zoals Host, User-Agent, enz.</td></tr><tr><td>Lege regel</td><td>2</td><td>&mldr;-&mldr;</td><td>Gebruikt om kop en body te scheiden</td></tr><tr><td>Body</td><td>Variabel</td><td>&mldr;-&mldr;</td><td>Optionele verzoek- of responsbody</td></tr></tbody></table><p>Uit de bovenstaande HTTP-verzoekstructuur blijkt dat <strong>TCP-opties</strong>, <strong>verzoekregel</strong>, <strong>kopvelden</strong> en <strong>body</strong> variabel zijn. De <strong>TCP-opties</strong>ruimte is beperkt en wordt meestal niet gebruikt om bron-IP door te geven. De <strong>verzoekregel</strong> draagt vaste informatie die niet kan worden uitgebreid. De <strong>HTTP-body</strong> kan na versleuteling niet worden gewijzigd. Alleen de <code>HTTP-kopvelden</code> zijn geschikt om uit te breiden voor het doorgeven van bron-IP.</p><p>In de HTTP-header kan het veld <code>X-REAL-IP</code> worden toegevoegd om het bron-IP door te geven. Deze operatie wordt meestal uitgevoerd op de proxyserver, waarna de <strong>proxyserver</strong> het verzoek doorstuurt naar de backend-service, die het bron-IP via dit veld kan verkrijgen.</p><p>Let op: zorg ervoor dat de <strong>proxyserver</strong> vóór het <strong>NAT</strong>-apparaat staat, zodat het het echte bron-IP van het verzoek kan verkrijgen. In Alibaba Cloud-producten zien we de <a href=https://slb.console.aliyun.com/overview><strong>Load Balancer</strong></a> als een aparte categorie; de positie in het netwerk verschilt van gewone applicatieservers.</p><h2 id=k8s-bedieningshandleiding>K8S-bedieningshandleiding</h2><p>Gebruik het <a href=https://github.com/traefik/whoami>whoami</a>-project als voorbeeld voor de implementatie.</p><h3 id=deployment-maken>Deployment maken</h3><p>Maak eerst de service:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>apps/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Deployment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>whoami-deployment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>whoami</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>template</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>whoami</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>whoami</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>docker.io/traefik/whoami:latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span>- <span class=nt>containerPort</span><span class=p>:</span><span class=w> </span><span class=m>8080</span><span class=w>
</span></span></span></code></pre></div><p>Deze stap creëert een <strong>Deployment</strong> met 3 <strong>Pods</strong>, elk met een container die de <strong>whoami</strong>-service draait.</p><h3 id=service-maken>Service maken</h3><p>Je kunt een <strong>NodePort</strong>- of <strong>LoadBalancer</strong>-type service maken voor externe toegang, of een <strong>ClusterIP</strong>-type service voor alleen interne clustertoegang, en dan een <strong>Ingress</strong>-service toevoegen om externe toegang bloot te stellen.</p><p><strong>NodePort</strong> kan zowel via <strong>NodeIP:NodePort</strong> als via <strong>Ingress</strong>-service worden benaderd, handig voor testen. In deze sectie gebruiken we de <strong>NodePort</strong>-service.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>whoami-service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>NodePort</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>whoami</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class=l>TCP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>80</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>targetPort</span><span class=p>:</span><span class=w> </span><span class=m>8080</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>nodePort</span><span class=p>:</span><span class=w> </span><span class=m>30002</span><span class=w>
</span></span></span></code></pre></div><p>Na het maken van de service, toegang met <code>curl whoami.example.com:30002</code>, en je ziet dat het geretourneerde IP het <strong>NodeIP</strong> is, niet het bron-IP van het verzoek.</p><blockquote><p>Let op, dit is niet het juiste client-IP; het zijn interne IP&rsquo;s van het cluster. Dit is wat er gebeurt:</p><ul><li>De client stuurt een datapakket naar node2:nodePort</li><li>node2 vervangt het bron-IP-adres van het datapakket door zijn eigen IP-adres (SNAT)</li><li>node2 vervangt het doel-IP op het datapakket door het Pod-IP</li><li>Het datapakket wordt gerouteerd naar node1 en dan naar het endpoint</li><li>De reactie van de Pod wordt gerouteerd terug naar node2</li><li>De reactie van de Pod wordt teruggestuurd naar de client</li></ul></blockquote><p>Weergegeven in een diagram:</p><p><img src=https://s2.loli.net/2024/05/27/fDg2tBx5FIcGMZN.png alt></p><h4 id=externaltrafficpolicy-local-configureren>externalTrafficPolicy: Local configureren</h4><blockquote><p>Om dit te voorkomen, heeft Kubernetes een functie om het client-bron-IP te behouden. Als je service.spec.externalTrafficPolicy instelt op Local, zal kube-proxy verzoeken alleen proxyen naar lokale endpoints en verkeer niet doorsturen naar andere nodes.</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>whoami-service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>NodePort</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>externalTrafficPolicy</span><span class=p>:</span><span class=w> </span><span class=l>Local</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>whoami</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class=l>TCP</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>80</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>targetPort</span><span class=p>:</span><span class=w> </span><span class=m>8080</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>nodePort</span><span class=p>:</span><span class=w> </span><span class=m>30002</span><span class=w>
</span></span></span></code></pre></div><p>Test met <code>curl whoami.example.com:30002</code>. Wanneer <strong>whoami.example.com</strong> is gemapt naar IP&rsquo;s van meerdere nodes in het cluster, is er een zekere kans dat het niet toegankelijk is. Je moet bevestigen dat de DNS-record alleen de IP bevat van de node waar het endpoint (pod) zich bevindt.</p><p>Deze configuratie heeft een <strong>kost</strong>: het verlies van load balancing binnen het cluster. Clients krijgen alleen een reactie als ze de node bezoeken waar het endpoint is geïmplementeerd.</p><p><img src=https://s2.loli.net/2024/05/27/PCgiTLF28XE4RKx.png alt="Beperkingen van toegangspaden"></p><p>Wanneer de client Node 2 benadert, is er geen reactie.</p><h3 id=ingress-maken>Ingress maken</h3><p>De meeste services worden aan gebruikers aangeboden via <strong>http/https</strong>. De vorm <strong>https://ip:port</strong> voelt vreemd voor gebruikers. Meestal wordt <strong>Ingress</strong> gebruikt om de eerder gemaakte <strong>NodePort</strong>-service te load balancen naar poort <strong>80/443</strong> onder een domein.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>networking.k8s.io/v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Ingress</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>whoami-ingress</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>default</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ingressClassName</span><span class=p>:</span><span class=w> </span><span class=l>external-lb-default</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>rules</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>host</span><span class=p>:</span><span class=w> </span><span class=l>whoami.example.com</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>http</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>paths</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span>- <span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>/</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>pathType</span><span class=p>:</span><span class=w> </span><span class=l>Prefix</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>backend</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>              </span><span class=nt>service</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>whoami-service</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                </span><span class=nt>port</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                  </span><span class=nt>number</span><span class=p>:</span><span class=w> </span><span class=m>80</span><span class=w>
</span></span></span></code></pre></div><p>Na toepassing, test met <code>curl whoami.example.com</code>, en je ziet dat ClientIP altijd het Pod-IP is van de <code>Ingress Controller</code> op de node waar het endpoint zich bevindt.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>root@client:~# curl whoami.example.com
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>RemoteAddr: 10.42.1.10:56482
</span></span><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>root@worker:~# kubectl get -n ingress-nginx pod -o wide
</span></span><span class=line><span class=cl>NAME                                       READY   STATUS    RESTARTS   AGE    IP           NODE          NOMINATED NODE   READINESS GATES
</span></span><span class=line><span class=cl>ingress-nginx-controller-c8f499cfc-xdrg7   1/1     Running   <span class=m>0</span>          3d2h   10.42.1.10   k3s-agent-1   &lt;none&gt;           &lt;none&gt;
</span></span></code></pre></div><p>Het gebruik van <strong>Ingress</strong> als reverse proxy voor de <strong>NodePort</strong>-service betekent dat er twee service-lagen voor het endpoint zijn. Het onderstaande diagram toont het verschil.</p><pre class=mermaid>graph LR
    A[Client] --&gt;|whoami.example.com:80| B(Ingress)
    B --&gt;|10.43.38.129:32123| C[Service]
    C --&gt;|10.42.1.1:8080| D[Endpoint]</pre><pre class=mermaid>graph LR
    A[Client] --&gt;|whoami.example.com:30001| B(Service)
    B --&gt;|10.42.1.1:8080| C[Endpoint]</pre><p>In pad 1 bereikt extern verkeer naar Ingress eerst het endpoint <code>Ingress Controller</code>, en dan het endpoint <strong>whoami</strong>.<br>De <strong>Ingress Controller</strong> is in wezen een <strong>LoadBalancer</strong>-service.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>kubectl -n ingress-nginx get svc
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAMESPACE   NAME             CLASS   HOSTS                       ADDRESS                                              PORTS   AGE
</span></span><span class=line><span class=cl>default     echoip-ingress   nginx   ip.example.com       172.16.0.57,2408:4005:3de:8500:4da1:169e:dc47:1707   <span class=m>80</span>      18h
</span></span><span class=line><span class=cl>default     whoami-ingress   nginx   whoami.example.com   172.16.0.57,2408:4005:3de:8500:4da1:169e:dc47:1707   <span class=m>80</span>      16h
</span></span></code></pre></div><p>Daarom kun je het eerder genoemde <code>externalTrafficPolicy</code> instellen in de Ingress Controller om het bron-IP te behouden.</p><p>Tegelijkertijd moet je <code>use-forwarded-headers</code> in de <code>configmap</code> van <code>ingress-nginx-controller</code> instellen op <code>true</code>, zodat de <strong>Ingress Controller</strong> de velden <code>X-Forwarded-For</code> of <code>X-REAL-IP</code> kan herkennen.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>data</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>allow-snippet-annotations</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;false&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>compute-full-forwarded-for</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;true&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>use-forwarded-headers</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;true&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>enable-real-ip</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;true&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>forwarded-for-header</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;X-Real-IP&#34;</span><span class=w> </span><span class=c># X-Real-IP or X-Forwarded-For</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>ConfigMap</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>app.kubernetes.io/component</span><span class=p>:</span><span class=w> </span><span class=l>controller</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>app.kubernetes.io/instance</span><span class=p>:</span><span class=w> </span><span class=l>ingress-nginx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>app.kubernetes.io/name</span><span class=p>:</span><span class=w> </span><span class=l>ingress-nginx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>app.kubernetes.io/part-of</span><span class=p>:</span><span class=w> </span><span class=l>ingress-nginx</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>app.kubernetes.io/version</span><span class=p>:</span><span class=w> </span><span class=m>1.10.1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>ingress-nginx-controller</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>ingress-nginx</span><span class=w>
</span></span></span></code></pre></div><p>Het verschil tussen <strong>NodePort</strong>-service en <strong>ingress-nginx-controller</strong>-service ligt voornamelijk hierin dat de backend van <strong>NodePort</strong> meestal niet op elke node is geïmplementeerd, terwijl de backend van <strong>ingress-nginx-controller</strong> meestal op elke naar buiten gerichte node is geïmplementeerd.</p><p>In tegenstelling tot het instellen van <code>externalTrafficPolicy</code> in de <strong>NodePort</strong>-service, wat leidt tot geen reactie op verzoeken over nodes heen, kan <strong>Ingress</strong> eerst de HEADER instellen en dan proxy-forwarden, waardoor zowel <strong>bron-IP behouden</strong> als <strong>load balancing</strong> mogelijk is.</p><h2 id=samenvatting>Samenvatting</h2><ul><li><strong>Adresvertaling (NAT)</strong>, <strong>proxy (Proxy)</strong>, <strong>reverse proxy (Reverse Proxy)</strong> en <strong>load balancing (Load Balance)</strong> leiden tot verlies van bron-IP.</li><li>Om verlies van bron-IP te voorkomen, kan de proxyserver bij doorsturen het echte IP instellen in het HTTP-kopveld <code>X-REAL-IP</code> en doorgeven via de proxyservice. Bij meerdere proxy-lagen kun je het veld <code>X-Forwarded-For</code> gebruiken, dat een <strong>lijst van IP&rsquo;s</strong> registreert van bron-IP en proxy-pad in de vorm van een <strong>stack</strong>.</li><li>Instellen van <code>externalTrafficPolicy: Local</code> voor <strong>NodePort</strong>-services in het cluster behoudt het bron-IP, maar verliest load balancing-capaciteit.</li><li><strong>ingress-nginx-controller</strong>, geïmplementeerd als <strong>daemonset</strong> op alle <strong>loadbalancer</strong>-rolnodes, behoudt het bron-IP met <code>externalTrafficPolicy: Local</code> en behoudt ook load balancing-capaciteit.</li></ul><h2 id=referenties>Referenties</h2><ul><li><a href=https://kubernetes.io/zh-cn/docs/tutorials/services/source-ip/>Kubernetes gebruik bron-IP</a></li><li><a href=https://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/configmap/>Ingress-Nginx Controller:ConfigMap</a></li><li><a href=https://kubernetes.io/zh-cn/docs/concepts/services-networking/ingress-controllers/>Ingress Controller</a></li></ul><br><script src=https://giscus.app/client.js data-repo=jqknono/blog data-repo-id=R_kgDONOhENQ data-category=Announcements data-category-id=DIC_kwDONOhENc4CkQDB data-mapping=title data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=preferred_color_scheme data-lang=en data-loading=lazy crossorigin=anonymous async></script><br><ul class="list-unstyled d-flex justify-content-between align-items-center mb-0 pt-5"><li><a href=/nl-nl/blog/2024/05/21/wireguard-volledige-oplossing-tegen-provider-udp-qos/ aria-label="Vorige - WireGuard: Volledige oplossing tegen provider UDP QoS" class="btn btn-primary"><span class=me-1>←</span>Vorige</a></li><li><a href=/nl-nl/blog/2024/05/27/windows-systeem-installeren-en-activeren/ aria-label="Volgende - Windows-systeem installeren en activeren" class="btn btn-primary">Volgende<span class=ms-1>→</span></a></li></ul></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title="User mailing list" aria-label="User mailing list"><a target=_blank rel=noopener href=https://groups.google.com/forum/#!forum/jqknono aria-label="User mailing list"><i class=envelope></i></a></li></ul></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=GitHub aria-label=GitHub><a target=_blank rel=noopener href=https://github.com/jqknono aria-label=GitHub><i class="fab fa-github"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="User mailing list" aria-label="User mailing list"><a target=_blank rel=noopener href=https://groups.google.com/forum/#!forum/jqknono aria-label="User mailing list"><i class=envelope></i></a></li></ul></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"><span class=td-footer__copyright>&copy;
2015&ndash;2025
<span class=td-footer__authors>jqknono</span></span><span class=td-footer__all_rights_reserved>Alle rechten voorbehouden</span></div></div></div></footer></div><script type=module async>
  import mermaid from "https:\/\/cdn.jsdelivr.net\/npm\/mermaid@latest\/dist\/mermaid.esm.min.mjs";

  (function ($) {
    if ($('.mermaid').length == 0) {
      mermaid.initialize({ startOnLoad: false });
      return;
    }

    var params = {"theme":"default","version":"latest"};

    
    
    var norm = function (defaultConfig, params) {
      var result = {};
      for (const key in defaultConfig) {
        const keyLower = key.toLowerCase();
        if (defaultConfig.hasOwnProperty(key) && params.hasOwnProperty(keyLower)) {
          if (typeof defaultConfig[key] === "object") {
            result[key] = norm(defaultConfig[key], params[keyLower]);
          } else {
            result[key] = params[keyLower];
          }
        }
      }
      return result;
    };

    var settings = norm(mermaid.mermaidAPI.defaultConfig, params);
    settings.startOnLoad = true;
    if ($('html[data-bs-theme="dark"]').length) {
      settings.theme = 'dark';
    }
    mermaid.initialize(settings);

    
    const lightDarkModeThemeChangeHandler = function (mutationsList, observer) {
      for (const mutation of mutationsList) {
        if (mutation.type === 'attributes' && mutation.attributeName === 'data-bs-theme') {
          
          
          
          location.reload();
        }
      }
    };

    const observer = new MutationObserver(lightDarkModeThemeChangeHandler);
    observer.observe(document.documentElement, {
      attributes: true,
      attributeFilter: ['data-bs-theme']
    });
    

  })(jQuery);
</script><script src=/js/main.min.d20e761d6aa4d2ace0488e45da0e775a8b17300a8430f32fbcfa016e6c9e6eb6.js integrity="sha256-0g52HWqk0qzgSI5F2g53WosXMAqEMPMvvPoBbmyebrY=" crossorigin=anonymous></script><script defer src=/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script></body></html>